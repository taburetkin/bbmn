{"version":3,"file":"bbmn.esm.js","sources":["node_modules/bbmn-core/lib/es/index.js","node_modules/bbmn-utils/lib/es/index.js","node_modules/bbmn-mixins/src/collection-view/empty-fetch/index.js","node_modules/bbmn-mixins/src/collection-view/empty-view/index.js","node_modules/bbmn-mixins/src/collection-view/improved-indexes/index.js","node_modules/bbmn-mixins/src/collection-view/next-collection-view/index.js","node_modules/bbmn-mixins/src/collection-view/customs/index.js","node_modules/bbmn-mixins/src/collection-view/fetch-next/index.js","node_modules/bbmn-mixins/src/common/improved-fetch/index.js","node_modules/bbmn-mixins/src/common/childrenable/index.js","node_modules/bbmn-mixins/src/common/nested-entities/index.js","node_modules/bbmn-mixins/src/common/options/index.js","node_modules/bbmn-mixins/src/common/url-pattern/index.js","node_modules/bbmn-mixins/src/common/render-on-model-change/index.js","node_modules/bbmn-mixins/src/common/index.js","node_modules/bbmn-mixins/src/model/smart-get/get-nested-result.js","node_modules/bbmn-mixins/src/model/smart-get/get-property-schema.js","node_modules/bbmn-mixins/src/model/smart-get/get-display-config.js","node_modules/bbmn-mixins/src/model/smart-get/index.js","node_modules/bbmn-mixins/src/model/save-as-promise/index.js","node_modules/bbmn-mixins/src/view/build-view-by-key/index.js","node_modules/bbmn-mixins/src/view/css-class-modifiers/index.js","node_modules/bbmn-mixins/src/view/destroy-view/index.js","node_modules/bbmn-mixins/src/view/nested-views/build-region.js","node_modules/bbmn-mixins/src/view/nested-views/normalize-region.js","node_modules/bbmn-mixins/src/view/nested-views/index.js","node_modules/bbmn-mixins/src/view/scroll-handler/index.js","node_modules/bbmn-mixins/src/view/sortable-behavior/index.js","node_modules/bbmn-mixins/src/view/dragdrop/helpers.js","node_modules/bbmn-mixins/src/view/dragdrop/interaction-behavior.js","node_modules/bbmn-mixins/src/view/dragdrop/swappable-behavior.js","node_modules/bbmn-mixins/src/collection/create-as-promise/index.js","node_modules/bbmn-components/src/process/helpers.js","node_modules/bbmn-components/src/process/register.js","node_modules/bbmn-components/src/process/process.js","node_modules/bbmn-components/src/process/startable-mixin.js","node_modules/bbmn-components/src/app/index.js","node_modules/bbmn-components/src/model-schemas/schema.js","node_modules/bbmn-components/src/model-schemas/property-schema.js","node_modules/bbmn-components/src/model-schemas/model-schema.js","node_modules/bbmn-components/src/class-store/index.js","node_modules/bbmn-components/src/model-schemas/store.js","node_modules/bbmn-components/src/model-schemas/model-mixin.js","node_modules/bbmn-components/src/views/views.js","node_modules/bbmn-components/src/views/atom-text.js","node_modules/bbmn-components/src/views/text-view.js","node_modules/bbmn-components/src/validator/rules.js","node_modules/bbmn-components/src/validator/validate.js","node_modules/bbmn-components/src/validator/index.js","node_modules/bbmn-components/src/user/index.js","node_modules/bbmn-components/src/bearer-token/index.js","node_modules/bbmn-components/src/view-stack/index.js","node_modules/bbmn-components/src/store/fake.js","node_modules/bbmn-components/src/store/store.js","node_modules/bbmn-components/src/store/index.js","node_modules/bbmn-components/src/notifier/model.js","node_modules/bbmn-components/src/notifier/notifies.js","node_modules/bbmn-components/src/notifier/notify.js","node_modules/bbmn-components/src/notifier/notify-view.js","node_modules/bbmn-components/src/notifier/notifier.js","node_modules/bbmn-components/src/notifier/sync-with-notify-mixin.js","node_modules/bbmn-components/src/actions/action.js","node_modules/bbmn-components/src/actions/store.js","node_modules/bbmn-components/src/actions/actionable-mixin.js","node_modules/bbmn-components/src/actions/index.js","node_modules/bbmn-components/src/modals/views.js","node_modules/bbmn-components/src/modals/config.js","node_modules/bbmn-components/src/modals/index.js","node_modules/bbmn-components/src/selector/init-selector-mixin.js","node_modules/bbmn-components/src/selector/index.js","node_modules/bbmn-routing/lib/es/index.js","node_modules/bbmn-controls/src/button/mixin.js","node_modules/bbmn-controls/src/button/index.js","node_modules/bbmn-controls/src/control-mixin/index.js","node_modules/bbmn-controls/src/control-view/mixin.js","node_modules/bbmn-controls/src/promise-bar/mixin.js","node_modules/bbmn-controls/src/promise-bar/index.js","node_modules/bbmn-controls/src/control-view/index.js","node_modules/bbmn-controls/src/edit-schema/common.js","node_modules/bbmn-controls/src/edit-schema/error-view.js","node_modules/bbmn-controls/src/edit-schema/property.js","node_modules/bbmn-controls/src/edit-schema/model.js","node_modules/bbmn-controls/src/controls.js","node_modules/bbmn-controls/src/edit-schema/index.js","node_modules/bbmn-controls/src/input/get-input-type.js","node_modules/bbmn-controls/src/input/set-attributes.js","node_modules/bbmn-controls/src/input/events/_get-option.js","node_modules/bbmn-controls/src/input/events/_is-char.js","node_modules/bbmn-controls/src/input/events/keydown.js","node_modules/bbmn-controls/src/input/events/keyup.js","node_modules/bbmn-controls/src/input/events/paste.js","node_modules/bbmn-controls/src/input/events/blur.js","node_modules/bbmn-controls/src/input/events/focus.js","node_modules/bbmn-controls/src/input/events/input.js","node_modules/bbmn-controls/src/input/events/index.js","node_modules/bbmn-controls/src/input/handle-event.js","node_modules/bbmn-controls/src/input/set-events.js","node_modules/bbmn-controls/src/input/mixin.js","node_modules/bbmn-controls/src/input/index.js","node_modules/bbmn-controls/src/textarea/index.js","node_modules/bbmn-controls/src/select/selectable-view-mixin.js","node_modules/bbmn-controls/src/select/childview.js","node_modules/bbmn-controls/src/select/control.js","node_modules/bbmn-controls/src/boolean-switch/index.js"],"sourcesContent":["import { MnObject, Object, Region } from 'backbone.marionette';\nimport { Collection, Events, Model, Router, View, ajax, history } from 'backbone';\nimport _ from 'underscore';\n\nvar version = \"1.0.0\";\n\n/* istanbul ignore next */\nvar newObject = MnObject || Object;\n\nfunction isClass(arg, Base) {\n\treturn _.isFunction(arg) && (arg == Base || arg.prototype instanceof Base);\n}\n\nfunction isModel(arg) {\n\treturn arg instanceof Model;\n}\n\nfunction isModelClass(arg) {\n\treturn isClass(arg, Model);\n}\n\nfunction isCollection(arg) {\n\treturn arg instanceof Collection;\n}\nfunction isCollectionClass(arg) {\n\treturn isClass(arg, Collection);\n}\n\nfunction isView(arg) {\n\treturn arg instanceof View;\n}\n\nfunction isViewClass(arg) {\n\treturn isClass(arg, View);\n}\n\nvar extend = Model.extend;\n\nvar BaseClass = function BaseClass() {};\nBaseClass.extend = extend;\n\nvar index = {\n\tVERSION: version,\n\tRegion: Region, MnObject: newObject,\n\tModel: Model,\n\tCollection: Collection,\n\tBackboneView: View,\n\tEvents: Events,\n\tRouter: Router,\n\thistory: history,\n\tajax: ajax,\n\tisClass: isClass,\n\tisModel: isModel,\n\tisModelClass: isModelClass,\n\tisCollection: isCollection,\n\tisCollectionClass: isCollectionClass,\n\tisView: isView,\n\tisViewClass: isViewClass,\n\textend: extend,\n\tBaseClass: BaseClass\n};\n\nexport { version as VERSION, Region, newObject as MnObject, Model, Collection, View as BackboneView, Events, Router, history, ajax, isClass, isModel, isModelClass, isCollection, isCollectionClass, isView, isViewClass, extend, BaseClass };\nexport default index;\n\n//# sourceMappingURL=index.js.map\n","import _ from 'underscore';\nimport { BackboneView, BaseClass, Collection, MnObject, Model, Region, Router, extend, isClass, isCollection, isCollectionClass, isModel, isModelClass, isView, isViewClass } from 'bbmn-core';\nimport Mn from 'backbone.marionette';\n\nvar version = \"1.0.20\";\n\nvar ctors = _.reduce([Model, Collection, BackboneView, Router, MnObject, Region, BaseClass], function (ctors, ctor) {\n\t/* istanbul ignore next */\n\tif (_.isFunction(ctor)) {\n\t\tctors.push(ctor);\n\t}\n\treturn ctors;\n}, []);\n\nvar tryGetFromMn = ['Application', 'AppRouter'];\n\n_.each(tryGetFromMn, function (ClassName) {\n\t_.isFunction(Mn[ClassName]) && ctors.push(Mn[ClassName]);\n});\n\nfunction isKnownCtor(arg) {\n\tif (!_.isFunction(arg)) {\n\t\treturn false;\n\t}\n\treturn _(ctors).some(function (ctor) {\n\t\treturn arg === ctor || arg.prototype instanceof ctor;\n\t});\n}\n\nfunction betterResult() {\n\tvar obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\tvar key = arguments[1];\n\tvar opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\tvar context = opts.context,\n\t    args = opts.args,\n\t    checkAlso = opts.checkAlso,\n\t    force = opts.force;\n\n\tvar defaultValue = opts.default;\n\n\tif (!_.isString(key) || key === '') {\n\t\treturn;\n\t}\n\n\tvar value = obj[key];\n\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value))) {\n\t\treturn value;\n\t}\n\n\tif (force !== false && _.isFunction(value)) {\n\t\tvalue = value.apply(context || obj, args);\n\t}\n\n\t//let result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\n\n\tif (value == null && _.isObject(checkAlso)) {\n\t\tvar alsoOptions = _.omit(opts, 'checkAlso');\n\t\tvalue = betterResult(checkAlso, key, alsoOptions);\n\t}\n\n\tif (value == null && defaultValue != null) {\n\t\tvalue = defaultValue;\n\t}\n\n\treturn value;\n}\n\n// camelCase('asd:qwe:zxc') -> asdQweZxc\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\nfunction camelCase() {\n\n\tvar text = void 0;\n\tvar first = void 0;\n\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\tif (!args.length) return;else if (args.length == 1) {\n\t\ttext = args[0];\n\t} else {\n\t\tif (_.isBoolean(args[args.length - 1])) {\n\t\t\tfirst = args.pop();\n\t\t}\n\t\ttext = _.filter(args, function (chunk) {\n\t\t\treturn chunk != null;\n\t\t}).join(':');\n\t}\n\n\tif (!text) return text;\n\n\tif (!_.isString(text)) return text.toString();\n\ttext = text.replace(/:{2,}/gmi, ':');\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\n\ttext = text.replace(splitter, function (match, prefix, text) {\n\t\treturn text.toUpperCase();\n\t});\n\tif (!first) text = text.replace(/(^)(\\w)/gi, function (match, prefix, text) {\n\t\treturn text.toLowerCase();\n\t});\n\treturn text;\n}\n\nfunction takeFirst(key) {\n\tif (!_.isString(key) || key === '') return;\n\tvar value = void 0;\n\n\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\targs[_key - 1] = arguments[_key];\n\t}\n\n\t_.some(args, function (arg) {\n\t\tif (!_.isObject(arg)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (key in arg) {\n\t\t\tvalue = arg[key];\n\t\t\treturn true;\n\t\t}\n\t});\n\treturn value;\n}\n\nfunction getModel(arg) {\n\n\tif (isModel(arg)) {\n\t\treturn arg;\n\t}\n\n\tif (isView(arg)) {\n\t\treturn arg.model;\n\t}\n}\n\nfunction getModel$1(arg) {\n\treturn isView(arg) && arg;\n}\n\nfunction compareAB(a, b, func) {\n\tif (_.isArray(func)) {\n\n\t\tvar result = 0;\n\n\t\t_(func).every(function (f) {\n\t\t\tresult = compareAB(a, b, f);\n\t\t\treturn result === 0;\n\t\t});\n\n\t\treturn result;\n\t} else {\n\t\tif (_.isFunction(func)) {\n\t\t\ta = func.call(a, getModel(a), getModel$1(a));\n\t\t\tb = func.call(b, getModel(b), getModel$1(b));\n\t\t}\n\n\t\tif (a < b) return -1;\n\t\tif (a > b) return 1;\n\t\treturn 0;\n\t}\n}\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nfunction comparator() {\n\tvar result = 0;\n\n\t//for simple case (arg1, arg2, compare)\n\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\tif (args.length <= 3 && !_.isArray(args[0])) {\n\n\t\treturn compareAB.apply(null, args);\n\t}\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\n\t//each arguments should be an array\n\telse {\n\n\t\t\t_(args).every(function (single) {\n\n\t\t\t\tif (!_.isArray(single)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tresult = compareAB.apply(undefined, toConsumableArray(single));\n\t\t\t\treturn result === 0;\n\t\t\t});\n\t\t}\n\n\treturn result;\n}\n\nfunction toNumber(text) {\n\n\tif (_.isNumber(text) && !_.isNaN(text)) {\n\t\treturn text;\n\t} else if (text == null || !_.isString(text)) {\n\t\treturn;\n\t}\n\n\tvar value = parseFloat(text, 10);\n\n\tif (isNaN(value)) {\n\t\treturn;\n\t}\n\n\treturn value;\n}\n\nvar defaultOptions = {\n\tnullable: true,\n\tstrict: false,\n\treturnNullAs: undefined,\n\treturnEmptyAs: undefined,\n\treturnNullAndEmptyAs: undefined,\n\treturnAnyAs: undefined,\n\treturnOtherAs: undefined\n};\n\nvar trueValues = ['true', '1', '-1', 'yes'];\nvar falseValues = ['false', '0', 'no'];\n\nvar alternative = function alternative() {\n\tvar returnValue = void 0;\n\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\t_(args).some(function (arg) {\n\t\tif (_.isBoolean(arg)) {\n\t\t\treturnValue = arg;\n\t\t\treturn true;\n\t\t}\n\t});\n\treturn returnValue;\n};\n\nvar valueOrAlternative = function valueOrAlternative(nullable, nullValue, value) {\n\tfor (var _len2 = arguments.length, alts = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n\t\talts[_key2 - 3] = arguments[_key2];\n\t}\n\n\tvar alt = alternative.apply(undefined, alts);\n\tif (alt != null) return alt;else if (nullable) return nullValue;else return value;\n};\n\nvar convertToBoolean = function convertToBoolean(arg) {\n\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n\tvar other = void 0;\n\tvar options = _.extend({}, defaultOptions, opts);\n\tvar nullable = options.nullable,\n\t    strict = options.strict,\n\t    returnNullAs = options.returnNullAs,\n\t    returnEmptyAs = options.returnEmptyAs,\n\t    returnNullAndEmptyAs = options.returnNullAndEmptyAs,\n\t    returnAnyAs = options.returnAnyAs,\n\t    returnOtherAs = options.returnOtherAs;\n\n\n\tif (arg == null) {\n\t\treturn valueOrAlternative(nullable, undefined, false, returnNullAs, returnNullAndEmptyAs);\n\t} else if (arg === '') {\n\t\treturn valueOrAlternative(nullable, undefined, false, returnEmptyAs, returnNullAndEmptyAs);\n\t} else if (_.isBoolean(arg)) {\n\t\treturn arg;\n\t}\n\t//  else if (_.isObject(arg)) {\n\t// }\n\n\tother = strict ? nullable ? undefined : false : true;\n\n\tvar text = arg.toString().toLowerCase();\n\tvar isTrue = convertToBoolean.trueValues.indexOf(text) > -1;\n\tvar isFalse = convertToBoolean.falseValues.indexOf(text) > -1;\n\n\tif (_.isBoolean(returnAnyAs)) {\n\t\treturn returnAnyAs;\n\t} else if (_.isBoolean(returnOtherAs)) {\n\t\tother = returnOtherAs;\n\t}\n\n\treturn isTrue ? true : isFalse ? false : other;\n};\n\nconvertToBoolean.trueValues = trueValues;\nconvertToBoolean.falseValues = falseValues;\n\nvar converters = {\n\tnumber: toNumber,\n\tboolean: convertToBoolean,\n\tbool: convertToBoolean\n};\n\n//this is under development yet and can be change in any time\nfunction convertString(text, type, options) {\n\n\tif (!_.isString(type)) {\n\t\treturn text;\n\t}\n\n\tvar converter = converters[type];\n\n\tif (!_.isFunction(converter)) {\n\t\treturn text;\n\t}\n\n\treturn converter(text, options);\n}\n\nfunction isBadSource(src, flatted) {\n\tif (typeof global !== 'undefined' && src === global) {\n\t\treturn true;\n\t} else if (typeof window !== 'undefined' && src === window) {\n\t\treturn true;\n\t} else if (flatted.indexOf(src) > -1) {\n\t\treturn true;\n\t}\n}\n\nvar privateApi = {\n\ttraverse: function traverse(source) {\n\t\tvar destination = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\tvar root = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\t\tvar sources = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n\t\tif (_.isFunction(source) || _.isArray(source)) {\n\t\t\treturn source;\n\t\t}\n\t\tif (isBadSource(source, sources)) {\n\t\t\treturn;\n\t\t}\n\t\tsources.push(source);\n\t\tvar hash = isModel(source) ? source.attributes : source;\n\n\t\tvar props = Object.getOwnPropertyNames(hash);\n\n\t\tfor (var x = 0; x < props.length; x++) {\n\t\t\tvar name = props[x];\n\t\t\tvar prop = hash[name];\n\t\t\tif (prop === undefined) {\n\t\t\t\tcontinue;\n\t\t\t} else if (_.isArray(prop)) {\n\t\t\t\tdestination[root + name] = prop.slice(0);\n\t\t\t} else if (_.isDate(prop)) {\n\t\t\t\tdestination[root + name] = new Date(prop.valueOf());\n\t\t\t} else if (!_.isObject(prop) || _.isFunction(prop)) {\n\t\t\t\tdestination[root + name] = prop;\n\t\t\t} else {\n\t\t\t\tprivateApi.traverse(prop, destination, root + name + '.', _.clone(sources));\n\t\t\t}\n\t\t}\n\n\t\treturn destination;\n\t}\n};\n\nfunction flattenObject(obj) {\n\tif (_.isObject(obj)) {\n\t\treturn privateApi.traverse(obj);\n\t}\n}\n\nfunction isEmptyValue(arg) {\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$allowWhiteSpace = _ref.allowWhiteSpace,\n\t    allowWhiteSpace = _ref$allowWhiteSpace === undefined ? false : _ref$allowWhiteSpace;\n\n\tif (arg == null || _.isNaN(arg)) return true;\n\n\tif (!_.isString(arg)) return false;\n\n\tif (arg === '') return true;\n\n\treturn !allowWhiteSpace && arg.trim() === '';\n}\n\nfunction getProperty(context, name) {\n\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\tif (!_.isObject(context) || isEmptyValue(name)) {\n\t\treturn;\n\t}\n\n\tif (isModel(context)) {\n\t\tvar noModelAttributes = options.noModelAttributes,\n\t\t    includeModelProperty = options.includeModelProperty,\n\t\t    modelPropertyFirst = options.modelPropertyFirst;\n\n\n\t\tvar attrValue = context.get(name, { gettingByPath: true });\n\t\tvar propValue = context[name];\n\t\tvar value = void 0;\n\n\t\tif (noModelAttributes === true) {\n\t\t\tvalue = propValue;\n\t\t} else if (modelPropertyFirst) {\n\t\t\tvalue = propValue != null ? propValue : attrValue;\n\t\t} else if (includeModelProperty) {\n\t\t\tvalue = attrValue != null ? attrValue : propValue;\n\t\t} else {\n\t\t\tvalue = attrValue;\n\t\t}\n\n\t\treturn value;\n\t} else {\n\t\treturn context[name];\n\t}\n}\n\nfunction getByPathArray(context, propertyName, pathArray, options) {\n\n\tif (!_.isObject(context) || isEmptyValue(propertyName)) return;\n\n\tvar prop = getProperty(context, propertyName, options);\n\n\tif (!pathArray.length || prop == null) return prop;\n\n\tvar nextName = pathArray.shift();\n\n\treturn getByPathArray(prop, nextName, pathArray, options);\n}\n\nfunction getByPath(obj, path, options) {\n\n\tif (!_.isObject(obj) || isEmptyValue(path)) return;\n\n\tvar pathArray = _.isString(path) ? path.split('.') : _.isArray(path) ? [].slice.call(path) : [path];\n\n\tvar prop = pathArray.shift();\n\n\treturn getByPathArray(obj, prop, pathArray, options);\n}\n\nfunction getOption() {\n\tvar context = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\tvar key = arguments[1];\n\tvar opts = arguments[2];\n\tvar also = arguments[3];\n\n\n\tif (_.isObject(key) && _.isString(opts)) {\n\t\tvar _opts = also;\n\t\talso = key;\n\t\tkey = opts;\n\t\topts = _opts;\n\t}\n\n\tvar options = _.extend({ args: [context], context: context }, opts, { default: null });\n\tvar deep = options.deep;\n\n\tvar defaultValue = opts && opts.default;\n\n\tvar value = betterResult(context.options || also, key, options);\n\tif (value == null && deep !== false) {\n\t\tvalue = betterResult(context, key, options);\n\t}\n\n\treturn value != null ? value : defaultValue;\n}\n\nfunction instanceGetOption() {\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\treturn getOption.apply(undefined, [this].concat(args));\n}\n\nfunction normalizeStringArray(arr) {\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    caseSensitive = _ref.caseSensitive;\n\n\tvar check = {};\n\treturn _.reduce(arr, function (result, item) {\n\n\t\tif (isEmptyValue(item)) {\n\t\t\treturn result;\n\t\t}\n\t\titem = item.toString();\n\t\tvar checkKey = caseSensitive ? item : item.toLowerCase();\n\t\tif (checkKey in check) {\n\t\t\treturn result;\n\t\t}\n\t\tcheck[checkKey] = 1;\n\t\tresult.push(item.toString());\n\t\treturn result;\n\t}, []);\n}\n\nfunction normalizeArgument(value, options, returnObject) {\n\n\tif (_.isString(value)) {\n\t\tvalue = value.split(/\\s*,\\s*/gmi);\n\t}\n\n\tif (_.isArray(value)) {\n\t\treturn normalizeStringArray(value, options);\n\t} else if (_.isObject(value) && returnObject) {\n\t\treturn value;\n\t}\n}\n\nfunction normalizeValueAndFlag(value, flag, options) {\n\treturn {\n\t\tvalues: normalizeArgument(value, options, true),\n\t\tflags: normalizeArgument(flag, options)\n\t};\n}\n\nfunction compare(a, b, _ref2) {\n\tvar caseSensitive = _ref2.caseSensitive;\n\n\n\tif (!caseSensitive) {\n\t\ta = a.toLowerCase();\n\t\tb = b.toLowerCase();\n\t}\n\n\treturn a === b;\n}\n\nfunction searchFlags(values, flags, options) {\n\tvar isArray = _.isArray(values);\n\tvar useObjectValues = options.useObjectValues;\n\n\n\tvar result = _.reduce(values, function (filtered, item, key) {\n\t\tvar check = item;\n\t\tif (!isArray && !useObjectValues) {\n\t\t\tcheck = key;\n\t\t}\n\n\t\tvar good = _.some(flags, function (flag) {\n\t\t\treturn compare(check, flag, options);\n\t\t});\n\n\t\tif (!good) {\n\t\t\treturn filtered;\n\t\t}\n\n\t\tif (isArray) {\n\t\t\tfiltered.push(check);\n\t\t} else {\n\t\t\tfiltered.push({ value: item, key: key });\n\t\t}\n\n\t\treturn filtered;\n\t}, []);\n\n\tvar all = options.all;\n\tif (!result.length || all && result.length != flags.length) {\n\t\treturn;\n\t}\n\n\treturn result;\n}\n\nvar processReturns = {\n\tstring: function string(_ref) {\n\t\tvar isArray = _ref.isArray,\n\t\t    founded = _ref.founded,\n\t\t    delimeter = _ref.delimeter,\n\t\t    takeObjectKeys = _ref.takeObjectKeys;\n\n\t\tif (isArray) {\n\t\t\treturn founded.join(delimeter);\n\t\t} else {\n\t\t\tvar key = takeObjectKeys ? 'key' : 'value';\n\t\t\treturn _.pluck(founded, key).join(delimeter);\n\t\t}\n\t},\n\tarray: function array(_ref2) {\n\t\tvar isArray = _ref2.isArray,\n\t\t    doNotPluck = _ref2.doNotPluck,\n\t\t    founded = _ref2.founded,\n\t\t    takeObjectKeys = _ref2.takeObjectKeys;\n\n\t\tif (isArray || doNotPluck) {\n\t\t\treturn founded;\n\t\t} else {\n\t\t\tvar key = takeObjectKeys ? 'key' : 'value';\n\t\t\treturn _.pluck(founded, key);\n\t\t}\n\t},\n\tobject: function object(_ref3) {\n\t\tvar isArray = _ref3.isArray,\n\t\t    takeObjectKeys = _ref3.takeObjectKeys,\n\t\t    founded = _ref3.founded;\n\n\t\treturn _.reduce(founded, function (result, item, index) {\n\t\t\tvar value = isArray ? item : takeObjectKeys ? item.key : item.value;\n\t\t\tvar key = isArray ? index : takeObjectKeys ? item.value : item.key;\n\t\t\tresult[key] = value;\n\t\t\treturn result;\n\t\t}, {});\n\t}\n};\n\nfunction normalizedReturn(_ref4) {\n\tvar returnAs = _ref4.returnAs,\n\t    flag = _ref4.flag,\n\t    isArray = _ref4.isArray,\n\t    founded = _ref4.founded,\n\t    delimeter = _ref4.delimeter,\n\t    takeObjectKeys = _ref4.takeObjectKeys,\n\t    doNotPluck = _ref4.doNotPluck;\n\n\tif (returnAs == null) {\n\t\treturnAs = _.isArray(flag) ? 'array' : 'string';\n\t}\n\tvar processor = processReturns[returnAs];\n\tif (!_.isFunction(processor)) {\n\t\treturn;\n\t}\n\n\tvar processorOptions = {\n\t\tisArray: isArray, founded: founded, delimeter: delimeter, takeObjectKeys: takeObjectKeys, doNotPluck: doNotPluck\n\t};\n\n\treturn processor(processorOptions);\n}\n\nfunction getFlag(value, flag) {\n\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\tvar _normalizeValueAndFla = normalizeValueAndFlag(value, flag, options),\n\t    flags = _normalizeValueAndFla.flags,\n\t    values = _normalizeValueAndFla.values;\n\n\tif (!flags || !values) {\n\t\treturn;\n\t}\n\n\tvar founded = searchFlags(values, flags, options);\n\tif (!founded) {\n\t\treturn;\n\t}\n\n\tvar returnOptions = _.extend({\n\t\tdelimeter: ', ',\n\t\tisArray: _.isArray(values),\n\t\tflag: flag,\n\t\tfounded: founded\n\t}, _.pick(options, 'returnAs', 'takeObjectKeys', 'doNotPluck'));\n\n\treturn normalizedReturn(returnOptions);\n}\n\nfunction hasFlag(value, flag) {\n\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\n\tif (value == null || flag == null) return false;\n\n\tif (_.isNumber(value)) {\n\n\t\tif (!_.isNumber(flag)) return false;\n\n\t\tvar has = value & flag;\n\t\treturn options.all === true ? has === flag : has > 0;\n\t}\n\n\tvar _normalizeValueAndFla = normalizeValueAndFlag(value, flag, options),\n\t    flags = _normalizeValueAndFla.flags,\n\t    values = _normalizeValueAndFla.values;\n\n\tif (!flags || !values) {\n\t\treturn false;\n\t}\n\n\tvar founded = searchFlags(values, flags, options);\n\treturn !!founded && !!founded.length;\n}\n\nvar defaultOptions$1 = {\n\tmergeObjects: true,\n\twrapObjectWithConstructor: true\n};\n\nfunction createMixinFromObject(arg) {\n\n\tvar mixedObj = _.clone(arg);\n\tvar ctor = mixedObj.hasOwnProperty('constructor') && _.isFunction(mixedObj.constructor) && mixedObj.constructor;\n\tvar hasConstructor = _.isFunction(ctor);\n\n\treturn function (Base) {\n\t\tif (hasConstructor) {\n\t\t\tmixedObj.constructor = function mx() {\n\t\t\t\tBase.apply(this, arguments);\n\t\t\t\tctor.apply(this, arguments);\n\t\t\t};\n\t\t}\n\t\treturn Base.extend(mixedObj);\n\t};\n}\n\nfunction normalizeArguments(args, opts) {\n\tvar raw = {};\n\tvar wrap = opts.wrapObjectWithConstructor == true;\n\tvar merge = opts.mergeObjects == true;\n\tvar mixins = [];\n\t_(args).each(function (arg) {\n\n\t\t//if argument is function just put it to mixins array\n\t\t//and continue;\n\t\tif (_.isFunction(arg)) {\n\t\t\tmixins.push(arg);\n\t\t\treturn;\n\t\t}\n\n\t\t//if argument is not an object just skip it\n\t\tif (!_.isObject(arg)) return;\n\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \n\t\t//and there is a constructor function\n\t\t//converting to a mixin function\n\t\t//otherwise extend rawObject\n\t\tif (!merge || wrap && _.isFunction(arg.constructor)) {\n\t\t\tmixins.push(createMixinFromObject(arg));\n\t\t} else {\n\t\t\t_.extend(raw, arg);\n\t\t}\n\t});\n\n\t//if rawObject is not empty\n\t//convert it to a mixin function\n\t//and put it to the begin of mixins array\n\tif (_.size(raw)) mixins.unshift(createMixinFromObject(raw));\n\n\treturn mixins;\n}\n\nfunction withMethod() {\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\tvar mixins = normalizeArguments(args, this.options);\n\tvar Mixed = this.class;\n\tif (!mixins.length) {\n\t\treturn Mixed;\n\t} else {\n\t\treturn _.reduce(mixins, function (Memo, Ctor) {\n\t\t\tvar mixed = Ctor(Memo);\n\t\t\treturn mixed;\n\t\t}, Mixed);\n\t}\n}\n\nfunction mix(_ctor, options) {\n\n\tvar opts = _.extend({}, defaultOptions$1, options);\n\n\tvar ctor = void 0;\n\n\tif (_.isFunction(_ctor)) {\n\t\tctor = _ctor;\n\t} else if (_.isObject(_ctor)) {\n\t\tvar b = _.isFunction(_ctor.constructor) && _ctor.constructor;\n\t\tctor = function mx() {\n\t\t\tb.apply(this, arguments);\n\t\t};\n\t\t_.extend(ctor.prototype, _.omit(_ctor, 'constructor'));\n\t} else {\n\t\tthrow new Error('Mix argument should be a class or a plain object');\n\t}\n\n\tif (!_.isFunction(ctor.extend)) {\n\t\tctor.extend = extend;\n\t}\n\n\treturn {\n\t\toptions: opts,\n\t\twith: withMethod,\n\t\tclass: ctor\n\t};\n}\n\nfunction pstoSetPair(context, pair, options) {\n\tif (!_.isString(pair) || pair === '') return;\n\n\tvar keyvalue = pair.split('=');\n\tvar key = keyvalue.shift();\n\tvar value = keyvalue.join('=');\n\treturn pstoSetKeyValue(context, key, value, options);\n}\n\nfunction pstoSetKeyValue(context, key, value, options) {\n\n\tif (isEmptyValue(key)) return;\n\n\tkey = decodeURIComponent(key);\n\tvalue = decodeURIComponent(value);\n\n\tvar transform = options.transform;\n\tif (_.isFunction(transform)) {\n\t\tvalue = transform(key, value, options);\n\t}\n\n\tif (isEmptyValue(value)) return;\n\n\tif (key in context) {\n\t\tif (!_.isArray(context[key])) {\n\t\t\tcontext[key] = [context[key]];\n\t\t}\n\t\tcontext[key].push(value);\n\t} else {\n\t\tcontext[key] = value;\n\t}\n\treturn { key: key, value: value };\n}\n\nfunction paramsToObject(raw, options) {\n\tvar emptyObject = options.emptyObject !== false;\n\tvar result = {};\n\tif (!_.isString(raw)) return emptyObject ? result : undefined;\n\n\tvar rawpairs = raw.split('&');\n\tvar pairs = _(rawpairs).reduce(function (memo, rawpair) {\n\t\tvar pair = pstoSetPair(result, rawpair, options);\n\t\tif (pair != null) {\n\t\t\tmemo.push(pair);\n\t\t}\n\t\treturn memo;\n\t}, []);\n\n\tif (!_.size(result) && !emptyObject) {\n\t\treturn;\n\t}\n\n\treturn !options.asArray ? result : pairs;\n}\n\nfunction setProperty(context, name, value) {\n\tif (isModel(context)) {\n\t\tcontext.set(name, value, { silent: true });\n\t} else {\n\t\tcontext[name] = value;\n\t}\n\n\treturn getProperty(context, name);\n}\n\nfunction setByPathArr(context, propertyName, pathArray, value, options) {\n\n\tvar modelContext = void 0;\n\tif (isModel(context)) {\n\t\tmodelContext = {\n\t\t\tmodel: context,\n\t\t\tproperty: propertyName,\n\t\t\tpathChunks: [].slice.call(pathArray)\n\t\t};\n\t}\n\n\t//set value if this is a last chunk of path\n\tif (!pathArray.length) {\n\n\t\tmodelContext && options.models.push(modelContext);\n\n\t\treturn {\n\t\t\tvalue: setProperty(context, propertyName, value, options)\n\t\t};\n\t} else {\n\n\t\tvar prop = getProperty(context, propertyName);\n\n\t\tif (!_.isObject(prop) && !options.force) {\n\t\t\treturn;\n\t\t} else if (!_.isObject(prop) && options.force) {\n\t\t\tprop = setProperty(context, propertyName, {}, options);\n\t\t}\n\n\t\tmodelContext && options.models.push(modelContext);\n\n\t\tvar nextName = pathArray.shift();\n\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\n\t}\n}\n\nfunction normalizeSetByPathOptions() {\n\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\tvar ext = arguments[1];\n\tvar silent = opts.silent,\n\t    force = opts.force;\n\n\tsilent = silent === true;\n\tforce = force !== false;\n\tvar options = _.extend({}, opts, ext, {\n\t\tsilent: silent, force: force,\n\t\tmodels: []\n\t});\n\n\treturn options;\n}\n\nfunction triggerModelEventsOnSetByPath(value, options) {\n\tif (options.silent || !options.models.length) {\n\t\treturn;\n\t}\n\n\t_(options.models).each(function (context) {\n\t\tvar rest = context.pathChunks.join(':');\n\t\tif (rest) {\n\t\t\tcontext.model.trigger('change:' + context.property + ':' + rest, context.model, value);\n\t\t}\n\t\tcontext.model.trigger('change:' + context.property, context.model, value);\n\t\tcontext.model.trigger('change', context.model);\n\t});\n}\n\nfunction ensureSetByPathArguments(context, path) {\n\tvar errors = [];\n\tif (!_.isObject(context)) {\n\t\terrors.push(new Error('Context is not an object'));\n\t}\n\tif (!_.isString(path) || path === '') {\n\t\terrors.push(new Error('Path is not a string'));\n\t}\n\tif (errors.length) {\n\t\treturn errors;\n\t}\n}\n\nfunction setByPath(context, path, value, opts) {\n\n\tvar argumentsErrors = ensureSetByPathArguments(context, path);\n\tif (argumentsErrors) {\n\t\treturn value;\n\t}\n\n\tvar pathArray = path.split('.');\n\tvar options = normalizeSetByPathOptions(opts, { path: path, pathArray: [].slice.call(pathArray) });\n\n\tvar propertyName = pathArray.shift();\n\n\tvar result = setByPathArr(context, propertyName, pathArray, value, options);\n\tif (result === undefined) {\n\t\treturn value;\n\t} else {\n\t\ttriggerModelEventsOnSetByPath(value, options);\n\t\treturn result.value;\n\t}\n}\n\nfunction parseKey(raw) {\n\tvar chunks = raw.split('.');\n\tvar _key = chunks.shift();\n\tvar rest = chunks.join('.');\n\tchunks = _key.split('[');\n\tvar key = chunks.shift();\n\tvar index = chunks.length ? parseInt(chunks.shift().replace(/\\D/g, ''), 10) : false;\n\treturn {\n\t\traw: raw,\n\t\tkey: key,\n\t\trest: rest,\n\t\tproperty: rest.split('.').shift() || undefined,\n\t\tindex: index,\n\t\tnotIndexed: index === false\n\t};\n}\n\nfunction buildKeyPath(k) {\n\tvar path = [];\n\tk.key && path.push(k.key);\n\tpath.push(k.index);\n\tk.property && path.push(k.property);\n\tif (path.length != 3) return;\n\treturn path.join('.');\n}\n\nfunction build(text, opts) {\n\n\tvar params = paramsToObject(text, _.extend({}, opts, { asArray: true }));\n\n\tvar qs = {};\n\tvar allmeeted = {};\n\n\tfunction hasMeet(k) {\n\t\tvar path = buildKeyPath(k);\n\t\treturn path && allmeeted[path] == true;\n\t}\n\tfunction markAsMeeted(k) {\n\t\tvar path = buildKeyPath(k);\n\t\tpath && (allmeeted[path] = true);\n\t}\n\n\t_.each(params, function (_ref) {\n\t\tvar value = _ref.value,\n\t\t    key = _ref.key;\n\n\n\t\tvar okey = parseKey(key);\n\n\t\tvar stored = qs[okey.key];\n\n\t\tif (!stored) {\n\t\t\tif (!_.isNumber(okey.index)) {\n\t\t\t\tokey.index = 0;\n\t\t\t}\n\t\t\tif (okey.property) {\n\t\t\t\tvar hash = {};\n\t\t\t\tsetByPath(hash, okey.rest, value);\n\t\t\t\tvalue = hash;\n\t\t\t\tmarkAsMeeted(okey);\n\t\t\t}\n\t\t\tif (okey.index) {\n\t\t\t\tvar arr = [];\n\t\t\t\tarr[okey.index] = value;\n\t\t\t\tvalue = arr;\n\t\t\t}\n\t\t\tqs[okey.key] = value;\n\t\t} else {\n\t\t\tif (!_.isArray(stored)) {\n\t\t\t\tif (!_.isNumber(okey.index)) {\n\t\t\t\t\tokey.index = 0;\n\t\t\t\t}\n\t\t\t\tvar meeted = hasMeet(okey);\n\t\t\t\tif (okey.property) {\n\t\t\t\t\tif (!meeted) {\n\t\t\t\t\t\tvar _hash = !okey.index && _.isObject(stored) ? stored : {};\n\t\t\t\t\t\tsetByPath(_hash, okey.rest, value);\n\t\t\t\t\t\tmarkAsMeeted(okey);\n\t\t\t\t\t\tif (okey.index) {\n\t\t\t\t\t\t\tstored = [stored];\n\t\t\t\t\t\t\tstored[okey.index] = _hash;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstored = [stored];\n\t\t\t\t\t\tokey.index = stored.length;\n\t\t\t\t\t\tvar _hash2 = {};\n\t\t\t\t\t\tsetByPath(_hash2, okey.rest, value);\n\t\t\t\t\t\tmarkAsMeeted(okey);\n\t\t\t\t\t\tstored.push(_hash2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstored = [stored];\n\t\t\t\t\tvar index = okey.index || stored.length;\n\t\t\t\t\tstored[index] = value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (okey.property) {\n\t\t\t\t\tif (!_.isNumber(okey.index)) {\n\t\t\t\t\t\tokey.index = stored.length - 1;\n\t\t\t\t\t}\n\t\t\t\t\tvar _meeted = hasMeet(okey);\n\t\t\t\t\tif (!_meeted) {\n\t\t\t\t\t\tvar exists = stored[okey.index];\n\t\t\t\t\t\tvar _hash3 = exists || {};\n\t\t\t\t\t\tsetByPath(_hash3, okey.rest, value);\n\t\t\t\t\t\tif (!exists) {\n\t\t\t\t\t\t\tstored[okey.index] = _hash3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmarkAsMeeted(okey);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar _exists = !okey.notIndexed && stored[okey.index];\n\t\t\t\t\t\tvar _hash4 = _exists || {};\n\t\t\t\t\t\tsetByPath(_hash4, okey.rest, value);\n\t\t\t\t\t\tif (okey.notIndexed) okey.index = stored.length;\n\t\t\t\t\t\tmarkAsMeeted(okey);\n\t\t\t\t\t\tif (!_exists) stored[okey.index] = _hash4;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar _index = okey.index || stored.length;\n\t\t\t\t\tstored[_index] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tqs[okey.key] = stored;\n\t\t}\n\t});\n\treturn qs;\n}\n\nfunction paramsToObject$1(raw) {\n\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\tif (options.complex) {\n\t\treturn build(raw, _.omit(options, 'complex'));\n\t} else {\n\t\treturn paramsToObject(raw, options);\n\t}\n}\n\nfunction unFlat(obj) {\n\n\tif (obj == null || !_.isObject(obj)) return;\n\tvar res = {};\n\tfor (var e in obj) {\n\t\tsetByPath(res, e, obj[e]);\n\t}\n\treturn res;\n}\n\n/*\r\nfunction check(arg, opts) {\r\n\topts.ob += _.isObject(arg) && 1 || 0;\r\n\topts.ar += _.isArray(arg) && 1 || 0;\r\n\topts.fn += _.isFunction(arg) && 1 || 0;\r\n\topts.sum += (opts.ob + opts.ar + opts.fn);\r\n}\r\n\r\nfunction checkArguments(a,b)\r\n{\r\n\tlet chck = { ob:0, ar:0, fn: 0, sum:0  };\r\n\tcheck(a, chck);\r\n\tcheck(b, chck);\r\n\treturn [chck.sum, chck.ob, chck.fn, chck.ar];\r\n}\r\n\r\n*/\n\nfunction getType(arg) {\n\tif (_.isFunction(arg)) {\n\t\treturn 8;\n\t} else if (_.isArray(arg)) {\n\t\treturn 4;\n\t} else if (_.isObject(arg)) {\n\t\treturn 2;\n\t} else {\n\t\treturn 1;\n\t}\n}\nfunction sameType(a, b) {\n\tvar at = getType(a);\n\tvar bt = getType(b);\n\treturn at == bt && at != 8 ? at : false;\n}\nfunction compareObjects(objectA, objectB) {\n\n\tif (objectA == null && objectB == null) {\n\t\treturn objectA == objectB;\n\t}\n\n\tif (objectA === '' || objectB === '') {\n\t\treturn objectA === objectB;\n\t}\n\n\tif (objectA == objectB) {\n\t\treturn true;\n\t}\n\n\tvar type = sameType(objectA, objectB);\n\tif (!type) {\n\t\treturn false;\n\t} else if (type == 1) {\n\t\treturn objectA == objectB;\n\t}\n\n\tobjectA = flattenObject(objectA);\n\tobjectB = flattenObject(objectB);\n\n\tvar size = _.size(objectA);\n\tif (size != _.size(objectB)) {\n\t\treturn false;\n\t}\n\n\tif (_.isArray(objectA)) {\n\t\tvar allvalues = _.uniq(objectA.concat(objectB));\n\t\treturn _.every(allvalues, function (value) {\n\t\t\tvar valuesA = _.filter(objectA, function (_v) {\n\t\t\t\treturn compareObjects(_v, value);\n\t\t\t});\n\t\t\tvar valuesB = _.filter(objectB, function (_v) {\n\t\t\t\treturn compareObjects(_v, value);\n\t\t\t});\n\t\t\tif (valuesA.length != valuesB.length) return false;\n\t\t\treturn compareObjects(valuesA[0], valuesB[0]);\n\t\t});\n\t} else {\n\t\tvar allkeys = _.uniq(_.keys(objectA).concat(_.keys(objectB)));\n\t\tif (allkeys.length != size) return false;\n\t\treturn _.every(allkeys, function (key) {\n\t\t\treturn compareObjects(objectA[key], objectB[key]);\n\t\t});\n\t}\n}\n\nfunction triggerMethodOn(context) {\n\tif (!_.isObject(context)) {\n\t\treturn;\n\t}\n\n\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\targs[_key - 1] = arguments[_key];\n\t}\n\n\treturn triggerMethod.call.apply(triggerMethod, [context].concat(args));\n}\n\nfunction triggerMethod(event) {\n\tfor (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t\targs[_key2 - 1] = arguments[_key2];\n\t}\n\n\t// get the method name from the event name\n\tvar methodName = camelCase('on:' + event);\n\tvar method = getOption(this, methodName, { force: false });\n\tvar result = void 0;\n\n\t// call the onMethodName if it exists\n\tif (_.isFunction(method)) {\n\t\t// pass all args, except the event name\n\t\tresult = method.apply(this, args);\n\t}\n\n\tif (_.isFunction(this.trigger)) {\n\t\t// trigger the event\n\t\tthis.trigger.apply(this, arguments);\n\t}\n\n\treturn result;\n}\n\nfunction mergeOptions(options) {\n\tvar _this = this;\n\n\tfor (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\tkeys[_key - 1] = arguments[_key];\n\t}\n\n\tif (!_.isObject(options)) {\n\t\treturn;\n\t}\n\n\tkeys = _.flatten(keys);\n\n\treturn _.reduce(keys, function (merged, key) {\n\t\tif (!_.isString(key)) {\n\t\t\treturn merged;\n\t\t}\n\t\tvar option = options[key];\n\n\t\tif (option !== undefined) {\n\t\t\t_this[key] = option;\n\t\t\tmerged[key] = option;\n\t\t}\n\n\t\treturn merged;\n\t}, {});\n}\n\nfunction isCtor(instance, ctor, checkCtor) {\n\treturn _.isFunction(ctor) && isClass(instance, ctor) || _.isFunction(checkCtor) && checkCtor(instance) || isKnownCtor(instance);\n}\n\nfunction shouldInvoke(instance, ctor, checkCtor) {\n\treturn _.isFunction(instance) && !isCtor(instance, ctor, checkCtor);\n}\n\nfunction getByKey(context, key) {\n\tvar _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n\t    ctor = _ref.ctor,\n\t    checkCtor = _ref.checkCtor,\n\t    options = _ref.options,\n\t    defaultOptions = _ref.defaultOptions;\n\n\tif (!_.isString(key)) {\n\t\treturn;\n\t}\n\n\tvar instance = getOption(context, key, { force: false, args: [context] });\n\tif (instance == null) {\n\t\treturn;\n\t}\n\tif (shouldInvoke(instance, ctor, checkCtor)) {\n\t\tinstance = instance.call(context, context);\n\t}\n\n\tvar contextOptions = getOption(context, key + 'Options', { args: [context] });\n\tvar compiledOptions = _.extend({}, defaultOptions, contextOptions, options);\n\n\tif (_.isFunction(instance)) {\n\n\t\treturn {\n\t\t\tdefinition: instance,\n\t\t\toptions: compiledOptions\n\t\t};\n\t}\n\n\treturn { value: instance, options: compiledOptions };\n}\n\nfunction buildByKey(context, key) {\n\tvar getOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\tvar buildContext = getByKey(context, key, getOptions);\n\n\tif (!_.isObject(buildContext)) {\n\t\treturn;\n\t}\n\n\tvar buildText = getOptions.buildText,\n\t    ctor = getOptions.ctor,\n\t    checkCtor = getOptions.checkCtor,\n\t    knownCtor = getOptions.knownCtor,\n\t    toArguments = getOptions.toArguments;\n\tvar value = buildContext.value,\n\t    definition = buildContext.definition,\n\t    options = buildContext.options;\n\n\n\tif (!_.isFunction(toArguments)) toArguments = function toArguments(context, definition, options) {\n\t\treturn [options];\n\t};\n\n\tvar args = toArguments.call(context, context, definition, options);\n\n\tif (value != null) {\n\t\tif (!_.isObject(value)) {\n\t\t\tif (_.isFunction(buildText)) {\n\t\t\t\treturn buildText.apply(undefined, [value].concat(toConsumableArray(args)));\n\t\t\t}\n\t\t} else {\n\t\t\tif (isCtor(value.constructor, ctor, checkCtor, knownCtor)) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn new (Function.prototype.bind.apply(definition, [null].concat(toConsumableArray(args))))();\n\t}\n}\n\nfunction buildViewByKey(context, key) {\n\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t//{ TextView, defaultOptions, options } = {}){\n\t/*\r\n let getOptions = {\r\n \tdefaultOptions,\r\n \toptions,\r\n \tcheckCtor: (ctor) => isViewClass(ctor)\r\n };\r\n \n if (TextView != null && isViewClass(TextView)) {\r\n \tgetOptions.buildText = (text, opts) => new TextView(_.extend({}, opts, { text }));\r\n }\r\n */\n\tvar TextView = options.TextView;\n\n\n\tvar checkCtor = function checkCtor(ctor) {\n\t\treturn isViewClass(ctor);\n\t};\n\n\tvar buildText = TextView != null && isViewClass(TextView) ? function (text, opts) {\n\t\treturn new TextView(_.extend({}, opts, { text: text }));\n\t} : undefined;\n\n\tvar getOptions = _.extend({ checkCtor: checkCtor, buildText: buildText }, options);\n\n\treturn buildByKey(context, key, getOptions);\n}\n\nvar enumsStore = {};\n\nvar enumsApi = {\n\tgetFlag: getFlag,\n\thasFlag: hasFlag,\n\tgetByPath: getByPath,\n\tsetByPath: setByPath,\n\textendStore: function extendStore(hash) {\n\t\t_.extend(enumsStore, hash);\n\t},\n\tgetEnum: function getEnum(arg) {\n\t\tif (_.isObject(arg)) {\n\t\t\treturn arg;\n\t\t} else if (isEmptyValue(arg) || !_.isString(arg)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn enumsApi.getByPath(enumsStore, arg);\n\t}\n};\n\nfunction get$1(arg, flag, options) {\n\tif (arguments.length === 0) {\n\t\treturn enumsStore;\n\t}\n\n\tvar _enum = enumsApi.getEnum(arg);\n\tif (arguments.length === 1) {\n\t\treturn _enum;\n\t}\n\n\treturn enumsApi.getFlag(_enum, flag, options);\n}\n\nfunction has(arg, flag, options) {\n\tvar _enum = enumsApi.getEnum(arg);\n\treturn enumsApi.hasFlag(_enum, flag, options);\n}\n\nvar enums = {\n\tget: get$1,\n\thas: has,\n\tset: function set(name, hash) {\n\t\tif (_.isString(name)) {\n\t\t\tenumsApi.setByPath(enumsStore, name, hash);\n\t\t} else if (_.isObject(name)) {\n\t\t\tenumsApi.extendStore(name);\n\t\t}\n\t}\n};\n\nfunction skipTake(array, take) {\n\tvar skip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n\n\tif (!_.isObject(array)) {\n\t\treturn;\n\t}\n\n\tif (!_.isNumber(take) || !_.isNumber(skip)) {\n\t\tthrow new Error('skipTake skip and take arguments must be a numbers');\n\t}\n\n\tif (!_.isArray(array)) {\n\t\tarray = _.toArray(array);\n\t}\n\n\tvar length = take + skip;\n\tif (array.length < length) {\n\t\tlength = array.length;\n\t}\n\tvar taken = [];\n\tfor (var x = skip; x < length; x++) {\n\t\ttaken.push(array[x]);\n\t}\n\treturn taken;\n}\n\nvar config = {\n\tdestroySelfOnEmpty: false,\n\tdestroyOnEmpty: false,\n\treplaceElement: false\n};\n\nvar BaseNodeRegion = Region.extend({\n\tonEmpty: function onEmpty() {\n\t\tvar destroySelf = this.getOption('destroySelfOnEmpty') || this.getOption('destroyOnEmpty');\n\t\tvar destroyNode = this.getOption('destroyOnEmpty');\n\t\tif (destroySelf) {\n\t\t\tthis.destroy();\n\t\t}\n\t\tif (destroyNode) {\n\t\t\tthis.el.remove();\n\t\t}\n\t}\n});\n\nconfig.Region = BaseNodeRegion;\n\nfunction normalizeElement(selector) {\n\tvar body = document.querySelector('body');\n\tvar el = void 0;\n\tif (selector == null) {\n\t\tel = body;\n\t} else if (selector instanceof Element) {\n\t\tel = selector;\n\t} else if (selector && selector.jquery) {\n\t\tel = selector.get(0);\n\t} else if (_.isString(selector)) {\n\t\tel = document.querySelector(selector);\n\t}\n\tif (el instanceof Element) {\n\t\treturn el;\n\t} else {\n\t\tthrow new Error('el must be in Dom');\n\t}\n}\n\nvar renderInNode = function renderInNode(view, opts) {\n\tvar options = _.extend({}, config, opts);\n\tvar el = options.el,\n\t    replaceElement = options.replaceElement,\n\t    destroySelfOnEmpty = options.destroySelfOnEmpty,\n\t    destroyOnEmpty = options.destroyOnEmpty,\n\t    defer = options.defer;\n\n\n\tvar NodeRegion = config.Region;\n\tel = normalizeElement(el);\n\tvar body = document.querySelector('body');\n\tif (el === body) {\n\t\tel = document.createElement('div');\n\t\tbody.appendChild(el);\n\t\treplaceElement = true;\n\t}\n\tvar region = new NodeRegion({ el: el, replaceElement: replaceElement, destroySelfOnEmpty: destroySelfOnEmpty, destroyOnEmpty: destroyOnEmpty });\n\tif (defer) {\n\t\t_.defer(function () {\n\t\t\treturn region.show(view);\n\t\t});\n\t} else {\n\t\tregion.show(view);\n\t}\n\treturn region;\n};\n\nrenderInNode.config = config;\n\nfunction cloneObject(obj, options) {\n\tif (!options.refs) {\n\t\toptions.refs = [obj];\n\t} else {\n\t\tif (options.refs.indexOf(obj) > -1) {\n\t\t\treturn;\n\t\t} else {\n\t\t\toptions.refs.push(obj);\n\t\t}\n\t}\n\treturn _.reduce(obj, function (memo, value, key) {\n\t\tvar cloned = cloneValue(value, options);\n\t\tif (cloned !== undefined || obj[key] === undefined) {\n\t\t\tmemo[key] = cloned;\n\t\t}\n\t\treturn memo;\n\t}, {});\n}\n\nfunction cloneValue(value) {\n\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar functions = options.functions,\n\t    _options$deep = options.deep,\n\t    deep = _options$deep === undefined ? true : _options$deep;\n\n\tif (!deep) {\n\t\treturn _.clone(value);\n\t}\n\n\tif (_.isFunction(value)) {\n\t\treturn functions ? value : undefined;\n\t} else if (_.isDate(value)) {\n\t\treturn new Date(value.valueOf());\n\t} else if (_.isArray(value)) {\n\t\treturn _.clone(value);\n\t} else if (_.isObject(value)) {\n\t\treturn cloneObject(value, options);\n\t} else {\n\t\treturn _.clone(value);\n\t}\n}\n\nfunction norm(arg) {\n\treturn _.isObject(arg) ? arg : {};\n}\n\nfunction mergeObjects$$1() {\n\tfor (var _len = arguments.length, objects = Array(_len), _key = 0; _key < _len; _key++) {\n\t\tobjects[_key] = arguments[_key];\n\t}\n\n\tvar flatted = _.reduce(objects, function (dest, item) {\n\t\t_.extend(dest, flattenObject(norm(item)));\n\t\treturn dest;\n\t}, {});\n\n\treturn unFlat(flatted);\n}\n\nvar index$1 = {\n\tVERSION: version,\n\tbetterResult: betterResult,\n\tcamelCase: camelCase,\n\ttakeFirst: takeFirst,\n\tcomparator: comparator,\n\tcompareAB: compareAB,\n\tconvertString: convertString,\n\ttoNumber: toNumber,\n\textend: extend,\n\tflat: flattenObject,\n\tgetByPath: getByPath,\n\tgetOption: getOption,\n\tinstanceGetOption: instanceGetOption,\n\thasFlag: hasFlag, getFlag: getFlag,\n\tisKnownCtor: isKnownCtor,\n\tknownCtors: ctors,\n\tisEmptyValue: isEmptyValue,\n\tmix: mix,\n\tparamsToObject: paramsToObject$1,\n\tsetByPath: setByPath,\n\ttoBool: convertToBoolean,\n\tunflat: unFlat,\n\tcompareObjects: compareObjects,\n\tmergeObjects: mergeObjects$$1,\n\tclone: cloneValue,\n\ttriggerMethod: triggerMethod,\n\ttriggerMethodOn: triggerMethodOn,\n\tmergeOptions: mergeOptions,\n\tbuildByKey: buildByKey,\n\tbuildViewByKey: buildViewByKey,\n\tenums: enums, enumsStore: enumsStore,\n\tskipTake: skipTake,\n\trenderInNode: renderInNode,\n\tisClass: isClass, isModel: isModel, isModelClass: isModelClass, isCollection: isCollection, isCollectionClass: isCollectionClass, isView: isView, isViewClass: isViewClass\n};\n\nexport { version as VERSION, betterResult, camelCase, takeFirst, comparator, compareAB, convertString, toNumber, extend, flattenObject as flat, getByPath, getOption, instanceGetOption, hasFlag, getFlag, isKnownCtor, ctors as knownCtors, isEmptyValue, mix, paramsToObject$1 as paramsToObject, setByPath, convertToBoolean as toBool, unFlat as unflat, compareObjects, mergeObjects$$1 as mergeObjects, cloneValue as clone, triggerMethod, triggerMethodOn, mergeOptions, buildByKey, buildViewByKey, enums, enumsStore, skipTake, renderInNode, isClass, isModel, isModelClass, isCollection, isCollectionClass, isView, isViewClass };\nexport default index$1;\n\n//# sourceMappingURL=index.js.map\n","export default CollectionView => CollectionView.extend({\r\n\tshouldHandleEmptyFetch: true, \r\n\tconstructor(){\r\n\t\tCollectionView.apply(this, arguments);\r\n\r\n\t\tthis.getOption('shouldHandleEmptyFetch') && this.emptyView\r\n\t\t\t&& this._handleEmptyFetch();\r\n\t},\r\n\t_handleEmptyFetch(){\r\n\t\tif (!this.collection || this.collection.length) { return; }\r\n\r\n\t\tthis.listenToOnce(this.collection, 'sync', \r\n\t\t\t() => !this.collection.length && this._renderChildren()\r\n\t\t);\r\n\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\n\r\nexport default Base => Base.extend({\r\n\temptyView(){\r\n\t\treturn this._emptyViewSelector({\r\n\t\t\tfetching: this.isFetching(),\r\n\t\t\tfetched: this.isFetched(),\r\n\t\t});\r\n\t},\r\n\tisFetching(){\r\n\t\treturn this.collection && _.isFunction(this.collection.isFetching) && this.collection.isFetching();\r\n\t},\r\n\tisFetched(){\r\n\t\treturn this.collection && _.isFunction(this.collection.isFetched) && this.collection.isFetched();\r\n\t},\r\n\t_emptyViewSelector({ fetching, fetched }={}){\r\n\t\tlet wait = this.getOption('waitView');\r\n\t\tlet nodata = this.getOption('noDataView');\r\n\t\tif (fetching && !fetched){\r\n\t\t\treturn wait || nodata;\r\n\t\t} else {\r\n\t\t\treturn nodata;\r\n\t\t}\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\nfunction rebuildIndexes() {\r\n\tif (!this.getOption('shouldRebuildIndexes') || !this.collection) {\r\n\t\treturn;\r\n\t}\r\n\tlet models = this.collection.models;\r\n\tfor (let index = 0, length = models.length; index < length; index++) {\r\n\t\tlet model = models[index];\r\n\t\tlet view = this._children.findByModel(model);\r\n\t\tview && (view._index = index);\r\n\t}\r\n}\r\n\r\nexport default CollectionView => CollectionView.extend({\r\n\tshouldRebuildIndexes: true,\r\n\r\n\tconstructor() {\t\t\r\n\t\t\r\n\t\tCollectionView.apply(this, arguments);\r\n\t\tthis.on('before:sort', rebuildIndexes.bind(this));\r\n\t},\r\n\t_addChild(view, index){\r\n\t\tview._isModelView = arguments.length === 1;\r\n\t\tif(_.isObject(index)) {\r\n\t\t\tindex = index.index;\r\n\t\t}\r\n\t\tif (index != null) {\r\n\t\t\tview._index = index;\r\n\t\t}\r\n\t\treturn CollectionView.prototype._addChild.apply(this, arguments);\r\n\t},\r\n\t_viewComparator(v1,v2){\r\n\t\tlet res = v1._index - v2._index;\r\n\t\tif (res) return res;\r\n\t\tif (v1._isModelView) return 1;\r\n\t\treturn -1;\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\nexport default CollectionView => CollectionView.extend({\r\n\t_renderChildren() {\r\n\t\t// If there are unrendered views prevent add to end perf\r\n\t\tif (this._hasUnrenderedViews) {\r\n\t\t\tdelete this._addedViews;\r\n\t\t\tdelete this._hasUnrenderedViews;\r\n\t\t}\r\n\r\n\t\tconst views = this._addedViews || this.children._views;\r\n\r\n\t\tthis.triggerMethod('before:render:children', this, views);\r\n\t\r\n\t\tthis._showEmptyView();\r\n\t\r\n\t\tconst els = this._getBuffer(views);\r\n\t\r\n\t\tthis._attachChildren(els, views);\r\n\t\r\n\t\tdelete this._addedViews;\r\n\t\r\n\t\tthis.triggerMethod('render:children', this, views);\r\n\t},\r\n\taddChildView(view, index, options = {}) {\r\n\t\tif (!view || view._isDestroyed) {\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tif (_.isObject(index)) {\r\n\t\t\toptions = index;\r\n\t\t}\r\n\r\n\t\t// If options has defined index we should use it\r\n\t\tif (options.index != null) {\r\n\t\t\tindex = options.index;\r\n\t\t}\r\n\r\n\t\tif (!this._isRendered && !options.preventRender) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tthis._addChild(view, index);\r\n\r\n\t\tif (options.preventRender) {\r\n\t\t\tthis._hasUnrenderedViews = true;\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tconst hasIndex = (typeof index !== 'undefined');\r\n\t\tconst isAddedToEnd = !hasIndex || index >= this._children.length;\r\n\r\n\t\t// Only cache views if added to the end and there is no unrendered views\r\n\t\tif (isAddedToEnd && !this._hasUnrenderedViews) {\r\n\t\t\tthis._addedViews = [view];\r\n\t\t}\r\n\t\t\r\n\t\tif (hasIndex) {\r\n\t\t\tthis._renderChildren();\r\n\t\t} else {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\r\n\t\treturn view;\r\n\t},\r\n\t_showEmptyView() {\r\n\r\n\t\tthis._destroyEmptyView();\r\n\t\r\n\t\tif(!this.isEmpty()) { return; }\r\n\r\n\t\tconst EmptyView = this._getEmptyView();\t\r\n\t\tif (!EmptyView) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tconst options = this._getEmptyViewOptions();\r\n\t\tthis._emptyViewInstance = new EmptyView(options);\r\n\t\r\n\t\tthis.addChildView(this._emptyViewInstance, { preventRender: true, index: 0, });\r\n\t\r\n\t},\r\n\t_destroyEmptyView(){\r\n\t\tlet view = this._emptyViewInstance;\r\n\t\tif (!view) return;\r\n\t\r\n\t\tthis._removeChildView(view);\r\n\t\r\n\t\tthis._removeChild(view);\r\n\t\r\n\t\tview.destroy();\r\n\t\tdelete this._emptyViewInstance;\r\n\t},\r\n}, { CollectionViewMixin_4x: true});\r\n","import _ from 'underscore';\r\nimport { isView, isViewClass } from 'bbmn-core';\r\nimport { betterResult } from 'bbmn-utils';\r\n\r\nexport default Base => Base.extend({\r\n\t\r\n\trenderAllCustoms: false,\r\n\tshouldMergeCustoms: false,\r\n\trenderCollection: true,\r\n\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tif (this.getOption('renderCollection') === false && this.collection) {\r\n\t\t\tthis._collection = this.collection;\r\n\t\t\tdelete this.collection;\r\n\t\t}\r\n\t\tthis._initializeCustoms();\r\n\t},\r\n\t_getCustomsArray(){\r\n\t\tif (!this._customs)\r\n\t\t\tthis._customs = [];\r\n\t\treturn this._customs;\r\n\t},\r\n\tgetCollection(){\r\n\t\treturn this.collection || this._collection;\r\n\t},\r\n\tclearCustoms(){\r\n\t\tlet arr = this._getCustomsArray();\r\n\t\tarr.length = 0;\r\n\t},\r\n\taddCustom(...args){\r\n\t\tlet arr = this._getCustomsArray();\r\n\t\tarr.push(...args);\r\n\t},\r\n\tunshiftCustom(...args){\r\n\t\tlet arr = this._getCustomsArray();\r\n\t\tarr.unshift(...args);\r\n\t},\r\n\t_initializeCustoms(){\r\n\r\n\t\tlet optionsCustoms = betterResult(this.options, 'customs', { args: [this], context: this });\r\n\t\tlet instanceCustoms = betterResult(this, 'customs', { args: [this] });\r\n\t\tlet shouldMergeCustoms = this.getOption('shouldMergeCustoms');\r\n\t\tlet add;\r\n\t\tif (shouldMergeCustoms) {\r\n\t\t\tadd = (instanceCustoms || []).concat(optionsCustoms || []);\t\t\t\r\n\t\t} else {\r\n\t\t\tadd = instanceCustoms || optionsCustoms || [];\r\n\t\t}\r\n\r\n\t\tthis.addCustom(...add);\r\n\r\n\t\tif (this.getOption('renderAllCustoms')) {\r\n\t\t\tthis.on('render', this._renderCustoms);\r\n\t\t}\r\n\t},\r\n\trenderCustoms(){\r\n\t\tthis.triggerMethod('before:customs:render');\r\n\r\n\t\t_.each(this._renderedCustoms, view => view.destroy());\r\n\t\tlet registered = this._getCustoms();\r\n\t\tlet rawcustoms = this.getCustoms(registered);\r\n\t\tlet customs = this._prepareCustoms(rawcustoms);\r\n\r\n\t\tthis._renderedCustoms = this.addChildViews(customs);\r\n\r\n\t\tthis.triggerMethod('customs:render');\r\n\t},\r\n\t_renderCustoms(){\r\n\t\tif (!this.getOption('renderAllCustoms')) return;\r\n\t\tthis.renderCustoms();\r\n\t},\r\n\t_getCustoms() {\r\n\t\tlet arr = this._getCustomsArray();\r\n\t\treturn _.clone(arr);\r\n\t},\r\n\tgetCustoms(customs) {\t\t\r\n\t\treturn customs;\r\n\t},\r\n\t_prepareCustoms(rawcustoms){\r\n\t\treturn _.reduce(rawcustoms, (array, item) => {\r\n\t\t\tlet args = this._prepareCustom(item);\r\n\t\t\targs && (args = this.buildCustom(...args));\r\n\t\t\targs && array.push(args);\r\n\t\t\treturn array;\r\n\t\t},[]);\r\n\t},\r\n\t_prepareCustom(arg){\r\n\t\tif (_.isArray(arg)) {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\t\tif (isView(arg) || isViewClass(arg)) {\r\n\t\t\treturn [arg, { index: 0 }];\r\n\t\t}\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\treturn this._prepareCustom(arg.call(this, this));\r\n\t\t}\r\n\t\treturn [arg, { index: 0 }];\r\n\t\t// if (_.isArray(arg)) {\r\n\t\t// \treturn arg;\r\n\t\t// } else {\r\n\t\t// \treturn [arg, { index: 0 }];\r\n\t\t// }\r\n\t},\r\n\tbuildCustom(view, options = {}){ \r\n\t\tlet childOptions = this.getOption('customViewOptions', { args: [ this ]});\r\n\t\tif (isViewClass(view)) {\r\n\t\t\tview = new view(childOptions);\r\n\t\t} else if (_.isFunction(view)) {\r\n\t\t\tview = view.call(this, this, childOptions);\r\n\t\t} else if(!isView(view) && _.isObject(view) && 'view' in view) {\r\n\t\t\tif(isView(view.view)) {\r\n\t\t\t\tif(_.isObject(view.options))\r\n\t\t\t\t\toptions = view.options;\r\n\t\t\t\tview = view.view;\r\n\t\t\t} else if(isViewClass(view.view)) {\r\n\t\t\t\tlet options = betterResult(view, 'options', { context: this, args: [this, childOptions]});\r\n\t\t\t\tlet viewOptions = _.extend({}, childOptions, options);\r\n\t\t\t\tview = new view.view(viewOptions);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isView(view)) {\r\n\t\t\tthis._setupCustom(view);\r\n\t\t\treturn [view, options]; \r\n\t\t}\r\n\t},\r\n\t_setupCustom(view){\r\n\t\treturn this.setupCustom(view);\r\n\t},\r\n\tsetupCustom: view => view,\r\n\taddChildViews(children = []){\r\n\t\tif (!children.length) { return; }\r\n\r\n\t\tlet awaitingRender = false;\r\n\t\tlet rendered = [];\r\n\t\twhile(children.length) {\r\n\r\n\t\t\tlet args = children.pop();\r\n\t\t\tif (!args) { continue; }\r\n\r\n\t\t\tif (!_.isArray(args)) {\r\n\t\t\t\targs = [args, { index: 0 }];\r\n\t\t\t}\r\n\r\n\t\t\tlet [ view, index, options = {} ] = args;\r\n\t\t\tif (_.isObject(index)) {\r\n\t\t\t\toptions = index;\r\n\t\t\t\tindex = undefined;\r\n\t\t\t}\r\n\t\t\tif (index != null && !('index' in options)) {\r\n\t\t\t\toptions.index = index;\r\n\t\t\t}\r\n\t\t\toptions.preventRender = !!children.length;\r\n\t\t\tif (!isView(view)) { continue; }\r\n\r\n\t\t\tthis.addChildView(view, options);\r\n\t\t\trendered.push(view);\r\n\t\t\tawaitingRender = options.preventRender;\r\n\t\t}\r\n\t\tif (awaitingRender) {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\treturn rendered;\r\n\t},\r\n}, { CustomsMixin: true });\r\n","export default Base => Base.extend({\r\n\tfetchNextEdge: 'bottom',\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tlet scrollEdge = this.getOption('fetchNextEdge');\r\n\t\tif (scrollEdge) {\r\n\t\t\tlet event = scrollEdge + ':edge';\r\n\t\t\tthis.addScrollEvents({\r\n\t\t\t\t[event](){\r\n\t\t\t\t\tthis.fetchNext({ onlyIfNotFetching: true }).then(() => {\r\n\t\t\t\t\t\tthis.clearScrollEdges();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t\tlet collection = this.getCollection();\r\n\t\t\tif(collection){\r\n\t\t\t\tthis.listenTo(collection,'query:change',() => {\r\n\t\t\t\t\tthis.scrollToStart();\r\n\t\t\t\t\tthis.clearScrollEdges();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfetchNext({ onlyIfNotFetching }={}){\r\n\t\tlet collection = this.getCollection();\r\n\t\tif(!collection) return Promise.resolve();\r\n\t\tif (onlyIfNotFetching && collection.isFetching()) return Promise.resolve(collection);\r\n\t\treturn collection.fetchNext ? collection.fetchNext() : collection.fetch();\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\t\r\n\t\tthis.on({\r\n\t\t\trequest(){\r\n\t\t\t\tthis._isFetching = true;\r\n\t\t\t},\r\n\t\t\tsync(){\r\n\t\t\t\tthis._isFetching = false;\r\n\t\t\t\tthis._isFetched = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tBase.apply(this, arguments);\r\n\t},\r\n\tisFetching(){\r\n\t\treturn this._isFetching === true;\r\n\t},\r\n\tisFetched(){\r\n\t\treturn this._isFetched === true;\r\n\t},\r\n\tconcurrentFetch: 'first',\r\n\tfetch({ concurrent } = {}) {\r\n\t\tif (concurrent == null) {\r\n\t\t\tconcurrent = this.concurrentFetch;\r\n\t\t}\r\n\r\n\t\tif (concurrent === 'first') {\r\n\t\t\tif (this._fetchingPromise) {\r\n\t\t\t\treturn this._fetchingPromise;\r\n\t\t\t} else {\r\n\t\t\t\tlet promise = this._fetchingPromise = Base.prototype.fetch.apply(this, arguments);\r\n\t\t\t\tpromise.then(() => {\r\n\t\t\t\t\tdelete this._fetchingPromise;\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tdelete this._fetchingPromise;\r\n\t\t\t\t});\r\n\t\t\t\treturn promise;\t\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet promise = this._fetchingPromise = Base.prototype.fetch.apply(this, arguments);\r\n\t\t\treturn promise;\r\n\t\t}\r\n\t},\r\n\tfetchIfNot(opts){\r\n\t\tif(this.isFetched()){\r\n\t\t\treturn Promise.resolve();\r\n\t\t} else {\r\n\t\t\treturn this.fetch(_.extend({ concurrent: 'first', opts }));\r\n\t\t}\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\nimport { isKnownCtor, mergeOptions, getOption } from 'bbmn-utils';\r\n\r\nexport default Base => Base.extend({\r\n\r\n\tconstructor(opts){\r\n\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeChildrenable(opts);\r\n\r\n\t},\r\n\r\n\t_initializeChildrenable(opts){\r\n\t\tmergeOptions.call(this, opts, ['parent', 'root']);\r\n\t\tif (this.parent == null && this.root == null) \r\n\t\t\tthis.root = this;\r\n\t},\r\n\r\n\t//call this method manualy for initialize children\r\n\tinitializeChildren(){\r\n\t\tif (this._childrenInitialized) return;\r\n\r\n\t\tlet children = getOption(this, 'children');\r\n\t\tthis._children = [];\r\n\t\t_(children).each(child => this._initializeChild(child));\r\n\r\n\t\tthis._childrenInitialized = true;\r\n\r\n\t},\r\n\r\n\t_initializeChild(arg){\r\n\t\tlet Child;\r\n\t\tlet options = {};\r\n\r\n\t\tif (isKnownCtor(arg))\r\n\t\t\tChild = arg;\r\n\t\telse if(_.isFunction(arg)){\r\n\t\t\t\r\n\t\t\tlet invoked = arg.call(this, this);\r\n\t\t\treturn this._initializeChild(invoked);\r\n\r\n\t\t} else if (_.isObject(arg)) {\r\n\t\t\tChild = arg.Child;\r\n\t\t\t_.extend(options, _.omit(arg, 'Child'));\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t_.extend(options, getOption(this, 'childOptions'), { parent: this });\r\n\t\toptions = this.buildChildOptions(options);\r\n\t\t\r\n\t\tlet child = this.buildChild(Child, options);\r\n\t\tthis._children.push(child);\r\n\r\n\t},\r\n\r\n\tbuildChildOptions(options){\r\n\t\treturn options;\r\n\t},\r\n\tbuildChild(Child, options){\r\n\t\t!Child && (Child = getOption(this, 'defaultChildClass') || this.prototype.constructor);\r\n\t\treturn new Child(options);\r\n\t},\r\n\t_getChildren(items, opts = {}){\r\n\t\tlet { exclude, filter, map } = opts;\r\n\r\n\t\tif(exclude != null && !_.isArray(exclude))\r\n\t\t\topts.exclude = [exclude];\r\n\r\n\t\tif(!_.isFunction(filter))\r\n\t\t\tdelete opts.filter;\r\n\r\n\t\tlet result = [];\r\n\t\tlet force = opts.force;\r\n\t\t_(items).each((item, index) => {\r\n\r\n\t\t\tif(!force && !this._childFilter(item, index, opts))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(_.isFunction(map))\r\n\t\t\t\titem = map(item);\r\n\r\n\t\t\titem && result.push(item);\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\t_childFilter(item, index, opts = {}){\r\n\t\t\r\n\t\tif(opts.force) return item;\r\n\r\n\t\tlet { exclude, filter } = opts;\r\n\r\n\t\tif(_.isFunction(this.childFilter) && !this.childFilter(item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isArray(exclude) && exclude.indexOf(item) >= 0)\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isFunction(filter) && !filter.call(this, item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\treturn item;\r\n\t},\r\n\tchildFilter: false,\r\n\tgetChildren(opts = {}){\r\n\t\tlet children = [].slice.call(this._children || []);\r\n\t\topts.reverse && children.length > 1 && children.reverse();\t\t\r\n\t\treturn this._getChildren(children, opts);\r\n\t},\r\n\tgetAllChildren(opts = {}){\r\n\r\n\t\tlet { includeSelf, map, reverse } = opts;\r\n\t\tlet options = _.omit(opts, 'includeSelf', 'map');\r\n\r\n\r\n\t\tlet children = this.getChildren(options);\r\n\t\tlet result = _(children).chain()\r\n\t\t\t.map(child => {\r\n\t\t\t\tlet children = child.getAllChildren(options);\r\n\t\t\t\treturn reverse ? [children, child] : [child, children];\r\n\t\t\t})\r\n\t\t\t.flatten()\r\n\t\t\t.value();\r\n\r\n\t\tif (includeSelf) {\r\n\t\t\tlet method = reverse ? 'push' : 'unshift';\r\n\t\t\tresult[method](this);\r\n\t\t}\r\n\t\t\r\n\t\tif (_.isFunction(map)) {\r\n\t\t\treturn _(result).chain().map(map).filter(f => !!f).value();\r\n\t\t} else {\t\t\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetParent(){\r\n\t\treturn this.parent;\r\n\t}\r\n\r\n\r\n\r\n}, { ChildrenableMixin: true });\r\n","import { betterResult, isCollection, isModel, isModelClass, isCollectionClass, clone } from 'bbmn-utils';\r\nimport { Model, Collection } from 'bbmn-core';\r\nimport _ from 'underscore';\r\nexport default Base => Base.extend({\r\n\t\r\n\t// usage:\r\n\t// model.entity('users');\r\n\tentity(key, options){\r\n\t\treturn this._getNestedEntity(key, options);\r\n\t},\r\n\r\n\t// override this if you need to do something with just created entity\r\n\t// by default here is settled change handlers\r\n\tsetupNestedEntity(context){\r\n\t\tif (!context.entity) return;\r\n\t\tthis._setNestedEntityHandlers(context);\r\n\t\tthis._setNestedEntityParent(context.entity, context.parentKey);\r\n\t},\r\n\r\n\t_getNestedEntity(key, options){\r\n\t\t//get sure there is a nestedEntities store initialized;\r\n\t\tthis._initEntitiesStore();\r\n\t\t// compiling passed `nestedEntities` contexts, occurs only at first call\r\n\t\tthis._initOwnEntities();\r\n\t\t\r\n\t\tlet context = this._nestedEntities[key];\r\n\t\tif (!context) { return; }\r\n\t\tif (!context.entity && !context._compiled) {\r\n\t\t\tcontext.entity = this._buildNestedEntity(context, options);\r\n\t\t\tif (context.entity) {\r\n\t\t\t\tthis.setupNestedEntity(context);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn context.entity;\r\n\t},\r\n\t_buildNestedEntity(context, options){\r\n\t\tlet data = this.get(context.name);\r\n\t\tif (_.isFunction(context.build)) {\r\n\t\t\tcontext.entity = context.build.call(this, data, context, this);\r\n\t\t} else {\r\n\t\t\tdata = data || context.data;\r\n\t\t\tlet args = context.args;\r\n\t\t\tif (!args) {\r\n\t\t\t\targs = [data];\r\n\t\t\t\tif (context.parse) {\r\n\t\t\t\t\tif(!options) options = {};\r\n\t\t\t\t\tif(!('parse' in options)){\r\n\t\t\t\t\t\toptions.parse = context.parse;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(options || context.options) {\r\n\t\t\t\t\targs.push(_.extend({}, context.options, options));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontext.entity = new context.class(...args);\r\n\t\t}\r\n\t\tcontext._compiled;\r\n\t\treturn context.entity;\r\n\t},\r\n\t_initOwnEntities(){\r\n\t\tif (this._nestedEntitiesInitialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet compiled = betterResult(this, 'nestedEntities', { args: [ this ] });\r\n\t\tlet memo = this._nestedEntities;\r\n\t\t_.each(compiled, (context, key) => {\r\n\t\t\t// handle the case where its a runtime function or class definition\r\n\t\t\tcontext = betterResult({ context }, 'context', { args: [key] });\r\n\t\t\tif (isModelClass(context) || isCollectionClass(context) ) {\r\n\t\t\t\tcontext = {\r\n\t\t\t\t\tclass: context,\r\n\t\t\t\t};\r\n\t\t\t} \r\n\t\t\t// when its just a property name, trying to determine type of data and use default class\r\n\t\t\telse if (_.isString(context)) {\r\n\t\t\t\tcontext = {\r\n\t\t\t\t\tname: context\r\n\t\t\t\t};\r\n\t\t\t} else if (!_.isObject(context)) {\r\n\t\t\t\tcontext = {};\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tlet name = context.name || (_.isString(key) && key || undefined);\r\n\t\t\t\r\n\t\t\tif (!_.isString(name)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!context.name) {\r\n\t\t\t\tcontext.name = name;\r\n\t\t\t}\r\n\r\n\t\t\tif(!context.class) {\r\n\t\t\t\tlet data = this.get(context.name);\r\n\t\t\t\tif (_.isArray(data)) {\r\n\t\t\t\t\tcontext.class = this.NestedCollectionClass || Collection;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.class = this.NestedModelClass || Model;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tmemo[name] = clone(context, { functions: true });\r\n\r\n\t\t});\r\n\r\n\t\tthis._nestedEntitiesInitialized = true;\r\n\t},\r\n\t_initEntitiesStore(){\r\n\t\tif(!_.has(this, '_nestedEntities')){\r\n\t\t\tthis._nestedEntities = {};\r\n\t\t}\r\n\t},\t\r\n\t_setNestedEntityHandlers(context){\r\n\t\tlet { name, entity } = context;\r\n\t\tlet entityChangeEvents = 'change';\r\n\r\n\t\tif (isCollection(entity)) {\r\n\t\t\tentityChangeEvents += ' update reset';\r\n\t\t}\r\n\r\n\t\t// if entity get changed outside we should keep in sync this model property value\r\n\t\tif(!context.onEntityChange){\r\n\t\t\tcontext.onEntityChange = (instance, { changeInitiator } = {}) => {\r\n\t\t\t\t\r\n\t\t\t\tif (changeInitiator == this) return;\r\n\r\n\t\t\t\tchangeInitiator == null && (changeInitiator = entity);\r\n\r\n\t\t\t\tlet json = entity.toJSON();\t\t\t\t\r\n\t\t\t\tif (context.saveOnChange && !this.isNew()) {\r\n\t\t\t\t\tthis.save(name, json, { changeInitiator });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set(name, json, { changeInitiator });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis.listenTo(entity, entityChangeEvents, context.onEntityChange);\r\n\r\n\t\t// if this model property get changed outside we should keep in sync our nested entity\r\n\t\tif(!context.onPropertyChange) {\r\n\t\t\tcontext.onPropertyChange = (instance, _newvalue, { changeInitiator }) => {\r\n\t\t\t\tif (changeInitiator == this) return;\r\n\t\t\t\tchangeInitiator == null && (changeInitiator = this);\r\n\t\t\t\tlet val = this.get(name) || {};\r\n\t\t\t\tif (isModel(entity) && changeInitiator != entity) {\r\n\t\t\t\t\tlet unset = _.reduce(entity.attributes, (memo, _val, key) => {\r\n\t\t\t\t\t\tif(key in val) return memo;\r\n\t\t\t\t\t\tmemo[key] = undefined;\r\n\t\t\t\t\t\treturn memo;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t\tentity.set(_.extend({}, val, unset), { changeInitiator });\r\n\t\t\t\t\tentity.set(unset, { unset: true, silent: true });\r\n\r\n\t\t\t\t} else if( isCollection(entity) && changeInitiator != entity) {\r\n\r\n\t\t\t\t\tentity.set(val, { changeInitiator });\r\n\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis.on('change:' + name, context.onPropertyChange);\r\n\t},\r\n\t_setNestedEntityParent(entity, parentKey){\r\n\t\tparentKey || (parentKey = 'parent');\r\n\t\tentity[parentKey] = this;\r\n\t},\r\n\t_unsetNestedEntityParent(entity, parentKey){\r\n\t\tparentKey || (parentKey = 'parent');\r\n\t\tdelete entity[parentKey];\r\n\t},\r\n\tdestroy(){\r\n\t\tthis.dispose({ destroying: true });\r\n\t\tlet destroy = Base.prototype.destroy;\r\n\t\treturn destroy && destroy.apply(this, arguments);\r\n\t},\r\n\tdispose(opts){\r\n\t\tthis._disposeEntities(opts);\r\n\t\tlet dispose = Base.prototype.dispose;\t\t\r\n\t\treturn dispose && dispose.apply(this, arguments);\r\n\t},\r\n\t_disposeEntities(opts){\r\n\t\t_.each(this._nestedEntities, context => this._disposeEntity(context, opts));\r\n\t\tdelete this._nestedEntities;\r\n\t},\r\n\t_disposeEntity({ entity, name, onEntityChange, onPropertyChange, parentKey } = {}, { destroying } = {}){\r\n\t\tthis.stopListening(entity, null, onEntityChange);\r\n\t\tthis.off('change:'+ name, onPropertyChange);\r\n\t\tthis._unsetNestedEntityParent(entity, parentKey);\r\n\t\tlet method = destroying ? 'destroy' : 'dispose';\r\n\t\tentity[method] && entity[method]();\r\n\t},\r\n});\r\n","import _ from 'underscore';\r\nimport { betterResult as result, getOption, mergeOptions } from 'bbmn-utils';\r\n\r\n// previous version, deprecated\r\nconst Mixin = Base => Base.extend({\r\n\r\n\t//property first approach\r\n\tgetProperty(key, opts){\r\n\t\t\r\n\t\tlet defaultGetArguments = result(this, '_getPropertyArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts, {\r\n\t\t\tcontext: this,\r\n\t\t});\r\n\t\tlet { deep } = options;\r\n\r\n\t\tlet value = result(this, key, options);\r\n\t\tif (value == null && deep !== false) {\r\n\t\t\tvalue = result(this.options, key, options);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//options first approach\r\n\tgetOption(key, opts){\r\n\t\tlet defaultGetArguments = result(this, '_getOptionArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts);\r\n\r\n\t\treturn getOption(this, key, options);\r\n\t},\r\n\r\n\tmergeOptions(values = {}, keys = [], opts = {}){\r\n\t\t\r\n\t\tif(_.isString(keys))\r\n\t\t\tkeys = keys.split(/\\s*,\\s*/);\r\n\r\n\t\t_.each(keys, (key) => {\r\n\t\t\tconst option = result(values, key, _.extend({ force: false }, opts));\r\n\t\t\tif (option !== undefined) {\r\n\t\t\t\tthis[key] = option;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n}, {\r\n\tGetOptionMixin:true\r\n});\r\n\r\nMixin.defaults = {\r\n\tdeep: true,\r\n\tforce: true\r\n};\r\n\r\n//export default Mixin;\r\n\r\nexport default Base => Base.extend({\r\n\tgetOption(){\r\n\t\treturn getOption(this, ...arguments);\r\n\t},\r\n\thasOption(key){\r\n\t\tlet opts = this.options || {};\r\n\t\treturn (opts[key] != null) || (this[key] != null);\r\n\t},\r\n\tmergeOptions\r\n});\r\n","\r\nimport { isModelClass, isCollectionClass, getByPath, betterResult } from 'bbmn-utils';\r\n\r\nfunction urlError() {\r\n\tthrow new Error('A \"url\" property or function must be specified');\r\n}\r\n\r\nfunction mixinError(){\r\n\tthrow new Error('This mixin can be applied only on Model or Collection');\r\n}\r\n\r\nfunction getUrlPattern(options){\r\n\tlet path = betterResult(this, 'urlPattern', { args: [this], default:'' });\r\n\treturn path.replace(/\\{([^}]+)\\}/g, (match, group) => {\r\n\t\tlet value = getByPath(this, group, options);\r\n\t\treturn value;\r\n\t});\r\n}\r\n\r\nconst ModelMixin = Base => Base.extend({\r\n\tgetUrlPattern,\r\n\tgetBaseUrl(){\r\n\t\tlet base =\r\n        betterResult(this, 'urlRoot', { args:[this]}) ||\r\n\t\tbetterResult(this.collection, 'url', { args:[this]}) ||\r\n\t\tthis.getUrlPattern({ includeModelProperty: true });\r\n\t\treturn base;\r\n\t},\r\n\turl(){\r\n\t\tlet base = this.getBaseUrl();\r\n\t\tif (!base) {\r\n\t\t\turlError();\r\n\t\t}\r\n\t\tif (this.isNew()) return base;\r\n\t\tvar id = this.get(this.idAttribute);\r\n\t\treturn base.replace(/[^/]$/, '$&/') + encodeURIComponent(id);  \r\n\t}\r\n});\r\n\r\n\r\nconst CollectionMixin = Base => Base.extend({\r\n\turl(){\r\n\t\tif (this.urlPattern) {\t\t\t\r\n\t\t\treturn this.getUrlPattern();\r\n\t\t}\r\n\t},\r\n\tgetUrlPattern\r\n});\r\n\r\n\r\nexport default Base => {\r\n\r\n\tconst mixin = isModelClass(Base) ? ModelMixin(Base)\r\n\t\t: isCollectionClass(Base) ? CollectionMixin(Base)\r\n\t\t\t: mixinError();\r\n\r\n\treturn mixin;\r\n\t\r\n};\r\n","import _ from 'underscore';\r\nexport default Base => Base.extend({\r\n\t/*\r\n\t\r\n\trenderOnModelChange: false,\r\n\trefreshOnModelChange: false,\r\n\ttriggerRefreshOnModelChange: false,\r\n\tinvokeOnModelChange: true,\t\r\n\r\n\t*/\r\n\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initRenderOnModelChange();\r\n\t},\r\n\t_initRenderOnModelChange(){\r\n\t\tif (!this.model) return;\r\n\r\n\t\tlet shouldRender = this.getOption('renderOnModelChange', { args: [this]});\r\n\t\tlet shouldRefresh = this.getOption('refreshOnModelChange', { args: [this]});\r\n\t\tlet shouldTriggerRefresh = this.getOption('triggerRefreshOnModelChange', { args: [this]});\r\n\t\tlet shouldInvoke = this.getOption('invokeOnModelChange', { args: [this]});\r\n\r\n\t\tthis.listenTo(this.model, 'before:destroy', () => this.stopListening(this.model));\r\n\t\tthis.listenTo(this.model, 'change', () => {\r\n\r\n\t\t\tif (shouldRefresh && _.isFunction(this.refresh)) {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldTriggerRefresh) {\r\n\t\t\t\tthis.trigger('refresh');\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldInvoke && _.isFunction(this.onModelChange)) {\r\n\t\t\t\tthis.onModelChange();\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldRender) {\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t}\r\n});\r\n","//import getOptionMixin from './get-option/index.js';\r\nimport improvedFetchMixin from './improved-fetch/index.js';\r\nimport childrenableMixin from './childrenable/index.js';\r\nimport nestedEntitiesMixin from './nested-entities';\r\nimport optionsMixin from './options';\r\nimport urlPatternMixin from './url-pattern';\r\n\r\nexport { default as renderOnModelChangeMixin } from './render-on-model-change';\r\n\r\nexport {\r\n\toptionsMixin, improvedFetchMixin, childrenableMixin, nestedEntitiesMixin, urlPatternMixin\r\n};\r\n","import _ from 'underscore';\r\nexport default function getNestedResult(value, context, schema) {\r\n\treturn value != null \r\n\t\t&& _.isFunction(schema.nested) \r\n\t\t&& schema.nested(value, context);\r\n}\r\n","import _ from 'underscore';\r\nexport default function getPropertySchema(model, key)\r\n{\r\n\tif (_.isFunction(model.getPropertySchema)) {\r\n\t\treturn model.getPropertySchema(key);\r\n\t} else {\r\n\t\treturn {};\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nexport default function getDisplayConfig(key, model, schema){\r\n\tif (key == null) return {};\r\n\treturn (_.isFunction(model.getPropertyDisplayConfig) && model.getPropertyDisplayConfig(key))\r\n\t\t|| (schema && schema.display) || {};\r\n}\r\n","import _ from 'underscore';\r\nimport { Model } from 'bbmn-core';\r\nimport { getByPath } from 'bbmn-utils';\r\n\r\nimport getNestedResult from './get-nested-result.js';\r\nimport getPropertySchema from './get-property-schema.js';\r\nimport getDisplayConfig from './get-display-config.js';\r\n\r\n\r\nexport default Base => {\r\n\tconst originalGet = Model.prototype.get;\r\n\tconst Mixed = Base.extend({\r\n\t\tgetByPath(key){\r\n\t\t\tif(key.indexOf('.') > -1)\r\n\t\t\t\treturn getByPath(this, key);\r\n\t\t\telse\r\n\t\t\t\treturn originalGet.call(this, key);\r\n\t\t},\r\n\t\tget(key, opts = {}){\r\n\t\t\tif(key == null || key == '') return;\t\r\n\t\t\t\r\n\t\t\tlet value;\r\n\t\t\tif('value' in opts) {\r\n\t\t\t\tvalue = opts.value;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = opts.byPath !== false ? this.getByPath.call(this, key) : originalGet.call(this, key);\r\n\t\t\t}\r\n\r\n\t\t\tif (!_.size(opts)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet result = opts.nested && getNestedResult(value, this, prop);\r\n\t\t\tif (result != null) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(opts.transform) && !opts.raw) {\r\n\t\t\t\tvalue = opts.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(prop.transform) && !opts.raw){\r\n\t\t\t\tvalue = prop.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(opts.display === true){\r\n\r\n\t\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\r\n\t\t\t\tif(opts.alternative){\r\n\t\t\t\t\tvalue = _.isFunction(display.alternative) && display.alternative.call(this, value, _.extend({},opts,prop), this);\r\n\t\t\t\t}\r\n\t\t\t\telse if(_.isFunction(display.transform)) {\r\n\t\t\t\t\tvalue = display.transform.call(this, value, opts, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(display.ifEmpty && (value == null || value === ''))\r\n\t\t\t\t\treturn display.ifEmpty;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tdisplay(key, opts = {}){\r\n\t\t\t_.extend(opts, { display:true });\r\n\t\t\treturn this.get(key, opts);\r\n\t\t},\r\n\t\tpropertyName(key) {\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\t\t\treturn display.label || key;\r\n\t\t}\r\n\t});\r\n\r\n\treturn Mixed;\r\n};\r\n","import _ from 'underscore';\r\nimport { betterResult } from 'bbmn-utils';\r\nexport default Base => Base.extend({\r\n\tdefaultWait: false,\r\n\tsaveReturnPromise: false,\r\n\tpatchInsteadSave: false,\r\n\tsave(key, val, options){\r\n\t\tlet attrs;\r\n\t\tif (key == null || typeof key === 'object') {\r\n\t\t\tattrs = key;\r\n\t\t\toptions = val;\r\n\t\t} else {\r\n\t\t\t(attrs = {})[key] = val;\r\n\t\t}\r\n\t\toptions || (options = {});\r\n\t\tif(!_.has(options, 'wait')){\r\n\t\t\toptions.wait = this.defaultWait;\r\n\t\t}\r\n\t\tif(!_.has(options, 'patch')) {\r\n\t\t\toptions.patch = this.patchInsteadSave;\r\n\t\t}\r\n\r\n\t\tif(options.addToUrl){\r\n\t\t\tlet url = betterResult(this, 'url', { args: [ options ] });\r\n\t\t\tif (url) {\r\n\t\t\t\turl += '/' + options.addToUrl;\r\n\t\t\t\toptions.url = url;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tconst save = Base.prototype.save.call(this, attrs, options);\r\n\t\tif (!this.saveReturnPromise) {\r\n\t\t\treturn save;\r\n\t\t}\r\n\r\n\t\tif (save && _.isFunction(save.then)) {\r\n\t\t\treturn save;\r\n\t\t}\r\n\t\tif (!save) {\r\n\t\t\treturn Promise.reject(save);\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve(save);\r\n\t\t}\r\n\t}\r\n});\r\n","import { buildViewByKey } from 'bbmn-utils';\r\nexport default Base => Base.extend({\r\n\tbuildViewByKey(...args){\r\n\t\treturn buildViewByKey.call(this, ...args);\r\n\t},\r\n});\r\n","import { betterResult } from 'bbmn-utils';\r\nimport _ from 'underscore';\r\n\r\nconst defaultCssConfig = {\r\n\tbeforeRender: true,\r\n\tmodelChange: true,\r\n\trefresh: true,\r\n};\r\n\r\nexport default (Base) => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._setupCssClassModifiers();\t\t\r\n\t},\r\n\t_initCssClassModifiers(){\r\n\t\tif (this.hasOwnProperty('cssClassModifiers')) { return; }\r\n\t\tlet modifiers = [];\r\n\t\tlet optsModifiers = betterResult(this.options || {}, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tlet propsModifiers = betterResult(this, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tmodifiers.push(...optsModifiers);\r\n\t\tmodifiers.push(...propsModifiers);\r\n\t\tthis.cssClassModifiers = modifiers;\r\n\t},\r\n\taddCssClassModifier(...modifiers){\r\n\t\tthis._initCssClassModifiers();\r\n\t\tthis.cssClassModifiers.push(...modifiers);\r\n\t},\r\n\trefreshCssClass(){\r\n\t\tlet className = this._getCssClassString();\r\n\t\tif(className == ''){\r\n\t\t\tthis.$el.removeAttr('class');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$el.attr({\r\n\t\t\t\tclass: className\r\n\t\t\t});\r\n\t\t}\r\n\t},\t\r\n\r\n\t_getCssClassModifiers(){\r\n\t\tthis._initCssClassModifiers();\r\n\t\tlet className = betterResult(this, 'className', { args:[this.model, this], default: [] });\r\n\t\tlet modifiers = this.cssClassModifiers.concat([className]);\r\n\t\treturn modifiers;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassModifiers(){\r\n\t\treturn this._getCssClassModifiers();\r\n\t},\r\n\t_getCssClassString()\r\n\t{\r\n\t\tlet modifiers = this.getCssClassModifiers();\r\n\t\t\r\n\t\tlet classes = _(modifiers).reduce((hash, modifier) => {\r\n\t\t\tif(modifier == null || modifier === '') { return hash; }\r\n\t\t\tlet cls;\r\n\t\t\tif (_.isString(modifier)) {\r\n\t\t\t\tcls = modifier;\r\n\t\t\t} else if (_.isFunction(modifier)) {\r\n\t\t\t\tlet builded = modifier.call(this, this.model, this);\r\n\t\t\t\tcls = _.isString(builded) && builded || undefined;\r\n\t\t\t}\r\n\t\t\tcls && (hash[cls] = true);\r\n\t\t\treturn hash;\r\n\t\t}, {});\r\n\r\n\t\treturn _.keys(classes).join(' ');\r\n\r\n\t},\r\n\r\n\t_setupCssClassModifiers(){\r\n\r\n\t\tif(this._cssClassModifiersInitialized) return;\r\n\r\n\t\tlet cfg = this.getCssClassConfig();\r\n\t\tif(!cfg) return;\r\n\r\n\t\tlet events = this.getCssClassEvents(cfg);\r\n\t\t_(events).each((eventName) => this.on(eventName, this.refreshCssClass));\r\n\r\n\t\tif (cfg.modelChange && this.model) {\r\n\t\t\tthis.listenTo(this.model, 'change', this.refreshCssClass);\r\n\t\t}\r\n\r\n\t\tthis._cssClassModifiersInitialized = true;\r\n\t},\r\n\t\r\n\t_getCssClassConfig(){\r\n\t\tlet cfg = _.extend({}, defaultCssConfig, this.getOption('cssClassConfig'));\r\n\t\tif(!cfg || _.size(cfg) == 0) return;\r\n\t\treturn cfg;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassConfig(){\r\n\t\treturn this._getCssClassConfig();\r\n\t},\r\n\r\n\t_getCssClassEvents(cfg){\r\n\t\tlet events = [].concat(cfg.events || []);\r\n\t\tif(cfg.refresh) events.push('refresh');\r\n\t\tif(cfg.beforeRender) events.push('before:render');\r\n\t\tevents = _(events).uniq();\r\n\t\treturn events;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassEvents(cfg){\r\n\t\treturn this._getCssClassEvents(cfg);\r\n\t}\r\n}, { CssClassModifiersMixin: true });\r\n","export default Base => Base.extend({\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\r\n\t\tthis._isDestroying = true;\r\n\t\tBase.prototype.destroy.apply(this, arguments);\r\n\t\tdelete this._isDestroying;\r\n\t},\r\n\tisDestroyed(){\r\n\t\treturn this._isDestroyed || this._isDestroying;\r\n\t}\r\n}, { DestroyMixin: true });\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nconst defaultSelector = (name, prefix = '') => prefix + 'region-' + name;\r\n\r\nfunction defaultUpdateDom(name, $el)\r\n{\r\n\tlet selector = defaultSelector(name);\r\n\tlet element = $('<div>').addClass(selector);\r\n\t$el.append(element);\r\n\r\n\treturn '.' + selector;\r\n}\r\n\r\nexport default function buildRegionFunc(view, hash, context){\r\n\r\n\tlet { $el } = view;\t\r\n\tlet { autoCreateRegion } = context;\r\n\tlet { updateDom, name, el } = hash;\r\n\tlet regionEl;\r\n\t\r\n\tlet region = view.getRegion(name);\r\n\r\n\r\n\tif (el == null && autoCreateRegion !== false) {\r\n\r\n\t\tlet testEl = region && region.getOption('el',{ deep:false});\r\n\r\n\t\tif (!region || !testEl || !$el.find(testEl).length) {\r\n\r\n\t\t\tregionEl = defaultUpdateDom(name, $el);\r\n\r\n\t\t} \r\n\r\n\t} else if(_.isFunction(updateDom)) {\r\n\t\tupdateDom.call(view, $el, view);\r\n\r\n\t} \r\n\t\r\n\t\r\n\tif (!region) {\r\n\t\tlet definition = _.pick(hash, 'replaceElement', 'regionClass');\r\n\t\tdefinition.el = hash.el || regionEl;\r\n\t\tregion = view.addRegion(name, definition);\r\n\t}\r\n\r\n\r\n\treturn region;\r\n}\r\n","import _ from 'underscore';\r\nimport buildRegion from './build-region.js';\r\n\r\nexport default function normalizeNestedViewContextRegion(context) {\r\n\r\n\tlet { region } = context;\r\n\tlet regionName = (_.isString(region) && region) || context.regionName || context.name;\r\n\r\n\tif (_.isString(region) || region == null) {\r\n\t\tregion = {};\r\n\t} else if (_.isFunction(region)) {\r\n\t\tregion = region.call(this, context, this);\r\n\t}\r\n\r\n\tif (_.isObject(region)) {\r\n\r\n\t\tif(!region.name)\r\n\t\t\tregion.name = regionName;\r\n\t\tlet replaceElement = this.getOption('replaceNestedElement');\r\n\t\tcontext.region = _.extend({ replaceElement }, region);\r\n\t\tcontext.show = _.partial(buildRegion, this, context.region, context);\r\n\t}\r\n\treturn context;\r\n}\r\n","import _ from 'underscore';\r\nimport { betterResult as result } from 'bbmn-utils';\r\nimport { isView, isViewClass } from 'bbmn-core';\r\nimport normalizeRegion from './normalize-region.js';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tthis._nestedViews = {};\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.initializeNestedViews();\r\n\t},\r\n\ttemplate: false,\r\n\r\n\tshowAllNestedViewsOnRender: false,\r\n\tshowNestedViewOnAdd: false,\r\n\treplaceNestedElement: true,\r\n\r\n\tinitializeNestedViews(){\r\n\t\tif (this._nestedViewsInitialized) return;\r\n\r\n\t\tif(this.getOption('showAllNestedViewsOnRender')) {\r\n\t\t\tthis.on('render', () => this.showAllNestedViews());\r\n\t\t}\r\n\r\n\t\tlet nesteds = this.getOption('nestedViews', { args:[this.model, this]});\r\n\t\t_(nesteds).each((context, index) => {\r\n\r\n\t\t\tlet name = _.isString(index) ? index : (context.name || _.uniqueId('nested'));\r\n\t\t\tthis.addNestedView(name, context);\r\n\r\n\t\t});\r\n\r\n\t\tthis._nestedViewsInitialized = true;\r\n\t},\r\n\t_normalizeNestedContext(name, context){\r\n\r\n\t\tif (isViewClass(context)) {\r\n\t\t\tlet View = context;\r\n\t\t\tcontext = {\r\n\t\t\t\tname, View\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t//unwrap to plain object\r\n\t\tif (_.isFunction(context)) {\r\n\t\t\tcontext = context.call(this, this.model, this);\r\n\t\t}\r\n\r\n\t\t//fix name if its not provided\r\n\t\tif (context.name == null) {\r\n\t\t\tcontext.name = name || _.uniqueId('nested');\r\n\t\t}\r\n\r\n\t\t//convert region to valid function\r\n\t\tcontext = normalizeRegion.call(this, context);\t\t\r\n\r\n\r\n\t\treturn context;\r\n\t},\r\n\t_createNestedContext(context){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\tcontexts[context.name] = context;\r\n\t},\r\n\r\n\taddNestedView(name, context){\r\n\r\n\t\tif (!_.isString(name) || name === '') {\r\n\t\t\tthrow new Error('addNestedView: first argument should be a string');\r\n\t\t}\r\n\r\n\t\tcontext = this._normalizeNestedContext(name, context);\r\n\t\tthis._createNestedContext(context);\r\n\t\tif(this.getOption('showNestedViewOnAdd') && this.isRendered()){\r\n\t\t\tthis.showNestedView(context);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tshowNestedView(name){\r\n\t\tlet region = this.getNestedViewRegion(name);\r\n\t\tlet view = region && this.buildNestedView(name);\r\n\t\tif (view) {\r\n\t\t\tregion.show(view);\r\n\t\t}\r\n\t},\r\n\tshowAllNestedViews(){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\t_(contexts).each(context => this.showNestedView(context));\r\n\t},\r\n\tgetNestedViewContext(name){\r\n\t\tlet contexts = this._nestedViews;\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn contexts;\r\n\t\telse\r\n\t\t\treturn contexts[name];\r\n\t},\r\n\r\n\r\n\tbuildNestedView(name){\r\n\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\r\n\t\tif(!context) return;\r\n\t\tlet passedView = result(context, 'view', { context: this, args: [this, this.model] });\r\n\t\tif(_.isFunction(context.template))\r\n\t\t\treturn context.template;\r\n\t\telse if ( isView(passedView) ) {\r\n\t\t\treturn passedView;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet View = context.View;\r\n\t\t\tlet options = this.buildNestedViewOptions(result(context, 'options', { context: this, args: [this, this.model], default:{} }));\r\n\t\t\t\r\n\t\t\treturn new View(options);\r\n\t\t}\r\n\t},\r\n\tbuildNestedViewOptions(opts){\r\n\t\treturn opts;\r\n\t},\r\n\tgetNestedViewRegion(name){\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\t\treturn context && _.result(context, 'show');\r\n\t}\r\n\t\r\n});\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport { normalizeMethods } from 'backbone.marionette';\r\n\r\nimport { camelCase } from 'bbmn-utils';\r\n\r\nexport default Base => Base.extend({\r\n\ttriggerScrollEvents: false,\r\n\tscrollHandlingEnabled: true,\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeScrollHandler();\r\n\t\tthis.addCssClassModifier('scrollable');\r\n\t},\r\n\r\n\r\n\r\n\t_initializeScrollHandler(){\r\n\t\tif (!this.getOption('scrollHandlingEnabled')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet scrollDelegate = {\r\n\t\t\t'scroll': this._scrollHandler.bind(this)\r\n\t\t};\r\n\t\tthis.on({\r\n\t\t\t'attach': () => this.delegateEvents(scrollDelegate),\r\n\t\t\t'detach': () => this.undelegateEvents(scrollDelegate),\r\n\t\t});\r\n\t\tlet events = this.getOption('scrollEvents', { args: [ this ] });\r\n\t\tthis.addScrollEvents(events);\r\n\t},\r\n\tscrollToStart(){\r\n\t\tlet el = this.getScrollElement();\r\n\t\tel.scrollTop = 0;\r\n\t\tel.scrollLeft = 0;\r\n\t},\r\n\taddScrollEvents(events){\r\n\t\tlet hash = normalizeMethods(this, events);\r\n\t\tthis._scrollEvents = _.extend({}, this._scrollEvents, hash);\r\n\t},\r\n\r\n\t_scrollHandler(){\r\n\t\tlet info = this.getElementInfo();\r\n\t\tthis.tryRegisterEdgeHit(info, 'bottom');\r\n\t\tthis.tryRegisterEdgeHit(info, 'right');\r\n\t},\r\n\ttryRegisterEdgeHit(info, edge){\r\n\t\tlet scroll = info[camelCase('scroll', edge)];\r\n\t\tlet end = info[camelCase('scroll', edge, 'end')];\r\n\t\tif (scroll >= end && !this.isEdgeHited(edge)) {\r\n\t\t\tthis._triggerEdge(edge);\r\n\t\t}\r\n\t},\r\n\tedgeHitKey:'_scrollHandler.edge',\r\n\tisEdgeHited(edge){\r\n\t\tlet key = this.edgeHitKey + '.' + edge;\r\n\t\treturn this[key] === true;\r\n\t},\r\n\tsetEdgeHit(edge, arg = true){\r\n\t\tlet key = this.edgeHitKey + '.' + edge;\r\n\t\treturn this[key] = arg;\r\n\t},\r\n\tgetScrollElement(){\r\n\t\tif (!this._scrollElement) {\r\n\t\t\tlet el = this.getOption('scrollElement', { args: [ this ]});\r\n\t\t\tif(el instanceof Element){\r\n\t\t\t\tthis._scrollElement;\r\n\t\t\t} else if(el == null) {\r\n\t\t\t\tthis._scrollElement = this.el;\r\n\t\t\t} else if (el.jquery){\r\n\t\t\t\tthis._scrollElement = el[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._scrollElement;\r\n\t},\t\r\n\tgetElementInfo(){\r\n\t\tlet el = this.getScrollElement();\r\n\t\tlet $el = $(el);\r\n\t\tlet width = $el.outerWidth();\r\n\t\tlet height = $el.outerHeight();\r\n\t\tlet scrollBottomEnd = el.scrollHeight - Math.floor(height / 2);\r\n\t\tlet scrollRightEnd = el.scrollWidth - Math.floor(width / 2);\r\n\t\treturn {\r\n\t\t\twidth, height,\r\n\t\t\tscrollBottomEnd, scrollRightEnd,\r\n\t\t\tscrollBottom: el.scrollTop + height,\r\n\t\t\tscrollRight: el.scrollLeft + width,\r\n\t\t};\r\n\t},\r\n\r\n\tclearScrollEdges(){\r\n\t\tthis.setEdgeHit('bottom', false);\r\n\t\tthis.setEdgeHit('right', false);\r\n\t},\r\n\r\n\t_triggerEdge(edge){\r\n\t\tthis.setEdgeHit(edge);\r\n\t\tif(this._scrollEvents) {\r\n\t\t\tlet handler = this._scrollEvents[`${edge}:edge`];\r\n\t\t\thandler && handler.call(this);\r\n\t\t}\r\n\t\tif(this.getOption('triggerScrollEvents') != false) {\r\n\t\t\tthis.triggerMethod('scrolled:to:' + edge);\r\n\t\t}\r\n\t},\r\n\r\n});\r\n\r\n\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport { Behavior } from 'backbone.marionette';\r\nimport { Collection } from 'bbmn-core';\r\n\r\n\r\n\r\n\r\nexport const SortableBehavior = Behavior.extend({\r\n\r\n\t//for move anchor, in our case whole view is anchor\r\n\tselector: '.sortable-anchor',\r\n\r\n\t// we have to know when childView is clicked for order\r\n\t// and when it mouse overed while ordering\r\n\tonAddChild(parent, view) {\r\n\r\n\t\tlet selector = this.getOption('selector');\r\n\r\n\t\t//in case if there is a special childNode as anchor\r\n\t\tview.$el.on('mousedown', selector, e => this.startDragSort(e,view));\t\t\t\r\n\t\tview.$el.on('mouseenter', e => this.handleMouseEnter(e, view));\r\n\r\n\t},\r\n\r\n\thandleMouseEnter(event, view){\r\n\t\tif (!this.orderingItem || this.orderingItem == view || view.getOption('notSortable')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.view.swapChildViews(this.orderingItem, view);\r\n\t\tthis.view.triggerMethod('drag:swap:views', this.orderingItem, view);\r\n\t},\r\n\r\n\tstartDragSort(event, child, touchable){\r\n\t\tthis.orderingItem = child;\r\n\t\t//mouse up can happens outside.\r\n\t\t\r\n\t\t$(document).one('mouseup', e => this.stopDragSort(e, touchable));\r\n\t\tthis.view.triggerMethod('before:drag:sort', child);\r\n\t},\r\n\tstopDragSort(){\r\n\t\tlet view = this.orderingItem;\r\n\t\tdelete this.orderingItem;\r\n\t\tthis.view.triggerMethod('drag:sort', view);\r\n\t},\r\n});\r\n\r\n\r\n\r\nexport const SortableModelBehavior = SortableBehavior.extend({\r\n\tinitialize(options){\r\n\t\tthis.mergeOptions(options, ['swapModels', 'property']);\r\n\t\tif (_.isString(this.swapModels)){\r\n\t\t\tthis.swapModels = this.view.getOption(this.swapModels);\r\n\t\t}\r\n\t\tif (_.isFunction(this.swapModels)) {\r\n\t\t\tthis.swapModels = this.swapModels.bind(this.view);\r\n\t\t} else if (this.property) {\r\n\t\t\tthis.swapModels = this.swapModelsProperty;      \r\n\t\t} else {\r\n\t\t\tdelete this.swapModels;\r\n\t\t}\r\n\t},\r\n\tswapModelsProperty(m1,m2){\r\n\t\tlet key = this.property;\r\n\t\tlet temp = m1.get(key);\r\n\t\tm1.set(key, m2.get(key));\r\n\t\tm2.set(key, temp);  \r\n\t},\r\n\tonDragSwapViews(v1,v2){\r\n\t\tif (!this.swapModels || !v1.model || !v2.model) return;\r\n\t\tthis.swapModels(v1.model, v2.model);\r\n\t},\r\n\tonBeforeDragSort(){\r\n\t\tthis.changedModels = new Collection();\r\n\t\tthis.listenTo(this.view.collection, 'change', this.storeChangedModel);\r\n\t},\r\n\tstoreChangedModel(model){\r\n\t\tthis.changedModels.add(model);\r\n\t},\r\n\tonDragSort(){\r\n\t\tthis.stopListening(this.view.collection, 'change', this.storeChangedModel);\r\n\t\t// do something here with changed models\r\n\t\tthis.view.triggerMethod('drag:sort:change', this.changedModels.models);\r\n\t},\r\n});\r\n","import $ from 'jquery';\r\nimport _ from 'underscore';\r\n\r\nlet shouldPreventMove = false;\r\nlet fakeListener = false;\r\n\r\nexport const preventCallback = event => {\r\n\tif (shouldPreventMove) {\r\n\t\tevent.preventDefault();\r\n\t}\r\n};\r\n\r\n// for canceling click after drag back to the clicked el\r\nfunction cancelMouseClick(e) {\r\n\te.stopPropagation(); // Stop the click from being propagated.\r\n\twindow.removeEventListener('click', cancelMouseClick, true); // cleanup\r\n}\r\n\r\n// for preventing touchmove after hold\r\nexport function setupTouchMovePrevent()\r\n{\r\n\tif (fakeListener) return;\r\n\r\n\tdocument.addEventListener('touchmove', preventCallback, { passive: false });\r\n\r\n\tfakeListener = true;\r\n\r\n}\r\n\r\nlet baseManipulatorEnter = (event, initialEl) => {\r\n\r\n\tlet touches = !!event.touches;\r\n\tlet target = event.target;\r\n\tif (touches) {\r\n\t\tlet touch = event.touches[0];\r\n\t\ttarget = document.elementFromPoint(touch.pageX, touch.pageY);\r\n\t}\r\n\tif (initialEl == target || initialEl.contains(target)) return;\r\n\r\n\t$(target).trigger('manipulator:enter');\r\n};\r\n\r\nexport function delayedTouchstart(touchstart, delay = 400) {\r\n\treturn function (event) {\r\n\t\t\r\n\t\t\r\n\r\n\t\tif (event.touches.length !== 1) { return; }\r\n\r\n\t\tlet el = event.target;\r\n\r\n\r\n\t\tvar heldItem = function () {\r\n\r\n\t\t\tel.removeEventListener('touchend', onReleasedItem);\r\n\t\t\tel.removeEventListener('touchmove', onReleasedItem);\r\n\r\n\r\n\t\t\t// preventing defalut touchmove\r\n\t\t\t// using fakeListener from setupTouchMovePrevent\r\n\t\t\t// and reverting value back after touch end\r\n\t\t\tshouldPreventMove = true;\r\n\t\t\tlet returnPreventMoveValue = () => {\r\n\t\t\t\tel.removeEventListener('touchend', returnPreventMoveValue);\t\r\n\t\t\t\tshouldPreventMove = false;\r\n\t\t\t};\r\n\r\n\r\n\t\t\tel.addEventListener('touchend', returnPreventMoveValue);\r\n\r\n\t\t\ttouchstart(event);\r\n\r\n\t\t};\r\n\r\n\t\tvar onReleasedItem = function () {\r\n\t\t\tel.removeEventListener('touchend', onReleasedItem);\r\n\t\t\tel.removeEventListener('touchmove', onReleasedItem);\r\n\t\t\tclearTimeout(timer);\r\n\t\t};\r\n\r\n\t\tvar timer = setTimeout(heldItem, delay);\r\n\t\tel.addEventListener('touchend', onReleasedItem);\r\n\t\tel.addEventListener('touchmove', onReleasedItem);\r\n\t};\r\n}\r\n\r\n\r\nexport function setupManipulatorEnter({ $el, onManipulatorEnter, onStart, onEnd, disableTouchScroll, selector, preventStart } = {}) {\r\n\r\n\tif (!fakeListener) {\r\n\t\tdocument.addEventListener('touchmove', preventCallback, { passive: false });\r\n\t\tfakeListener = true;\r\n\t}\r\n\r\n\tlet el = $el.get(0);\r\n\tlet manipulatorEnter = _.partial(baseManipulatorEnter, _, el);\r\n\tlet $doc = $(document);\r\n\tlet isOnStart = _.isFunction(onStart);\r\n\tlet isOnEnd = _.isFunction(onEnd);\r\n\tlet isDisableTouchScroll = _.isFunction(disableTouchScroll);\r\n\tlet isPreventStart = _.isFunction(preventStart);\r\n\r\n\tlet touchStart = () => {\r\n\r\n\t\tisOnStart && onStart();\r\n\t\tisDisableTouchScroll && disableTouchScroll();\r\n\t\t\r\n\t\tlet touchEnd = () => {\r\n\t\t\tdocument.removeEventListener('touchmove', manipulatorEnter);\r\n\t\t\tdocument.removeEventListener('touchend', touchEnd);\r\n\t\t\tisOnEnd && onEnd();\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener('touchmove', manipulatorEnter, { passive: false });\r\n\t\tdocument.addEventListener('touchend', touchEnd, { passive: false });\r\n\r\n\t};\r\n\r\n\tel.addEventListener('touchstart', delayedTouchstart(touchStart), { passive: false });\r\n\t\r\n\t$el.on('mousedown', selector, (original) => {\r\n\t\tif(isPreventStart && preventStart()){\r\n\t\t\toriginal.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet stopHandlers = (event) => {\r\n\t\t\toriginal.preventDefault();\r\n\t\t\tevent.preventDefault();\r\n\t\t\t$doc.off('mouseenter', '*', manipulatorEnter);\r\n\t\t\t$el.off('mousemove', mouseStart);\r\n\t\t\tisOnEnd && onEnd();\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tlet mouseStart = () => {\r\n\t\t\t$el.one('mouseup', () => { \r\n\t\t\t\twindow.addEventListener('click', cancelMouseClick, true );\r\n\t\t\t});\r\n\t\t\tonStart && onStart();\r\n\t\t\t$doc.on('mouseenter', '*', manipulatorEnter);\r\n\t\t};\r\n\t\t$doc.one('mouseup', stopHandlers);\r\n\t\t$el.one('mousemove', mouseStart);\r\n\t});\r\n\t$el.on('manipulator:enter', onManipulatorEnter);\r\n}\r\n","import _ from 'underscore';\r\nimport { getOption } from 'bbmn-utils';\r\nimport { Behavior } from 'backbone.marionette';\r\nimport { setupManipulatorEnter } from './helpers';\r\n\r\nexport const InteractionBehavior = Behavior.extend({\r\n\tgetOption(){\r\n\t\treturn getOption(this, ...arguments);\r\n\t},\r\n\tonAddChild(parent, view) {\r\n\r\n\t\tsetupManipulatorEnter({\r\n\t\t\t$el: view.$el,\r\n\r\n\t\t\tonManipulatorEnter: () => view.trigger('enter'),\r\n\t\t\tonStart: () => this.startInteraction(view),\r\n\t\t\tonEnd: () => this.endInteraction(view),\r\n\t\t\tselector: this.getOption('selector')\t\t\r\n\t\t});\t\t\r\n\t\tthis.listenTo(view, 'enter', () => this.viewEntered(view));\r\n\t\tthis.setupView(view);\r\n\t},\r\n\tviewEntered(view){\r\n\t\tthis.view.triggerMethod('view:entered', view);\r\n\t},\r\n\tstartInteraction(view){\r\n\t\tthis.dragging = view;\r\n\t\tview.dragging = true;\r\n\t\tlet options = this.getOption('interactionStartOptions');\r\n\t\tthis.view.triggerMethod('interaction:start', view, options);\r\n\t},\r\n\tendInteraction(view){\r\n\t\tdelete this.dragging;\r\n\t\tdelete view.dragging;\r\n\t\tlet options = this.getOption('interactionEndOptions');\r\n\t\tthis.view.triggerMethod('interaction:end', view, options);\r\n\t},\r\n\tsetupView: _.noop,\r\n});\r\n","import _ from 'underscore';\r\nimport { InteractionBehavior }  from './interaction-behavior';\r\nimport { Collection } from 'bbmn-core';\r\n\r\nexport const SwappableBehavior = InteractionBehavior.extend({\r\n\tinitialize(options){\r\n\t\tthis.initializeSwappable(options);\r\n\t},\r\n\r\n\tinitializeSwappable(options){\r\n\t\tthis.mergeOptions(options, ['swap', 'property', 'canBeSwapped']);\r\n\t\tif (_.isString(this.swap)){\r\n\t\t\tthis.swap = this.view.getOption(this.swap);\r\n\t\t}\r\n\t\tif (_.isFunction(this.swap)) {\r\n\t\t\tthis.swap = this.swap.bind(this.view);\r\n\t\t} else if (this.property) {\r\n\t\t\tthis.swap = this.swapModelsProperty;      \r\n\t\t} else {\r\n\t\t\tdelete this.swap;\r\n\t\t}\r\n\t\tthis.changedModels = new Collection();\r\n\t},\r\n\r\n\tinteractionEndOptions(){\r\n\t\treturn this.changedModels.models;\r\n\t},\r\n\r\n\r\n\tviewEntered(view){\r\n\t\tlet result = this.view.triggerMethod('view:entered', view);\r\n\t\tif (result === false) return;\r\n\t\tthis.swapViews(view);\r\n\t},\t\t\r\n\r\n\r\n\r\n\tstoreChangedModel(model){\r\n\t\tthis.changedModels.add(model);\r\n\t},\r\n\tcanBeSwapped(){\r\n\t\treturn true;\r\n\t},\r\n\r\n\tswapViews(entered){\r\n\r\n\t\tif (!this.canBeSwapped(entered)) return;\r\n\r\n\t\tthis.view.swapChildViews(this.dragging, entered);\r\n\t\t\r\n\t\tthis.dragging.model && this.storeChangedModel(this.dragging.model);\r\n\t\tentered.model && this.storeChangedModel(entered.model);\r\n\r\n\t\tthis.view.triggerMethod('swap:views', this.dragging, entered);\r\n\r\n\t},\r\n\tonSwapViews(one, two){\r\n\t\tthis.swap(one, two, this.getOption('swapOptions'));\r\n\t},\r\n\tswapModelsProperty(v1,v2, opts){\r\n\t\tif (this.property == null) return;\r\n\t\tlet key = this.property;\r\n\t\t\r\n\t\tif(v1.model == null || v2.model == null) return;\r\n\t\tlet m1 = v1.model;\r\n\t\tlet m2 = v2.model;\r\n\r\n\t\tlet temp = m1.get(key);\r\n\t\tm1.set(key, m2.get(key), opts);\r\n\t\tm2.set(key, temp, opts);\r\n\t},\t\r\n});\r\n","import _ from 'underscore';\r\nexport default Base => Base.extend({\r\n\tdefaultWait: false,\r\n\tcreateReturnPromise: false,\r\n\tcreate(model, options = {}){\r\n\t\tif(!_.has(options, 'wait')){\r\n\t\t\toptions.wait = this.defaultWait;\r\n\t\t}\r\n\t\tconst create = Base.prototype.create.call(this, model, options);\r\n\t\tif (!this.createReturnPromise) {\r\n\t\t\treturn create;\r\n\t\t}\r\n\r\n\t\tif (create && _.isFunction(create.then)) {\r\n\t\t\treturn create;\r\n\t\t}\r\n\t\tif (!create) {\r\n\t\t\treturn Promise.reject(create);\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve(create);\r\n\t\t}\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\n\r\nexport function isPromisable(arg){\r\n\treturn arg instanceof Promise || _.isFunction(arg && arg.then);\r\n}\r\n\r\nexport function asArray(arg) {\r\n\tif(_.isArray(arg))\r\n\t\treturn arg;\r\n\telse if(arg == null || arg === '')\r\n\t\treturn [];\r\n\telse\r\n\t\treturn [arg];\r\n}\r\n\r\nexport function race(...promises){\r\n\treturn Promise.race(promises);\r\n}\r\n\r\nexport function valueToPromise(arg){\r\n\tif(!isPromisable(arg)) {\r\n\t\tlet result = arg;\r\n\t\targ = arg == null || arg === '' ? Promise.resolve() : Promise.reject(result);\r\n\t}\r\n\treturn arg;\t\t\r\n}\r\n","import _ from 'underscore';\r\nexport default function registerProcess (Process, context, name, opts) {\r\n\r\n\tcontext[name] = function(...args){\r\n\t\t\r\n\t\tlet process = new Process(context, name, _.extend({}, opts));\r\n\t\tlet concurrent = process.concurrencyCheck();\r\n\r\n\t\tif (concurrent)\r\n\t\t\treturn concurrent;\r\n\t\telse\r\n\t\t\treturn process.run(...args);\r\n\r\n\t};\r\n\r\n}\r\n","import _ from 'underscore';\r\nimport { triggerMethodOn, camelCase, betterResult } from 'bbmn-utils';\r\nimport { isPromisable, race, asArray, valueToPromise } from './helpers.js';\r\nimport { BaseClass } from 'bbmn-core';\r\n\r\nimport register from './register.js';\r\n\r\n\r\nconst Process = BaseClass.extend({\r\n\tconstructor(context, name, opts){\r\n\t\t\r\n\t\tBaseClass.apply(this, arguments);\r\n\r\n\t\tthis._initDefaults(name, context);\r\n\t\tthis._initCancelation();\r\n\t\tthis._mergeOptions(opts);\r\n\t},\r\n\r\n\r\n\t// initialize methods\r\n\r\n\t_initDefaults(name, context){\r\n\t\tif(name == null || name === '')\r\n\t\t\tthrow new Error('Process requires two arguments: name [string], context [object]. name missing');\r\n\t\t\r\n\t\tif(!_.isObject(context))\r\n\t\t\tthrow new Error('Process requires two arguments: name [string], context [object]. context is not an object');\r\n\r\n\t\tthis.cid = _.uniqueId('process');\r\n\t\tthis.name = name;\r\n\t\tthis.context = context;\r\n\t\tthis.errors = [];\r\n\t},\r\n\r\n\t_initCancelation(){\r\n\t\tthis.cancelPromise = new Promise((resolve, reject) => {\r\n\t\t\tthis.cancel = () => reject('cancel'); \r\n\t\t});\r\n\t},\r\n\t_mergeOptions(opts = {}){\r\n\t\tlet options = _.omit(opts, 'cid', 'name', 'context', 'cancelPromise', 'cancel', 'errors');\r\n\t\t_(options).each((value, key) => this[key] = value);\r\n\t\tif (this.exposeSelf == null) {\r\n\t\t\tthis.exposeSelf = true;\r\n\t\t}\r\n\t},\r\n\r\n\t\r\n\tconcurrencyCheck(){\r\n\r\n\t\tlet previous = this.getProcessFromContext();\r\n\t\t//console.log(previous, this.context);\r\n\t\tif(!previous) return;\r\n\t\r\n\t\tlet concurrent = this.concurrent;\t\r\n\t\t\r\n\t\tif (concurrent === false) {\r\n\t\r\n\t\t\tthis.cancel();\r\n\t\r\n\t\t} else if (concurrent == 'first') {\r\n\t\r\n\t\t\treturn previous.promise;\r\n\t\r\n\t\t} else if (concurrent == 'last') {\r\n\t\r\n\t\t\tprevious.cancel();\r\n\t\r\n\t\t}\t\t\r\n\t},\r\n\r\n\r\n\t// life cycle methods\t\r\n\r\n\trun(...args){\r\n\t\tthis.updateProcessInContext(this);\r\n\t\tthis.args = args || [];\r\n\t\tthis.promise = this._createLifeCyclePromise();\r\n\t\treturn this.promise;\r\n\t},\r\n\r\n\r\n\t_createLifeCyclePromise(){\r\n\r\n\r\n\t\treturn this._notCanceled()\r\n\t\t\t.then(() => this._begin())\r\n\t\t\t.then(() => this._beforeStart())\r\n\t\t\t.then(() => this._canBeStarted())\r\n\t\t\t.then(() => this._waitOtherPromises())\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.triggerComplete();\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.triggerError(error);\r\n\t\t\t\tlet jsError;\r\n\t\t\t\tif(error instanceof Error) {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t} else if ((jsError = this.getJsError())) {\r\n\t\t\t\t\tthrow jsError;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t},\r\n\r\n\r\n\r\n\r\n\t_notCanceled() {\r\n\t\treturn this._cancelationRace(Promise.resolve());\r\n\t},\r\n\t_begin(){\r\n\t\treturn this._getHookResultAsPromise('begin');\r\n\t},\r\n\t_beforeStart(){\r\n\t\treturn this._getHookResultAsPromise('before');\r\n\t},\r\n\t_canBeStarted(){\r\n\t\tlet contextMethod = 'can:not:' + this.name;\r\n\t\tlet promise = this.invokeOnContext(contextMethod);\r\n\t\tif(!isPromisable(promise)) {\r\n\t\t\tpromise = (promise == null || promise === '') \r\n\t\t\t\t? Promise.resolve()\r\n\t\t\t\t: Promise.reject(promise);\r\n\t\t}\r\n\t\treturn this._cancelationRace(promise);\r\n\t},\r\n\t_waitOtherPromises(){\r\n\t\tlet contextMethod = `get:${this.name}:promises`;\r\n\t\t\r\n\t\tlet promises = asArray(this.invokeOnContext(contextMethod));\r\n\r\n\t\treturn this._cancelationRace(Promise.all(promises));\r\n\t},\r\n\r\n\t_getHookResultAsPromise(hookName){\r\n\t\tlet procMethod = camelCase('on:' + hookName);\r\n\t\tlet procHook = _.isFunction(this[procMethod]) && this[procMethod](this.context, ...this.args) || undefined;\r\n\t\tlet result = valueToPromise(procHook).then(() => {\r\n\t\t\tlet cntxHook = this.triggerOnContext(hookName);\r\n\t\t\treturn valueToPromise(cntxHook);\r\n\t\t});\r\n\r\n\t\treturn this._cancelationRace(result);\r\n\r\n\t},\r\n\r\n\t// trigger methods\r\n\r\n\ttriggerComplete() { \r\n\r\n\t\tthis.updateProcessInContext(null);\r\n\r\n\t\tif (_.isFunction(this.onComplete))\r\n\t\t\tthis.onComplete(this.context, ...this.args);\r\n\r\n\t\tthis.triggerOnContext();\r\n\r\n\t\tthis.triggerEnd();\r\n\t\t\r\n\t\r\n\t},\r\n\ttriggerError(errors){\r\n\r\n\r\n\t\tthis.updateProcessInContext(null);\t\t\r\n\r\n\t\tif(!_.isArray(errors))\r\n\t\t\terrors = [errors];\r\n\r\n\t\tthis.errors.push(...errors);\r\n\r\n\t\t\r\n\t\tif (_.isFunction(this.onError))\r\n\t\t\tthis.onError(this.context, ...this.errors);\r\n\t\t\r\n\t\tthis.triggerOnContext('error', ...this.errors);\r\n\t\t\r\n\t\tthis.triggerEnd();\r\n\r\n\t\t\r\n\t},\r\n\ttriggerEnd(){\r\n\t\tthis.triggerOnContext('end');\r\n\t},\r\n\r\n\r\n\r\n\t// helpers methods\r\n\r\n\tgetJsError(context){\r\n\t\t!context && (context = this);\r\n\t\tif(context != this && (!_.isObject(context) || !_.isArray(context.errors)))\r\n\t\t\treturn;\r\n\r\n\t\treturn _(context.errors).filter(f => f instanceof Error)[0];\r\n\t},\t\r\n\r\n\t_cancelationRace(promise){\r\n\t\treturn race(this.cancelPromise, promise);\r\n\t},\r\n\r\n\r\n\tgetContextProcessKey(){\r\n\t\treturn camelCase(`_process:${this.name}:executing`);\r\n\t},\r\n\tgetProcessFromContext(){\r\n\t\tlet key = this.getContextProcessKey();\r\n\t\treturn this.context[key];\r\n\t},\r\n\tupdateProcessInContext(process){\r\n\t\tlet key = this.getContextProcessKey();\t\t\r\n\t\tthis.context[key] = process;\r\n\t},\r\n\r\n\r\n\r\n\ttriggerOnContext (eventName) {\r\n\t\r\n\t\tlet context = this.context; \r\n\t\tif(!_.isFunction(context.trigger))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tlet event = (eventName ? eventName + ':' : '') + this.name;\r\n\t\tlet triggerArgs = [context, event];\r\n\t\tif (this.exposeSelf) {\r\n\t\t\ttriggerArgs.push(this);\r\n\t\t}\r\n\t\ttriggerArgs.push(...this.args);\r\n\t\treturn triggerMethodOn(...triggerArgs);\r\n\t\r\n\t},\r\n\r\n\tinvokeOnContext(methodName)\r\n\t{\r\n\t\tlet method = camelCase(methodName);\r\n\t\tlet context = this.context;\r\n\t\tlet args = this.args;\r\n\t\treturn betterResult(context, method, { args });\r\n\r\n\t}\r\n\r\n}, {\r\n\tregister(context, name, opts) {\r\n\t\treturn register(this, context, name, opts);\r\n\t}\r\n});\r\n\r\n\r\n// Process.register = function(context, name, opts) {\r\n// \treturn register(this, context, name, opts);\r\n// };\r\n\r\nexport default Process;\r\n","import _ from 'underscore';\r\nimport Process from './process.js';\r\nimport { getOption } from 'bbmn-utils';\r\n\r\nconst defaultStartableOptions  = {\r\n\tconcurrent: false,\r\n\texposeSelf: true,\r\n\t//good place to supply own state collecting logic\r\n\tstoreState(){\r\n\r\n\t\tthis.contextState = [{\r\n\t\t\tkey: 'startable.status',\r\n\t\t\tvalue: this.context['startable.status']\r\n\t\t}];\r\n\r\n\r\n\t\t/*\r\n\r\n\t\tfor example: take all simple values from context\r\n\r\n\t\tfor(var key in this.context){\r\n\t\t\tlet value = this.context[key];\r\n\t\t\tif (value == null || !_.isObject(value.valueOf()))\r\n\t\t\t\tthis.contextState.push({ key, value });\r\n\t\t}\r\n\r\n\t\t*/\r\n\r\n\t},\r\n\trestoreState(){\r\n\t\t_(this.contextState || []).each(keyValue => {\r\n\t\t\tthis.context[keyValue.key] = keyValue.value;\r\n\t\t});\r\n\t},\r\n\tonBefore(...args){\r\n\t\tthis.storeState();\r\n\t\tthis.ensureState();\r\n\t\tthis.context['startable.status'] = this.processingName;\r\n\t\tthis.context['startable.start.lastArguments'] = args;\r\n\t},\r\n\tonComplete(){\r\n\t\tthis.context['startable.status'] = this.processedName;\r\n\t},\t\r\n\tonError(){\r\n\t\tthis.restoreState();\r\n\t},\r\n\tensureState(shouldThrow = true){\r\n\t\tlet other = this.name == 'start' ? 'stop' : 'start';\r\n\t\tlet error = this.name == 'start' ? 'not:stopped' : 'not:started';\r\n\t\tlet status = this.context['startable.status'];\r\n\t\tswitch(status){\r\n\t\tcase 'stopping':\r\n\t\tcase 'starting':\r\n\t\t\tif(shouldThrow) throw new Error('not:iddle');\r\n\t\t\telse return 'not:iddle';\r\n\t\tcase 'iddle':\r\n\t\t\tif(this.name == 'start') return;\r\n\t\t\telse if(shouldThrow) throw new Error(error);\r\n\t\t\telse return error;\r\n\t\tcase other:\r\n\t\t\tif(shouldThrow) throw new Error(error);\r\n\t\t\telse return error;\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst defaultStartOptions  = {\r\n\tprocessingName: 'starting',\r\n\tprocessedName: 'started'\r\n};\r\nconst defaultStopOptions  = {\r\n\tprocessingName: 'stopping',\r\n\tprocessedName: 'stopped'\r\n};\r\n\r\n\r\n\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeStartable();\r\n\t},\r\n\t_initializeStartable(){\r\n\t\tif (this._startableInitialized) return;\r\n\r\n\t\tlet startable = _.extend({}, defaultStartableOptions, getOption(this, 'startableOptions', {args:[this]}));\r\n\r\n\t\tlet start = _.extend({}, startable, defaultStartOptions, getOption(this, 'startOptions', {args:[this]}));\r\n\t\tlet stop = _.extend({}, startable, defaultStopOptions, getOption(this, 'stopOptions', {args:[this]}));\r\n\r\n\t\tProcess.register(this, 'start', start);\r\n\t\tProcess.register(this, 'stop', stop);\r\n\t\t\r\n\t\tthis._startableInitialized = true;\r\n\t},\r\n\tisStarted(){\r\n\t\treturn this['startable.status'] === 'started';\r\n\t},\r\n\tisStopped(){\r\n\t\treturn this['startable.status'] == null || this['startable.status'] === 'stopped' || this['startable.status'] === 'iddle';\r\n\t},\r\n\tisNotIddle(){\r\n\t\treturn this['startable.status'] === 'stopping' || this['startable.status'] === 'starting';\r\n\t},\r\n\trestart(){\r\n\t\tif(this.isNotIddle())\r\n\t\t\tthrow new Error('Restart not allowed while startable instance is not iddle: ', this['startable.status']);\r\n\t\tlet stop = this.isStarted() ? this.stop() : Promise.resolve();\r\n\t\tlet args = this['startable.start.lastArguments'] || [];\r\n\t\treturn stop.then(() => this.start(...args));\r\n\t}\t\r\n},{ StartableMixin: true });\r\n","import _ from 'underscore';\r\nimport { BaseClass, Events, Region, isClass } from 'bbmn-core';\r\nimport { startableMixin } from '../process/index.js';\r\nimport { mix, getOption, triggerMethod, buildViewByKey } from 'bbmn-utils';\r\n\r\nconst BaseApp = mix(BaseClass).with(Events, startableMixin);\r\n\r\nexport default BaseApp.extend({\r\n\tconstructor(options = {}){\r\n\t\tthis.options = _.clone(options);\r\n\t\tthis._startPromises = [];\r\n\t\tBaseApp.apply(this, arguments);\r\n\t\tthis.initialize(options);\r\n\t\tthis.triggerMethod('initialize', options);\t\r\n\t},\r\n\ttriggerMethod,\r\n\tgetOption(){\r\n\t\treturn getOption(this, ...arguments);\r\n\t},\r\n\tgetStartPromises(){\r\n\t\t\r\n\t\tif(!this._startPromises) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn _.map(this._startPromises, item =>{\r\n\t\t\tif (_.isFunction(item)) {\r\n\t\t\t\treturn item.call(this, this);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\taddStartPromise(...args){\r\n\t\tthis._startPromises.push(...args);\r\n\t},\r\n\tinitialize:() => {},\r\n\tdoOnResolve(promise, callback, ...args){\r\n\t\treturn promise.then(() => {\r\n\t\t\treturn callback.apply(this, args);\r\n\t\t});\r\n\t},\r\n\trenderLayout(options){\r\n\t\tif (!this.layoutView) {\r\n\t\t\tlet layout = this.buildLayout(options);\r\n\t\t\tif(!layout) { return; }\r\n\t\t\tthis.layoutView = layout;\r\n\t\t}\r\n\t\tlet region = this.getRegion();\r\n\t\tregion.show(this.layoutView);\r\n\t\treturn this.layoutView;\r\n\t},\r\n\tbuildLayout(options){\r\n\t\treturn buildViewByKey(this, 'layout', { options });\r\n\t},\r\n\tgetRegion(){\r\n\t\tif (this._region) return this._region;\r\n\t\tthis._region = this.buildRegion();\r\n\t\treturn this._region;\r\n\t},\r\n\t_buildRegion(region, options){\r\n\t\tif (region == null) {\r\n\t\t\treturn new Region(options);\r\n\t\t} else if (isClass(region, Region)) {\r\n\t\t\treturn new region(options);\r\n\t\t} else if (_.isFunction(region)) {\r\n\t\t\treturn this._buildRegion(region.call(this, this), options);\r\n\t\t} else if (_.isObject(region)) {\r\n\t\t\tlet RegionClass = region.regionClass || Region;\r\n\t\t\tlet newOptions = _.extend({}, _.omit(region, 'regionClass'));\r\n\t\t\tif(!newOptions.el) {\r\n\t\t\t\tnewOptions.el = options.el;\r\n\t\t\t}\r\n\t\t\tif(newOptions.replaceElement == null) {\r\n\t\t\t\tnewOptions.replaceElement = options.replaceElement;\r\n\t\t\t}\r\n\t\t\treturn new RegionClass(newOptions);\r\n\t\t}\r\n\t},\r\n\tbuildRegion(){\r\n\t\tlet el = this.getOption('appEl') || 'body';\r\n\t\tlet opts = { el, replaceElement: true };\r\n\t\treturn this._buildRegion(this.getOption('region', { args: [this] }), opts);\r\n\t},\r\n});\r\n","import { BaseClass, Events } from 'bbmn-core';\r\nimport { getOption, triggerMethod, mix } from 'bbmn-utils';\r\n\r\nconst Schema = mix(BaseClass).with(Events).extend({\r\n\tgetOption: function(){\r\n\t\treturn getOption(this, ...arguments);\r\n\t},\r\n\ttriggerMethod\r\n});\r\n\r\nexport default Schema;\r\n","import _ from 'underscore';\r\nimport { betterResult, clone, isEmptyValue, toBool, getFlag } from 'bbmn-utils';\r\nimport Schema from './schema.js';\r\n\r\n\r\nexport default Schema.extend({\r\n\tconstructor(options = {}){\r\n\t\tSchema.apply(this, arguments);\r\n\t\tlet { name, property, modelSchema, order = 0 } = options;\r\n\t\tthis.name = name;\r\n\t\tthis.schema = _.extend({}, property);\t\r\n\t\tthis.modelSchema = modelSchema;\r\n\t\tif (this.schema.order != null)\r\n\t\t\torder = this.schema.order;\r\n\t\tthis.order = order;\r\n\t},\r\n\t_getByKey(key, options = {}){\r\n\t\tlet hash = betterResult(this.schema, key, { args: [options, {property:this,model:this.modelSchema}], default: {} });\r\n\t\treturn clone(hash, { functions: true });\r\n\t},\r\n\tgetValidation(options) {\r\n\t\treturn this._getByKey('validation', options);\r\n\t},\r\n\tgetType(options) {\r\n\t\tlet type = this._getByKey('value', options);\r\n\t\tif(!('multiple' in type)) {\r\n\t\t\ttype.multiple = false;\r\n\t\t}\r\n\t\treturn type;\r\n\t},\r\n\tgetDisplay(options){\r\n\t\treturn this._getByKey('display', options);\r\n\t},\r\n\tgetLabel(model){\r\n\t\tlet label = this.getDisplay().label;\r\n\t\treturn betterResult({ label },'label', { context: model || this, args: [model] });\r\n\t},\r\n\tgetEdit(options = {}){\r\n\t\tlet editOptions = this._getByKey('edit', options);\r\n\t\tif (editOptions === false) return false;\r\n\t\tlet valueOptions = this.getType(options);\r\n\t\tlet label = this.getLabel(options.model);\r\n\t\tlet compiled = _.extend({ name: this.name, label, schema: this }, options, editOptions, { valueOptions });\r\n\t\treturn compiled;\r\n\t},\r\n\t// accepts: value, model, options\r\n\tgetDisplayValue(val, model, options = {}){\r\n\r\n\t\t_.defaults(options, { value: val, allValues: model && model.toJSON && model.toJSON(), model });\r\n\t\tlet display = this.getDisplay(options);\r\n\t\tlet type = this.getType(options);\r\n\r\n\t\toptions = _.extend(options, { display, type, property: this });\r\n\t\tif (display) {\r\n\t\t\t\r\n\t\t\tif (_.isFunction(display.transform)) {\r\n\t\t\t\tval = display.transform.call(model, val, options);\r\n\t\t\t} else if (type.type == 'boolean' && type.sourceValues) {\r\n\r\n\t\t\t\tif (_.isString(val)) {\r\n\t\t\t\t\tval = toBool(val);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.some(type.sourceValues, (label, key) => {\r\n\t\t\t\t\tif(toBool(key) === val) {\r\n\t\t\t\t\t\tval = label;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (type.type == 'enum' && type.sourceValues) {\r\n\t\t\t\tlet sourceValues = betterResult({ sourceValues: type.sourceValues }, 'sourceValues', { context: model, args:[ model ]});\r\n\t\t\t\tlet result = getFlag(sourceValues, val);\r\n\t\t\t\tif(result)\r\n\t\t\t\t\tval = result;\r\n\t\t\t}\r\n\r\n\t\t\tif (isEmptyValue(val) && display.ifEmpty && !options.ignoreIfEmpty) {\r\n\t\t\t\tval = betterResult(display, 'ifEmpty', { context: model, args: [model, options] });\r\n\t\t\t} else if (!isEmptyValue(val) && display.ifNotEmpty && !options.ignoreIfNotEmpty) {\r\n\t\t\t\tval = display.ifNotEmpty;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t},\r\n\tonPropertyChange(property, opts = {}){\r\n\t\tif (this.modelSchema) {\r\n\t\t\tthis.modelSchema.triggerMethod('property:change', property, opts);\r\n\t\t}\r\n\t},\r\n\tgetDependedOn(name){\r\n\t\tlet depended = this.schema.dependOn;\r\n\t\tif (!depended) {\r\n\t\t\tdepended = [];\r\n\t\t} else if (_.isString(depended)) {\r\n\t\t\tdepended = depended.split(/\\s*,\\s*/g).map(name => ({ name }));\r\n\t\t} else if (!_.isArray(depended) && _.isObject(depended)) {\r\n\t\t\tdepended = _.map(depended, (value, name) => {\r\n\t\t\t\tvalue.name = name;\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdepended = [];\r\n\t\t}\r\n\t\tif(!name)\r\n\t\t\treturn depended;\r\n\t\telse \r\n\t\t\treturn _.findWhere(depended, { name });\r\n\t},\r\n\tisDependedOn(name){\r\n\t\tlet depended = this.getDependedOn(name);\r\n\t\treturn !!depended;\r\n\t},\r\n\tresetValues(opts = {}, depended = {}){\r\n\t\tlet { model, allValues, silent } = opts;\r\n\t\tlet dependedValue = allValues[depended.name];\r\n\t\tlet value = betterResult(depended, 'value', { args:[ dependedValue, this.modelSchema && this.modelSchema.getProperty(depended.name) ]});\r\n\t\tif (model) {\r\n\t\t\tmodel.set(this.name, value, { silent });\r\n\t\t} else if(allValues) {\r\n\t\t\tallValues[this.name] = value;\r\n\t\t}\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\nimport Schema from './schema.js';\r\nimport PropertySchema from './property-schema.js';\r\nimport { isEmptyValue } from 'bbmn-utils';\r\n\r\nexport default Schema.extend({\r\n\tconstructor(properties = {}, options = {}){\r\n\t\tthis.options = _.clone(options);\r\n\t\tthis.properties = {};\r\n\t\tSchema.apply(this,arguments);\r\n\t\tthis.setProperties(properties);\r\n\t},\r\n\tpropertySchema: PropertySchema,\r\n\t_createProperty(property){\r\n\t\tlet props = this.getProperties();\r\n\t\tlet order = _.size(props);\r\n\t\tlet Schema = this.getOption('propertySchema');\r\n\t\tlet options = { name: property.name, property, modelSchema: this, order };\r\n\t\treturn this.createProperty(Schema, options);\r\n\t},\r\n\tcreateProperty(Schema, options){\r\n\t\treturn new Schema(options);\r\n\t},\r\n\tsetProperties(properties){\r\n\t\treturn _.map(properties, (property, name) => {\r\n\t\t\tif(!_.isObject(property)) { return; }\r\n\r\n\t\t\tlet propertyName = _.isString(name) ? name : property.name;\r\n\t\t\tif (isEmptyValue(propertyName)) {\r\n\t\t\t\tthrow new Error('property name missing: ' + name);\r\n\t\t\t}\t\t\t\r\n\t\t\treturn this.setProperty(propertyName, property);\r\n\r\n\t\t});\r\n\t},\r\n\tgetProperties(){\r\n\t\treturn this.properties;\r\n\t},\r\n\tgetPropertiesArray(){\r\n\t\tlet props = this.getProperties();\r\n\t\treturn _.toArray(props)\r\n\t\t\t.sort((p1,p2) => p1.order - p2.order);\t\t\r\n\t},\r\n\tgetPropertiesNames(){\r\n\t\tlet props = this.getPropertiesArray();\r\n\t\treturn _.pluck(props, 'name');\r\n\t},\r\n\tgetProperty(name, { create = false } = {}){\r\n\t\tlet properties = this.getProperties() || {};\r\n\t\tlet property = properties[name];\r\n\t\tif(property || !create) {\r\n\r\n\t\t\treturn property;\r\n\t\t}\r\n\t\tproperty = this._createProperty(name);\r\n\t\treturn this.setProperty(name, property);\r\n\t},\r\n\t_setProperty(name, property){\r\n\t\tif(!_.isObject(property)){\r\n\t\t\tthrow new Error('property is not an object', property);\r\n\t\t}\r\n\t\tif(isEmptyValue(name)){\r\n\t\t\tthrow new Error('property has no name', property);\r\n\t\t}\r\n\r\n\t\tif (isEmptyValue(property.name)) {\r\n\t\t\tproperty.name = name;\r\n\t\t}\r\n\r\n\t\tif(!(property instanceof PropertySchema)){\r\n\t\t\tproperty = this._createProperty(property);\r\n\t\t}\r\n\r\n\t\tlet properties = this.getProperties();\r\n\t\tproperties[property.name] = property;\r\n\r\n\t\treturn property;\r\n\t},\r\n\tsetProperty(name, property) {\r\n\t\tif(_.isObject(name)){\r\n\t\t\tproperty = name;\r\n\t\t\tname = property.name;\r\n\t\t}\r\n\t\treturn this._setProperty(name, property);\r\n\t},\r\n\tgetValidation(name) {\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getValidation() || {};\r\n\t},\r\n\tgetType(name) {\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getType() || {};\r\n\t},\r\n\tgetLabel(name){\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getLabel() || '';\r\n\t},\r\n\tonPropertyChange(property, opts = {}){\r\n\t\tlet arr = this.getPropertiesArray();\r\n\t\t_.each(arr, prop => {\r\n\t\t\tlet depended = prop.getDependedOn(property);\r\n\t\t\tif (!depended) return;\r\n\t\t\tprop.resetValues(opts, depended);\r\n\t\t});\r\n\t}\r\n\r\n});\r\n","import _ from 'underscore';\r\nimport { BaseClass } from 'bbmn-core';\r\n\r\nconst ClassStore = BaseClass.extend({\t\r\n\tconstructor(options = {}){\r\n\t\tBaseClass.apply(this, arguments);\r\n\t\t_.extend(this, _.omit(options, 'createStore'));\r\n\t\tlet key = _.uniqueId('__classstore');\r\n\t\tthis._createStore = options.createStore;\r\n\t\tthis.instanceNameKey = options.instanceNameKey || key;\r\n\t\tthis.ctorNameKey = options.ctorNameKey || key;\r\n\t\tthis.items = {};\r\n\t},\r\n\tonExists: () => false,\r\n\tcreateStore(arg, ...rest){\r\n\t\tif (this.isExists(arg)) {\r\n\t\t\treturn this.onExists();\r\n\t\t}\r\n\t\tlet context = this.getCreateStoreContext(arg);\t\r\n\t\tlet store = this.buildStore(context, ...rest);\t\t\r\n\t\tthis.setStore(context, store);\r\n\t\treturn store;\r\n\t},\r\n\tgetStoreName(arg, generate){\r\n\t\tif(_.isString(arg) && arg !== '') {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\t\tlet store;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tstore = this.getStoreByCtor(arg);\r\n\t\t} else if (_.isObject(arg)) {\r\n\t\t\tstore = this.getStoreByInstance(arg);\r\n\t\t}\r\n\t\tif (store) {\r\n\t\t\treturn store.name;\r\n\t\t}\r\n\t\tif (generate) {\r\n\t\t\treturn _.uniqueId('modelSchema');\t\t\r\n\t\t}\r\n\t},\r\n\tisExists(arg){\r\n\t\treturn this.getStore(arg) != null;\r\n\t},\r\n\tgetStoreByName(name){\r\n\t\treturn this.items[name];\r\n\t},\t\r\n\tgetStoreByInstance(instance){\r\n\t\tlet item;\r\n\t\tlet name = instance[this.instanceNameKey];\r\n\t\tif(name) {\r\n\t\t\titem = this.getStoreByName(name);\r\n\t\t\tif(item){ return item; }\r\n\t\t}\r\n\t\treturn this.getStoreByCtor(instance.constructor);\r\n\t},\r\n\tgetStoreByCtor(ctor){\r\n\t\tlet item;\r\n\t\tlet name = ctor[this.ctorNameKey];\r\n\t\tif(name) {\r\n\t\t\titem = this.getStoreByName(name);\r\n\t\t\tif(item){ return item; }\r\n\t\t}\r\n\t\treturn _.find(this.items, f => f.ctor === ctor);\r\n\t},\r\n\tgetStore(arg){\r\n\t\tif (_.isString(arg)) {\r\n\t\t\treturn this.getStoreByName(arg);\r\n\t\t} else if (_.isFunction(arg)) {\r\n\t\t\treturn this.getStoreByCtor(arg);\r\n\t\t} else if(_.isObject(arg)) {\r\n\t\t\treturn this.getStoreByInstance(arg);\r\n\t\t}\r\n\t},\r\n\tsetStore({ name, ctor, instance } = {}, store){\r\n\t\tthis.items[name] = store;\r\n\t\tthis.setStoreNameOn(instance || ctor, name);\r\n\t},\r\n\tsetStoreNameOn(arg, name){\r\n\t\tif(_.isFunction(arg)) {\r\n\t\t\targ[this.ctorNameKey] = name;\r\n\t\t\treturn;\r\n\t\t} else if(_.isObject(arg)) {\r\n\t\t\targ[this.instanceNameKey] = name;\r\n\t\t\treturn this.setStoreNameOn(arg.constructor, name);\r\n\t\t}\r\n\t},\r\n\tgetCreateStoreContext(arg){\r\n\t\tlet ctor = _.isFunction(arg) \r\n\t\t\t? arg \r\n\t\t\t: _.isObject(arg) ? arg.constructor\r\n\t\t\t\t: undefined;\r\n\r\n\t\tlet instance = !_.isFunction(arg) && _.isObject(arg) && arg || undefined;\r\n\r\n\t\tlet name = this.getStoreName(arg, true);\r\n\t\t\r\n\t\treturn { instance, ctor, name };\r\n\t},\r\n});\r\n\r\nexport default ClassStore;\r\n","import _ from 'underscore';\r\nimport ModelSchema from './model-schema.js';\r\nimport ClassStore from '../class-store';\r\n\r\nconst store = new ClassStore({\r\n\tctorNameKey: '__schemaName',\r\n\tinstanceNameKey: '__schemaName',\r\n\tonExists: () => { throw new Error('Schema already exists'); },\r\n\tbuildStore(context, schema = {}, options) {\r\n\t\tlet { name, ctor } = context;\r\n\t\tif(!(schema instanceof ModelSchema) && _.isObject(schema)){\r\n\t\t\tschema = new ModelSchema(schema, options);\r\n\t\t} else {\r\n\t\t\tschema = new ModelSchema({}, options);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tname, ctor, schema\r\n\t\t};\r\n\t},\r\n\tget(arg) {\r\n\t\tlet cache = this.getStore(arg);\r\n\t\treturn cache && cache.schema || undefined;\r\n\t},\r\n\tinitialize(){\r\n\t\tlet store = this.createStore(...arguments);\r\n\t\treturn store.schema;\r\n\t}\r\n});\r\n\r\n\r\nexport default store;\r\n","import ModelSchemas from './store.js';\r\nexport default Model => Model.extend({\r\n\tgetSchema(){\r\n\t\treturn ModelSchemas.get(this);\r\n\t},\r\n\tgetPropertySchema(key){\r\n\t\tlet schema = this.getSchema();\r\n\t\tif(schema) {\r\n\t\t\treturn schema.getProperty(key);\r\n\t\t}\r\n\t},\r\n\tdisplay(key, options = {}){\r\n\t\tlet value = this.get(...arguments);\r\n\t\tlet property = this.getPropertySchema(key);\r\n\t\tif (property) {\t\t\t\r\n\t\t\treturn property.getDisplayValue(value, this, options);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tdisplayLabel(key){\r\n\t\tlet property = this.getPropertySchema(key);\r\n\t\tif (property) {\r\n\t\t\treturn property.getLabel(this);\r\n\t\t}\r\n\t}\r\n});\r\n","import { View, CollectionView } from 'backbone.marionette';\r\nimport { mix } from 'bbmn-utils';\r\nimport { cssClassModifiersMixin, customsMixin, emptyFetchMixin, improvedIndexesMixin, optionsMixin } from 'bbmn-mixins';\r\n\r\n\r\nfunction _initializeRenderOnModelChange(){\r\n\tlet romc = this.getOption('renderOnModelChange', { args: [this.model, this]});\r\n\tif (romc && this.model) {\r\n\t\tthis.listenTo(this.model, 'change', () => this.render());\r\n\t}\r\n}\r\n\r\n\r\nconst BaseView = mix(View)\r\n\t.with(\r\n\t\toptionsMixin, \r\n\t\tcssClassModifiersMixin,\r\n\t\t{\r\n\t\t\t_initializeRenderOnModelChange\r\n\t\t}\t\t\r\n\t);\r\n\r\n\r\n\r\nconst ExtView = BaseView.extend({\r\n\tconstructor(){\r\n\t\tBaseView.apply(this, arguments);\r\n\t\tthis._initializeRenderOnModelChange();\r\n\t},\r\n});\r\n\r\nconst BaseCollectionVIew = mix(CollectionView)\r\n\t.with(\r\n\t\toptionsMixin, \r\n\t\tcssClassModifiersMixin, \r\n\t\tcustomsMixin, \r\n\t\temptyFetchMixin, \r\n\t\timprovedIndexesMixin,\r\n\t\t{\r\n\t\t\t_initializeRenderOnModelChange\r\n\t\t}\r\n\t);\r\n\r\nconst ExtCollectionVIew = BaseCollectionVIew.extend({\r\n\tconstructor(){\r\n\t\tBaseCollectionVIew.apply(this, arguments);\r\n\t\tthis._initializeRenderOnModelChange();\r\n\t},\r\n});\r\n\r\nexport {\r\n\tExtView as View,\r\n\tExtCollectionVIew as CollectionView\r\n};\r\n","import _ from 'underscore';\r\nimport { View } from './views';\r\nimport { isEmptyValue } from 'bbmn-utils';\r\n\r\nconst templates = {\r\n\tdefault: _.template('<span><%= _v.getText() %></span>'),\r\n\tsmall: _.template('<small><%= _v.getText() %></small>'),\r\n\tlabeledText: _.template('<label><%= _v.getHeader() %></label><span><%= _v.getText() %></span><% if(_v.hasSmallText()){ %><small>_v.getSmallText()</small><% } %>'),\r\n\tfull: _.template('<% if(_v.hasTopText()){ %><i><%= _v.getTopText() %></i><% } %><span><%= _v.getText() %></span><% if(_v.hasSmallText()){ %><small><%= _v.getSmallText() %></small><% } %><% if(_v.hasBottomText()){ %><b><%= _v.getBottomText() %></b><% } %>')\r\n};\r\nconst AtomText = View.extend({\r\n\tautodetectTemplate: true,\r\n\tconstructor(){\r\n\t\tView.apply(this, arguments);\r\n\t\tthis.addCssClassModifier(\r\n\t\t\t'atom-text',\r\n\t\t\t(m,v) => 'atom-' + v.getType()\r\n\t\t);\t\t\r\n\t},\r\n\t_hasAnyProperty(...properties){\r\n\t\treturn _.some(properties, prop => {\r\n\t\t\treturn (!!this[prop] || this.options[prop]);\r\n\t\t});\r\n\t},\r\n\tisFull(){\r\n\t\treturn this.getOption('type') == 'full' || this._hasAnyProperty('topText','bottomText');\r\n\t},\r\n\tisSmall(){\r\n\t\treturn this.getOption('type') == 'small';\r\n\t},\r\n\tisLabeledText(){\r\n\t\treturn this.getOption('type') == 'labeledText' || this._hasAnyProperty('header');\r\n\t},\r\n\tgetType(){\r\n\t\tlet type = this.getOption('type') || 'default';\r\n\t\tif(type != 'default') { return type; }\r\n\t\tif(this.getOption('autodetectTemplate')) {\r\n\t\t\tif (this.isFull()) {\r\n\t\t\t\treturn 'full';\r\n\t\t\t} else if (this.isLabeledText()){\r\n\t\t\t\treturn 'labeledText';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn type;\r\n\t},\r\n\tgetTemplate(){\r\n\t\tlet type = this.getType();\r\n\t\treturn templates[type];\r\n\t},\r\n\t_getText(key){\r\n\t\treturn this.getOption(key, { args: [ this.model, this ] });\r\n\t},\r\n\r\n\thasHeader(){\r\n\t\treturn !isEmptyValue(this.getHeader());\r\n\t},\r\n\tgetHeader(){ return this._getText('header'); },\r\n\r\n\thasTopText(){\r\n\t\treturn !isEmptyValue(this.getTopText());\r\n\t},\r\n\tgetTopText(){ return this._getText('topText'); },\r\n\r\n\tgetText(){ return this._getText('text'); },\r\n\r\n\thasSmallText(){\r\n\t\treturn !isEmptyValue(this.getSmallText());\r\n\t},\r\n\tgetSmallText(){ return this._getText('smallText'); },\r\n\r\n\thasBottomText(){\r\n\t\treturn !isEmptyValue(this.getBottomText());\r\n\t},\t\r\n\tgetBottomText(){ return this._getText('bottomText'); },\r\n\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\t_v: this,\r\n\t\t};\r\n\t}\r\n}, {\r\n\tsmall(arg1, arg2){\r\n\t\tlet defs = { type: 'small' };\r\n\t\tlet uopts = {};\r\n\t\tif(_.isString(arg1) || !arg1) {\r\n\t\t\tdefs.text = arg1;\r\n\t\t\tuopts = arg2;\r\n\t\t} else {\r\n\t\t\tuopts = arg1;\r\n\t\t}\r\n\t\treturn new AtomText(_.extend({}, uopts, defs));\r\n\t},\r\n\tbyModel(model, options){\r\n\t\tlet keys =  ['header', 'topText', 'text', 'smallText', 'bottomText'];\r\n\t\tlet values = _.reduce(keys,(memo, key) => {\r\n\t\t\tif(model.has(key) && !isEmptyValue(model.get(key))) {\r\n\t\t\t\tmemo[key] = model.get(key);\r\n\t\t\t}\r\n\t\t\treturn memo;\r\n\t\t}, {});\r\n\t\treturn new AtomText(_.extend({}, values, options));\r\n\t}\r\n});\r\n\r\nexport default AtomText;\r\n","import _ from 'underscore';\r\nimport { BackboneView } from 'bbmn-core';\r\nimport { triggerMethod, getOption } from 'bbmn-utils';\r\n\r\n\r\nexport const TextView = BackboneView.extend({\r\n\tdisplayInsteadGet: true,\r\n\tshouldEscapeValue: true,\r\n\tconstructor(options = {}){\r\n\t\tthis.options = options;\r\n\t\tlet { text, value, shouldEscapeValue, property, schema, customValue } = options;\r\n\t\tif (!property && schema) {\r\n\t\t\tproperty = schema.name;\r\n\t\t}\r\n\t\tthis.setValue(text || value, { shouldEscapeValue, preventRender: true });\r\n\r\n\t\t\r\n\t\tBackboneView.apply(this, arguments);\r\n\t\tif (this.model && property) {\r\n\t\t\tthis.customValue = customValue;\r\n\t\t\tthis.schema = schema;\r\n\t\t\tthis.property = property;\r\n\t\t\tthis.applyPropertyValue({ preventRender: true });\r\n\t\t\tproperty && this.listenTo(this.model, 'change:' + property, this.applyPropertyValue);\r\n\t\t}\r\n\t},\r\n\tgetOption(){\r\n\t\treturn getOption(this, ...arguments);\r\n\t},\r\n\trender(){\r\n\t\tthis.setNodeValue();\r\n\t},\r\n\tsetValue(value, opts = {}){\r\n\t\t\r\n\t\tthis.value = value;\r\n\t\tlet { preventRender, shouldEscapeValue } = opts;\r\n\r\n\t\tif(shouldEscapeValue != null){\r\n\t\t\tthis.shouldEscapeValue = shouldEscapeValue;\r\n\t\t}\r\n\r\n\t\tif (!preventRender) {\r\n\t\t\tthis.setNodeValue();\r\n\t\t}\r\n\t},\r\n\tgetValue({ asIs, shouldEscapeValue } = {}){\r\n\t\tlet value = this.value;\r\n\t\tif (asIs){\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t\r\n\t\tif(!_.isString(value)) {\r\n\t\t\tvalue = value == null ? '' : value.toString();\r\n\t\t}\r\n\r\n\t\tif (shouldEscapeValue == null) {\r\n\t\t\tshouldEscapeValue = this.shouldEscapeValue;\r\n\t\t}\r\n\r\n\t\tif (shouldEscapeValue) {\r\n\t\t\tvalue = _.escape(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tsetNodeValue() {\r\n\t\tthis.el.innerHTML = this.getValue();\r\n\t},\r\n\tapplyPropertyValue(opts){\r\n\t\tlet value = this.getPropertyValue();\r\n\t\tthis.setValue(value, opts);\r\n\t},\r\n\tgetPropertyValue(){\r\n\t\t\r\n\t\tif (_.isFunction(this.customValue)) {\r\n\t\t\treturn this.customValue.call(this, this.property, this.model, this);\r\n\t\t}\r\n\r\n\t\tlet val = this.model.get(this.property);\r\n\t\tlet useDisplay = this.getOption('displayInsteadGet');\r\n\t\tif (useDisplay && this.schema) {\r\n\t\t\treturn this.schema.getDisplayValue(val, this.model, { allValues: this.getOption('allValues') });\r\n\t\t} else {\r\n\t\t\treturn val;\r\n\t\t}\r\n\t},\r\n\ttriggerMethod,\r\n\tdestroy(){\r\n\t\tif (this._isDestroyed || this._isDestroying) { return this; }\r\n\t\tthis._isDestroying = true;\r\n\t\t\r\n\t\tthis.off();\r\n\r\n\t\tthis.remove();\r\n\r\n\t\tthis._isDestroyed = true;\r\n\t\r\n\t\treturn this;\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\nimport { isEmptyValue } from 'bbmn-utils';\r\n\r\nconst rules = [\r\n\t{\r\n\t\tname: 'required',\r\n\t\tmessage: 'required',\r\n\t\tvalidate: (value) => {\r\n\t\t\tif (isEmptyValue(value)) {\r\n\t\t\t\treturn 'required';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname: 'email',\r\n\t\tmessage: 'not a email',\r\n\t\tvalidate: (value) => {\r\n\t\t\t\r\n\t\t\tif(isEmptyValue(value)) { return; }\r\n\r\n\t\t\tif (!_.isString(value)) {\r\n\t\t\t\treturn 'type:mismatch';\r\n\t\t\t}\r\n\r\n\t\t\tlet chunks = value.split('@');\r\n\t\t\tlet left = chunks[0];\r\n\t\t\tlet right = chunks[1];\r\n\t\t\r\n\t\t\tif(\r\n\t\t\t\tchunks.length != 2\r\n\t\t\t\t|| !/^[a-z0-9\\-_.+]+$/gmi.test(left)\r\n\t\t\t\t|| !/^[a-z0-9\\-_]+\\.[a-z0-9\\-_]+(\\.[a-z0-9\\-_]+)*$/gmi.test(right)\r\n\t\t\t) {\r\n\t\t\t\treturn 'pattern:mismatch';\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'valueIn',\r\n\t\tmessage: 'given value is not one of allowed values',\r\n\t\tvalidate: (value, { valueIn } = {}) => {\r\n\t\t\tif(_.isArray(valueIn) && valueIn.indexOf(value) === -1) {\r\n\t\t\t\treturn 'value:not:in';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'valueNotIn',\r\n\t\tmessage: 'given value is one of forbiden values',\r\n\t\tvalidate: (value, { valueNotIn } = {}) => {\r\n\t\t\tif(_.isArray(valueNotIn) && valueNotIn.indexOf(value) > -1) {\r\n\t\t\t\treturn 'value:in';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'shouldBeEqual',\r\n\t\tmessage: 'given value is not equal',\r\n\t\tvalidate: (value, { shouldBeEqual, allValues } = {}) => {\r\n\t\t\t\r\n\t\t\tlet compare = _.isFunction(shouldBeEqual) \r\n\t\t\t\t? shouldBeEqual(allValues) \r\n\t\t\t\t: shouldBeEqual;\r\n\r\n\t\t\tif (value !== compare) {\r\n\t\t\t\treturn 'value:not:equal';\r\n\t\t\t}\r\n\t\t}\r\n\t},\t\r\n\t{\r\n\t\tname:'shouldNotBeEqual',\r\n\t\tmessage: 'given value is forbiden',\r\n\t\tvalidate: (value, { shouldNotBeEqual, allValues } = {}) => {\r\n\r\n\t\t\tlet compare = _.isFunction(shouldNotBeEqual) \r\n\t\t\t\t? shouldNotBeEqual(allValues) \r\n\t\t\t\t: shouldNotBeEqual;\r\n\r\n\t\t\tif (value !== compare) {\r\n\t\t\t\treturn 'value:equal';\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(_.isFunction(shouldNotBeEqual)) {\r\n\t\t\t\treturn value !== shouldNotBeEqual(allValues);\r\n\t\t\t} else {\r\n\t\t\t\treturn value !== shouldNotBeEqual;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'minLength',\r\n\t\tmessage: ({ ruleValue } = {}) => 'length is less than ' + ruleValue,\r\n\t\tvalidate: (value, { minLength } = {}) => {\r\n\t\t\tif (_.isNumber(minLength) && (value || '').toString().length < minLength) {\r\n\t\t\t\treturn 'min:length';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'maxLength',\r\n\t\tmessage: ({ ruleValue } = {}) => 'length is greater than ' + ruleValue,\r\n\t\tvalidate: (value, { maxLength } = {}) => {\r\n\t\t\tif (_.isNumber(maxLength) && (value || '').toString().length > maxLength) {\r\n\t\t\t\treturn 'max:length';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'minValue',\r\n\t\tmessage: ({ ruleValue } = {}) => 'value is less than ' + ruleValue,\r\n\t\tvalidate: (value, { minValue } = {}) => {\r\n\t\t\tif (_.isNumber(minValue)) {\r\n\t\t\t\tlet numValue = parseFloat(value, 10);\r\n\t\t\t\tif (isEmptyValue(numValue) || numValue < minValue) {\r\n\t\t\t\t\treturn 'min:value';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'maxValue',\r\n\t\tmessage: ({ ruleValue } = {}) => 'value is greater than ' + ruleValue,\r\n\t\tvalidate: (value, { maxValue } = {}) => {\r\n\t\t\tif (_.isNumber(maxValue)) {\r\n\t\t\t\tlet numValue = parseFloat(value, 10);\r\n\t\t\t\tif (isEmptyValue(numValue) || numValue > maxValue) {\r\n\t\t\t\t\treturn 'max:value';\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'pattern',\r\n\t\tmessage: 'value is not in pattern',\r\n\t\tvalidate: (value, { pattern } = {}) => {\r\n\t\t\tvalue = (value || '').toString();\r\n\r\n\t\t\tif(_.isString(pattern) && !isEmptyValue(pattern)) {\r\n\t\t\t\tpattern = new RegExp(pattern);\r\n\t\t\t}\r\n\t\t\tif(!_.isRegExp(pattern)) { return; }\r\n\r\n\t\t\tif (!pattern.test(value)) {\r\n\t\t\t\treturn 'pattern';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname: 'validate',\r\n\t\tvalidate: (value, options = {}) => {\r\n\t\t\tlet { ruleValue } = options;\r\n\t\t\tif(!_.isFunction(ruleValue)) return;\r\n\t\t\treturn ruleValue(value, options);\r\n\t\t},\r\n\t},\t\r\n];\r\n\r\nreIndex(false);\r\n\r\nexport function reIndex(sortBefore = true) {\r\n\tif (sortBefore) {\r\n\t\trules.sort((a,b) => a.index - b.index);\r\n\t}\r\n\t_.each(rules, (rule, index) => {\r\n\t\trule.index = index;\r\n\t});\r\n}\r\n\r\nexport default rules;\r\n","import _ from 'underscore';\r\nimport rules from './rules.js';\r\nimport { isEmptyValue } from 'bbmn-utils';\r\n\r\nfunction normalizeValidationContext(context){\r\n\tif (context === 'required') {\r\n\t\treturn { required: true };\r\n\t} else if(_.isFunction(context)) {\r\n\t\treturn { validate: context };\r\n\t} else if(_.isObject(context)) {\r\n\t\treturn context;\r\n\t}\r\n}\r\n\r\nfunction getRuleContexts(rule = {}){\r\n\tlet founded = _.reduce(rule, (taken, ruleValue, name) => {\r\n\t\tlet found = _.findWhere(rules, { name });\r\n\t\tif(!found) return taken;\r\n\r\n\t\tlet message = rule[name + 'Message'];\r\n\t\ttaken.push({\r\n\t\t\trule: found,\r\n\t\t\truleValue,\r\n\t\t\tmessage,\r\n\t\t\tindex: found.index\r\n\t\t});\r\n\r\n\t\treturn taken;\r\n\r\n\t}, []);\r\n\tfounded.sort((a,b) => a.index - b.index);\r\n\treturn founded;\r\n}\r\n\r\nfunction check(value, ruleContext = {}) {\r\n\t\r\n\tlet { rule = {}, ruleValue, allValues, errors = [] } = ruleContext;\r\n\tif (rule.skipIfInvalid && errors.length) {\r\n\t\treturn Promise.reject();\r\n\t}\r\n\tlet message = ruleContext.message || rule.message;\r\n\tlet buildMessage = _.isFunction(message) ? message : ({ error } = {}) => isEmptyValue(message) ? error : message;\r\n\r\n\tlet validate = rule.validate;\r\n\tlet validateOptions = {\r\n\t\truleName: rule.name,\r\n\t\truleValue,\r\n\t\t[rule.name]: ruleValue,\r\n\t\tallValues,\r\n\t\tmessage: buildMessage({ value, allValues, ruleValue }),\r\n\t\terrors,\r\n\t};\r\n\tif (!_.isFunction(validate)) return Promise.resolve(value);\r\n\r\n\t\r\n\tlet result = validate(value, validateOptions);\r\n\r\n\tif (!result) {\r\n\t\treturn Promise.resolve(value);\r\n\t} else if(result && _.isFunction(result.then)) {\r\n\t\treturn result.then(\r\n\t\t\t() => Promise.resolve(value),\r\n\t\t\t(error) => Promise.reject(buildMessage({ error, value, allValues, ruleValue }))\r\n\t\t);\r\n\t} else {\r\n\t\treturn Promise.reject(buildMessage({ error: result, value, allValues, ruleValue }));\r\n\t}\r\n}\r\n\r\n\r\n\r\nexport default function validate(value, rule, { allValues = {} } = {}){\r\n\trule = normalizeValidationContext(rule);\r\n\tlet contexts = getRuleContexts(rule);\r\n\t\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet errors = [];\r\n\r\n\t\tlet rulesPromise = _.reduce(contexts, (promise, ruleContext) => {\r\n\r\n\t\t\tpromise = promise.then(() => {\r\n\t\t\t\treturn check(value, _.extend({}, ruleContext, { allValues, errors }));\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tif(error != null)\r\n\t\t\t\t\terrors.push(error);\r\n\t\t\t});\r\n\r\n\t\t\treturn promise;\r\n\r\n\t\t}, Promise.resolve(value));\r\n\r\n\t\trulesPromise.then(() => {\r\n\t\t\tif(errors.length){\r\n\t\t\t\treject(errors);\r\n\t\t\t} else {\r\n\t\t\t\tresolve(value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\n\r\n\r\n","import _ from 'underscore';\r\n\r\nimport rules, { reIndex } from './rules.js';\r\n\r\nimport { isEmptyValue } from 'bbmn-utils';\r\n\r\nimport validate from './validate.js';\r\n\r\nfunction removeRule(name){\r\n\tlet found = _.findIndex(rules, { name });\r\n\tif (found === -1) return;\r\n\tlet removed = rules.splice(found, 1);\r\n\treIndex();\r\n\treturn removed;\r\n}\r\n\r\nfunction setRule(rule){\r\n\tif (rule.index == null) {\r\n\t\trule.index = rules.length;\r\n\t}\r\n\trules.push(rule);\r\n\treIndex();\r\n\treturn rule;\r\n}\r\n\r\nexport default {\r\n\tsetRule(name, rule = {}){\r\n\t\tif(_.isObject(name)) {\r\n\t\t\trule = name;\r\n\t\t\tname = rule.name;\r\n\t\t}\r\n\r\n\t\tif(isEmptyValue(name)) {\r\n\t\t\tthrow new Error('rule name not specified');\r\n\t\t}\r\n\r\n\t\tif(rule == null){\r\n\t\t\treturn removeRule(name);\r\n\t\t} else if (!_.isObject(rule)) {\r\n\t\t\tthrow new Error('validation rule must be an object');\r\n\t\t} else {\r\n\t\t\tif (rule.name != name) {\r\n\t\t\t\trule.name = name;\r\n\t\t\t}\r\n\t\t\treturn setRule(rule);\r\n\t\t}\r\n\t},\r\n\tremoveRule(name) {\r\n\t\treturn removeRule(name);\r\n\t},\r\n\tgetRule(name){\r\n\t\treturn _.findWhere(rules, { name });\r\n\t},\r\n\tsetMessage(name, message){\r\n\t\tif(!_.isString(name) || isEmptyValue(name)) {\r\n\t\t\tthrow new Error('name must be not empty string');\r\n\t\t}\r\n\t\tif(!(_.isString(message) || _.isFunction(message))) {\r\n\t\t\tthrow new Error('message must be not empty string or a function returning a string');\r\n\t\t}\r\n\t\tlet rule = _.findWhere(rules, { name });\r\n\t\tif (!rule) { return; }\r\n\t\trule.message = message;\r\n\t},\r\n\tsetMessages(hash = {}){\r\n\t\t_.each(hash, (message, name) => this.setMessage(name, message));\r\n\t},\r\n\tvalidate,\r\n\t_rules: rules,\r\n};\r\n","import { Model } from 'bbmn-core';\r\nimport _ from 'underscore';\r\n\r\n/*\r\nBy default expects token on initialize\r\nnew User({...}, { token });\r\nyou can use bbmn-components bearer-token for that\r\nor something else\r\nbut token should have this defined properties:\r\n\ttoken.ready - promise\r\n\ttoken.hasToken() - should return true or flase\r\n\ttoken.update() - invokes on user change event, should receive refreshed token\r\n\r\n*/\r\nexport default Model.extend({\r\n\t\r\n\tshouldRequestOnInitialize: true,\r\n\r\n\tconstructor(hash, opts){\r\n\t\tthis._waitFor = [];\r\n\t\tthis.initializeToken(opts);\r\n\t\tModel.apply(this, arguments);\r\n\r\n\t\tif (this.shouldRequestOnInitialize) {\r\n\t\t\tthis.getReady();\r\n\t\t}\r\n\t},\r\n\tinitializeToken(opts = {}){\r\n\t\tlet { token } = opts;\r\n\t\tif (!token) return;\r\n\t\tthis.listenTo(token, 'changed', this.refresh);\r\n\t\tthis.token = token;\r\n\t\ttoken.ready && this._waitFor.push(token.ready);\r\n\t},\r\n\tgetReady(){\r\n\t\tif(this.ready) return this.ready;\r\n\t\t\r\n\r\n\t\tthis.ready = new Promise((resolve) => {\r\n\t\t\tthis.once('changed', () => resolve());\r\n\t\t\tPromise.all(this._waitFor).then(\r\n\t\t\t\t() => this.refresh(),\r\n\t\t\t\t() => this.reflectChanges({ clear: true })\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn this.ready;\r\n\t},\r\n\tlogoff(options){\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tthis.once('changed', () => resolve());\r\n\t\t\tif (this.token) {\r\n\t\t\t\tthis.token.update(undefined, options);\r\n\t\t\t} else {\r\n\t\t\t\tthis.reflectChanges(_.extend({}, options, { clear: true }));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t//override this for getting auth status\r\n\tgetState(){\r\n\t\treturn this.isLogged() ? 'auth' : 'anonym';\r\n\t},\r\n\tisLogged(){\r\n\t\treturn this.get('authenticated') === true;\r\n\t},\r\n\thasToken(){\r\n\t\treturn this.token && this.token.hasToken();\r\n\t},\r\n\trefresh(tokenOptions){\t\t\r\n\t\tif (this._refreshing) { return this._refreshing; }\r\n\t\tlet promise = this._refreshing = new Promise((resolve) => {\r\n\t\t\tif (!this.hasToken()) {\r\n\t\t\t\tthis.reflectChanges(_.extend({}, tokenOptions, { clear: true }));\r\n\t\t\t\tresolve();\r\n\t\t\t} else {\r\n\t\t\t\tthis.fetch().then(() => {\r\n\t\t\t\t\tthis.reflectChanges(tokenOptions);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, () => {\t\t\t\t\r\n\t\t\t\t\tthis.reflectChanges(_.extend({}, tokenOptions, { store: false }));\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t\tpromise.then(() => {\r\n\t\t\tdelete this._refreshing;\r\n\t\t});\r\n\t\treturn promise;\r\n\t},\r\n\treflectChanges(opts = {}){\r\n\t\tlet { silent, clear, store = true } = opts;\r\n\t\tclear && this.clear();\r\n\t\tstore && this.store(clear);\r\n\t\tlet options = _.omit(opts, 'clear', 'store');\r\n\t\t!silent && this.trigger('changed', this, options);\r\n\t},\r\n\tisMe(arg){\r\n\t\tlet me = this.get(this.idAttribute);\r\n\t\treturn _.isEqual(me, arg);\r\n\t},\r\n\t// implement by your own\r\n\tstore(){},\r\n});\r\n","import _ from 'underscore';\r\n\r\nimport { Model, ajax as _nativeAjax } from 'bbmn-core';\r\nimport Backbone from 'backbone';\r\n\r\nlet nativeAjax = _nativeAjax;\r\n\r\nconst tokenizedAjax = function(...args){\r\n\tlet options;\r\n\r\n\tif(args && args.length == 1 && _.isObject(args[0])){\r\n\t\toptions = args[0];\r\n\t}\r\n\tif(args && args.length == 2 && !_.isObject(args[0]) && _.isObject(args[1])){\r\n\t\toptions = args[1];\r\n\t}\r\n\r\n\toptions && (options.headers = _.extend({}, options.headers, this.getAjaxHeaders()));\r\n\r\n\treturn nativeAjax.apply(null, args);\r\n};\r\n\r\n\r\nconst Token = Model.extend({\r\n\r\n\ttokenAttribute: 'access_token',\r\n\trefreshTokenAttribute: 'refresh_token',\r\n\tendPoint: 'auth/token',\r\n\tsecondsOffset: 0,\r\n\r\n\tshouldRequestOnInitialize: true,\r\n\r\n\tconstructor(){\r\n\t\tthis.ajaxHeaders = {};\r\n\t\tthis.flows = {};\r\n\t\tthis.initializeFlows();\r\n\t\tthis.setExpiration(null);\r\n\r\n\t\tModel.apply(this, arguments);\r\n\r\n\t\tif (this.shouldRequestOnInitialize) {\r\n\t\t\tthis.getReady();\r\n\t\t}\r\n\t},\r\n\r\n\tgetReady(){\r\n\t\tif(this.ready) return this.ready;\r\n\t\t\r\n\t\tif (!this.hasToken()) {\r\n\t\t\tthis.ready = Promise.resolve();\r\n\t\t} else {\r\n\t\t\tthis.ready = this.refresh({force: true}).catch(() => {\r\n\t\t\t\tthis.update(null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.ready;\r\n\t},\r\n\t\r\n\r\n\tinitializeFlows(){\r\n\r\n\t\tthis.setFlow('password', {\r\n\t\t\turl: this.endPoint,\r\n\t\t\tmethod: 'POST'\r\n\t\t});\r\n\t\tthis.setFlow('refresh', {\r\n\t\t\turl: this.endPoint,\r\n\t\t\tmethod: 'POST'\r\n\t\t});\r\n\r\n\t},\r\n\tgetFlow(key){\r\n\t\treturn _.clone(this.flows[key] || {});\r\n\t},\r\n\tsetFlow(key, value){\r\n\t\tthis.flows[key] = value;\r\n\t},\r\n\r\n\r\n\r\n\thasToken(){\r\n\t\treturn this.getToken() != null;\r\n\t},\r\n\tgetToken(){\r\n\t\treturn this.get(this.tokenAttribute);\r\n\t},\r\n\r\n\tgetRefreshToken(){\r\n\t\treturn this.get(this.refreshTokenAttribute);\r\n\t},\r\n\r\n\tgetAjaxHeaders(){\t\t\r\n\t\treturn this.ajaxHeaders;\r\n\t},\t\r\n\r\n\tparse(data){\r\n\t\treturn data;\r\n\t},\r\n\r\n\tfetch(options = {}, userOptions){\r\n\t\tif(this._fetching) return this._fetching;\t\t\r\n\t\tthis._fetching = nativeAjax(options).then(\r\n\t\t\t(json) => {\r\n\r\n\t\t\t\tlet parsed = this.parse(_.clone(json));\r\n\t\t\t\tthis.update(parsed, userOptions);\r\n\t\t\t\tdelete this._fetching;\r\n\t\t\t\treturn Promise.resolve(json);\r\n\t\t\t}, \r\n\t\t\t(xhr) => {\r\n\t\t\t\t\r\n\t\t\t\tdelete this._fetching;\r\n\t\t\t\t\r\n\t\t\t\toptions.clearOnFail !== false \r\n\t\t\t\t\t&& this.update(null, userOptions);\r\n\r\n\t\t\t\tlet error = this.handleError(xhr);\r\n\t\t\t\tif(error){\r\n\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(xhr);\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\treturn this._fetching;\r\n\t},\r\n\thandleError(){},\r\n\tupdate(hash, opts = {}){\r\n\t\tlet { silent } = opts;\r\n\t\tif (hash == null) {\r\n\r\n\t\t\tthis.clear(opts);\r\n\r\n\t\t} else {\r\n\t\t\tlet fullhash = _.extend({}, this.attributes, hash);\r\n\t\t\tlet unset = [];\r\n\t\t\tlet shouldUnset = !!opts.unset;\r\n\t\t\tlet setHash = _(fullhash).reduce((memo, value, key) => {\r\n\t\t\t\tif (key in hash) {\r\n\t\t\t\t\tmemo[key] = value;\r\n\t\t\t\t} else if (shouldUnset) {\r\n\t\t\t\t\tunset.push(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmemo[key] = undefined;\r\n\t\t\t\t}\r\n\t\t\t\treturn memo;\r\n\t\t\t}, {});\r\n\r\n\t\t\tsetHash = this.parse(setHash);\r\n\t\t\tthis.set(setHash, { silent });\r\n\t\t\t_(unset).each(key => this.unset(key, { silent }));\r\n\t\t}\r\n\r\n\t\tlet reflectOptions = _.extend({}, _.omit(opts, 'silent', 'store'));\r\n\t\tthis.reflectTokenChanges(reflectOptions);\r\n\r\n\t},\r\n\r\n\treplaceBackboneAjax(){\t\t\r\n\t\tif(!this.hasToken())\r\n\t\t\tBackbone.ajax = nativeAjax;\r\n\t\telse\r\n\t\t\tBackbone.ajax = (...args) => this.ajax(...args);\r\n\t},\r\n\tupdateAjaxHeaders(token){\r\n\t\ttoken || (token = this.getToken());\r\n\t\tlet headers = this.getAjaxHeaders();\r\n\t\tif (token) {\r\n\t\t\theaders.Authorization = 'Bearer ' + token;\r\n\t\t\theaders.Accept = 'application/json';\r\n\t\t} else {\r\n\t\t\tdelete headers.Authorization;\r\n\t\t}\r\n\t},\r\n\r\n\t//implement by your own\r\n\tstoreToken(){},\r\n\r\n\treflectTokenChanges(opts = {}){\r\n\t\tlet { silent, store = true } = opts;\r\n\t\tthis.updateAjaxHeaders();\r\n\t\tthis.replaceBackboneAjax();\r\n\t\tif (store)\r\n\t\t\tthis.storeToken();\r\n\t\tif (!silent) {\r\n\t\t\tlet options = _.omit(opts, 'silent', 'store');\r\n\t\t\tthis.trigger('changed', options);\r\n\t\t}\r\n\t},\r\n\r\n\tajax(...args){\r\n\t\treturn this.refresh().then(\r\n\t\t\t() => tokenizedAjax.apply(this, args),\r\n\t\t\terror => Promise.reject(error)\r\n\t\t);\r\n\t},\t\r\n\trefresh(opts = {}){\t\t\r\n\r\n\t\t// if token is fresh enough and there is no force refresh\r\n\t\t// pass\r\n\t\tif (!this.isExpired() && !opts.force) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\tlet options = this.getFlow('refresh');\r\n\t\toptions.data = this.getRefreshTokenData();\r\n\t\treturn this.fetch(options);\r\n\t},\r\n\tgetRefreshTokenData(){\r\n\t\treturn {\r\n\t\t\t'grant_type':'refresh_token',\r\n\t\t\t'refresh_token': this.getRefreshToken(),\r\n\t\t};\r\n\t},\r\n\r\n\tsetExpiration(arg){\r\n\r\n\t\tif (arg === null) {\r\n\t\t\tthis.expiresAt = null;\r\n\t\t}\r\n\r\n\t\tlet date;\r\n\t\tlet now = new Date();\r\n\r\n\t\tif (_.isDate(arg)) {\r\n\t\t\tdate = arg;\r\n\t\t} else if(_.isObject(arg)) {\r\n\t\t\tdate = new Date();\r\n\t\t\t\r\n\t\t\tlet { seconds, minutes, hours, days } = arg;\r\n\t\t\tdate.setDate(date.getDate() + (days || 0));\r\n\t\t\tdate.setHours(date.getHours() + (hours || 0));\r\n\t\t\tdate.setMinutes(date.getMinutes() + (minutes || 0));\r\n\t\t\tdate.setSeconds(date.getSeconds() + (seconds || 0));\r\n\t\t}\r\n\r\n\t\tif(!_.isDate(date) || isNaN(date.valueOf()) || date < now) {\r\n\t\t\tdate = new Date();\r\n\t\t\tdate.setSeconds(now.getSeconds() + 90);\r\n\t\t}\r\n\r\n\t\tthis.expiresAt = date;\r\n\t},\r\n\tgetExpiration(){\r\n\t\treturn this.expiresAt;\r\n\t},\r\n\tisExpired(){\r\n\t\tlet date = this.getExpiration();\r\n\t\tif(!_.isDate(date) || isNaN(date.valueOf()))\r\n\t\t\treturn true;\r\n\t\treturn date.valueOf() < Date.now() + (this.secondsOffset * 1000);\r\n\t},\r\n\tlogin(username, password, opts){\r\n\r\n\t\tlet options = this.getFlow('password');\r\n\t\toptions.data = { grant_type:'password', username, password };\r\n\t\toptions.clearOnFail = false;\r\n\t\treturn this.fetch(options, opts);\r\n\r\n\t},\r\n\r\n});\r\n\r\nToken.setNativeAjax = function(arg){\r\n\tlet old = nativeAjax;\r\n\tnativeAjax = arg;\r\n\treturn old;\r\n};\r\n\r\nexport default Token;\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nimport { Events, BaseClass } from 'bbmn-core';\r\nimport { triggerMethod, getOption, mergeOptions, mix } from 'bbmn-utils';\r\n\r\nconst Stack = mix(BaseClass).with(Events).extend({\r\n\r\n\tdestroyOnRemove: true,\r\n\tremoveOnOutsideClick: true,\r\n\tremoveOnEsc: true,\r\n\tclearBeforeAdd: false,\r\n\r\n\tconstructor(options){\r\n\t\tthis.cid = _.uniqueId('stack');\r\n\t\tthis.unremovableKey = `_${this.cid}_preventRemove`;\r\n\t\tthis.options = options;\r\n\t\tthis.stack = [];\r\n\t\tBaseClass.apply(this, arguments);\t\t\t\r\n\t},\r\n\r\n\r\n\r\n\r\n\tadd(view, options){\r\n\t\tif(!_.isObject(view)) { return; }\r\n\t\tif (this.getOption('clearBeforeAdd')) {\r\n\t\t\tthis.removeAll();\r\n\t\t}\r\n\t\tthis.triggerMethod('before:add');\r\n\r\n\t\tthis.stack.push(view);\r\n\t\tthis._setupView(view, options);\r\n\r\n\t\tthis._stackChanged(1, view);\r\n\r\n\t},\r\n\t_setupView(view, { preventRemove } = {}){\r\n\t\tif (preventRemove) {\r\n\t\t\tlet key = this.getUnremovableKey();\r\n\t\t\tview[key] = true;\r\n\t\t}\r\n\t\tthis.listenToOnce(view, 'destroy', () => this._removeView(view, { selfDestroy: true }));\t\t\r\n\t},\t\r\n\r\n\tgetLast(){\r\n\t\treturn _.last(this.stack);\r\n\t},\r\n\r\n\r\n\tremoveLast(){\r\n\t\tlet view = this.getLast();\r\n\t\tthis.remove(view);\r\n\t},\r\n\tdestroyLast(){\r\n\t\tlet view = this.getLast();\r\n\t\tthis.remove(view, { destroy: true });\r\n\t},\r\n\tremove(view, { destroy } = {}){\r\n\t\tlet destroyOnRemove = this.getOption('destroyOnRemove');\r\n\t\tlet removed = this._removeView(view);\r\n\t\tif (removed && (destroy || destroyOnRemove)) {\r\n\t\t\tthis._destroyView(view);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeView(view, { selfDestroy } = {}){\r\n\t\tif (!_.isObject(view)) { return; }\r\n\r\n\t\tif (this.isViewUnremovable(view, selfDestroy)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._cleanUpView(view);\r\n\r\n\t\tlet index = this.stack.indexOf(view);\r\n\t\tif (index === -1) return;\r\n\r\n\t\tif (index == this.stack.length - 1)\r\n\t\t\tthis.stack.pop();\r\n\t\telse\r\n\t\t\tthis.stack.splice(index, 1);\r\n\t\t\t\r\n\t\tthis._stackChanged(-1);\r\n\r\n\t\treturn view;\r\n\t},\r\n\r\n\t_cleanUpView(view){\r\n\t\tthis.stopListening(view);\r\n\t\tdelete view[this.getUnremovableKey()];\r\n\t},\r\n\r\n\t_destroyView(view) {\r\n\t\tif (_.isObject(view) && _.isFunction(view.destroy)) { \r\n\t\t\tview.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t_stackChanged(change, view){\r\n\t\tif (change > 0) {\r\n\t\t\tthis._setDocumentListeners();\t\t\t\r\n\t\t\tthis.triggerMethod('add', view);\r\n\t\t} else {\r\n\t\t\tthis._unsetDocumentListeners();\t\t\t\r\n\t\t\tthis.triggerMethod('remove', view);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tUnremovable view methods\r\n\t\tsometimes you want to prevent view to be removed from the stack\t\t\r\n\t*/\r\n\tgetUnremovableKey(){\r\n\t\treturn this.getOption('unremovableKey');\r\n\t},\r\n\t// options is for internal use only.\r\n\t// self destroy flag filled when a view destroyed outside the stack\r\n\tisViewUnremovable(view, { selfDestroy } = {}){\r\n\t\tif (selfDestroy) return false;\r\n\t\tlet key = this.getUnremovableKey();\r\n\t\treturn view[key];\r\n\t},\t\t\r\n\r\n\t/*\r\n\t\tDOM listeners logic\r\n\t\t- esc handler\r\n\t\t- outside click handler\r\n\t*/\r\n\tgetViewDomElement(view){\r\n\t\treturn view && view.el;\r\n\t},\r\n\tisElementOutsideOfView(eventElement, view){\r\n\t\tlet viewElement = this.getViewDomElement(view);\r\n\t\tif (!viewElement) return;\r\n\t\treturn !$.contains(viewElement, eventElement);\r\n\t},\r\n\tgetViewIfElementOutside(eventElement){\r\n\t\tlet view = this.getLast();\r\n\t\tif (!view) return;\r\n\t\tif(this.isElementOutsideOfView(eventElement, view)) {\r\n\t\t\treturn view;\r\n\t\t}\r\n\t},\r\n\toutsideClickHandler(event){\r\n\t\tif (!this.stack.length) { return; }\r\n\r\n\t\tlet view = this.getViewIfElementOutside(event.target);\r\n\t\tif (!view) { return; }\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\tthis.remove(view);\r\n\r\n\t},\r\n\tescapePressHandler(event){\r\n\t\tif (!this.stack.length || event.keyCode !== 27 ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\tthis.removeLast();\r\n\r\n\t},\r\n\r\n\t_setDocumentListeners(){\r\n\t\tif (this._documentListeners || !this.stack.length) return;\r\n\t\tlet $doc = this.getDocument();\r\n\t\tif (this._shouldRemoveOnEsc()) {\t\t\t\r\n\t\t\tthis._escapePressHandler = _.bind(this.escapePressHandler, this);\r\n\t\t\t$doc.on('keyup', this._escapePressHandler);\r\n\t\t\tthis.triggerMethod('dom:listeners:escape:on');\r\n\t\t}\r\n\t\tif (this._shouldRemoveOnOutsideClick()) {\r\n\t\t\tthis._outsideClickHandler = _.bind(this.outsideClickHandler, this);\r\n\t\t\t$doc.on('click', this._outsideClickHandler);\r\n\t\t\tthis.triggerMethod('dom:listeners:click:on');\r\n\t\t}\r\n\t\tthis.triggerMethod('dom:listeners:on');\r\n\t\tthis._documentListeners = true;\r\n\t},\r\n\t_unsetDocumentListeners(){\r\n\t\tif (!(this._documentListeners && !this.stack.length)) return;\r\n\t\tlet $doc = this.getDocument();\r\n\t\tif (this._escapePressHandler) {\r\n\t\t\t$doc.off('keyup', this._escapePressHandler);\r\n\t\t\tdelete this._escapePressHandler;\r\n\t\t\tthis.triggerMethod('dom:listeners:escape:off');\r\n\t\t}\r\n\t\tif(this._outsideClickHandler) {\r\n\t\t\t$doc.off('click', this._outsideClickHandler);\r\n\t\t\tdelete this._outsideClickHandler;\r\n\t\t\tthis.triggerMethod('dom:listeners:click:off');\r\n\t\t}\r\n\t\tthis.triggerMethod('dom:listeners:off');\r\n\t\tthis._documentListeners = false;\r\n\t},\r\n\t_shouldRemoveOnEsc(){\r\n\t\treturn this.getOption('removeOnEsc') === true;\r\n\t},\r\n\t_shouldRemoveOnOutsideClick(){\r\n\t\treturn this.getOption('removeOnOutsideClick') === true;\r\n\t},\r\n\r\n\r\n\t/* helpers */\r\n\r\n\tmergeOptions,\r\n\ttriggerMethod,\r\n\tgetOption() { return getOption(this, ...arguments); },\r\n\r\n\tgetDocument(){\r\n\t\treturn this.$doc || $(document);\r\n\t},\r\n\tisDestroyed(){\r\n\t\treturn this._isDestroyed || this._isDestroying;\r\n\t},\r\n\tremoveAll(){\r\n\t\twhile(this.stack.length){\r\n\t\t\tthis.destroyLast();\r\n\t\t}\r\n\t},\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\t\t\r\n\t\tthis._isDestroying = true;\r\n\r\n\t\tthis.triggerMethod('before:destroy');\r\n\r\n\t\tthis.removeAll();\r\n\r\n\t\tlet $doc = this.getDocument();\r\n\t\t$doc.off('keyup', this._onKeyUp);\r\n\t\t$doc.off('click', this._outsideClick);\r\n\r\n\t\tthis._isDestroyed = true;\r\n\t\tthis.triggerMethod('destroy');\r\n\t},\r\n\r\n\r\n});\r\n\r\nexport default Stack;\r\n","import _ from 'underscore';\r\nimport { BaseClass } from 'bbmn-core';\r\nconst _disallowedKeys = ['setItem', 'key', 'getItem', 'removeItem', 'clear'];\r\nconst allowedKey = key => _disallowedKeys.indexOf(key) < 0;\r\n\r\nconst FakeStore = BaseClass.extend({\r\n\tconstructor(){\r\n\t\tBaseClass.apply(this, arguments);\r\n\t\tthis.store = {};\r\n\t},\r\n\tsetItem(id, val) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\treturn this.store[id] = String(val);\r\n\t},\r\n\tgetItem(id) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\treturn this.store[id];\r\n\t},\r\n\tremoveItem(id) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\tdelete this.store[id];\r\n\t},\r\n\tclear() {\r\n\t\tlet keys = _(this).keys();\r\n\t\t_(keys).each(key => this.removeItem(key));\r\n\t}\r\n});\r\n\r\nexport default FakeStore;\r\n","import Fake from './fake.js';\r\n\r\nlet session = (typeof sessionStorage === 'undefined') \r\n\t? new Fake() : sessionStorage;\r\n\r\nlet local = (typeof localStorage === 'undefined') \r\n\t? new Fake() : localStorage;\r\n\r\nexport {\r\n\tsession,\r\n\tlocal\r\n};\r\n","import _ from 'underscore';\r\nimport { session, local } from './store.js';\r\n\r\nconst getStore = (opts = {}) => opts.local === true ? local : session;\r\n\r\nconst SECONDS = 1000;\r\nconst MINUTES = SECONDS * 60;\r\nconst HOURS = MINUTES * 60;\r\nconst DAYS = HOURS * 24;\r\n\r\nvar store = {\r\n\r\n\t_normalizeValue(value) {\r\n\t\tvar normValue = value;\r\n\t\tif (_.isObject(value) && _.isFunction(value.toJSON))\r\n\t\t\tnormValue = value.toJSON();\r\n\t\tif (_.isDate(value) && !_.isNaN(value.valueOf()))\r\n\t\t\tnormValue = 'date(' + normValue + ')';\r\n\t\treturn normValue;\r\n\t},\r\n\r\n\t_createItem(value, expireAt) {\r\n\t\treturn { expireAt: expireAt, value: value };\r\n\t},\r\n\r\n\tjsonParse(key, value) {\r\n\t\tvar datePattern = /^date\\((\\d{4,4}-\\d{2,2}-\\d{2,2}([T\\s]\\d{2,2}:\\d{2,2}:\\d{2,2}(\\.\\d*)?Z?)?)\\)$/;\r\n\t\tif (_.isString(value) && datePattern.test(value)) {\r\n\t\t\tvar textDate = value.replace(datePattern, '$1');\r\n\t\t\treturn new Date(textDate);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t_jsonParse(key, value, context) {\r\n\t\tif (!key) return value;\r\n\t\treturn this.jsonParse(key, value, context);\r\n\t},\r\n\t_parse(raw) {\r\n\t\tlet _this = this;\r\n\t\tlet item = JSON.parse(raw, function (key, value) { return _this._jsonParse(key, value, this); });\r\n\t\tif ('expireAt' in item && 'value' in item)\r\n\t\t\treturn item;\r\n\t\telse\r\n\t\t\treturn this._createItem(item, 0);\r\n\t},\r\n\t_get(key, opts) {\r\n\t\tlet raw = getStore(opts).getItem(key);\r\n\t\tif (raw == null) return;\r\n\t\treturn this._parse(raw);\r\n\t},\r\n\tget(key, opts = {}) {\r\n\r\n\t\tlet { checkExpire = true } = opts;\r\n\r\n\t\tlet item = this._get(key, opts);\t\t\r\n\t\tif (item == null) return;\r\n\r\n\t\tlet expired = this._isExpired(item);\r\n\t\tif (!expired || !checkExpire) {\r\n\r\n\t\t\treturn item.value;\r\n\t\t}\r\n\t\telse if (expired) {\r\n\t\t\tthis.remove(key, opts);\r\n\t\t}\r\n\t},\r\n\tset(key, value, opts = {}) {\r\n\r\n\t\tlet expireAt = Date.now() + this.getExpireAt(opts);\r\n\t\tlet normValue = this._normalizeValue(value);\r\n\t\tlet item = this._createItem(normValue, expireAt);\r\n\t\tthis._set(key, item, opts);\r\n\t\t\r\n\t},\r\n\tremove(key, opts) {\r\n\t\tgetStore(opts).removeItem(key);\r\n\t},\r\n\texpire(key, opts) {\r\n\t\tlet item = this._get(key, opts);\r\n\t\tif (!item) return;\r\n\t\titem.expireAt = 0;\r\n\t\tthis._set(key, item, opts);\r\n\t},\r\n\tgetExpireAt ({ expireAt, seconds, minutes, hours, days }) {\r\n\t\tif (expireAt != null)\r\n\t\t\treturn expireAt;\r\n\r\n\t\tlet offset = 0;\r\n\r\n\t\t_.isNumber(seconds) && (offset += seconds * SECONDS);\r\n\t\t_.isNumber(minutes) && (offset += minutes * MINUTES);\r\n\t\t_.isNumber(hours) && (offset += hours * HOURS);\r\n\t\t_.isNumber(days) && (offset += days * DAYS);\r\n\r\n\t\toffset === 0 && (offset += 10 * MINUTES);\r\n\r\n\t\treturn offset;\r\n\t},\r\n\t_set(key, item, opts) {\r\n\t\tlet text = JSON.stringify(item);\r\n\t\tgetStore(opts).setItem(key, text);\r\n\t},\r\n\tisExpired(key, opts) {\r\n\t\tlet item = this._get(key, opts);\r\n\t\tif (item == null) return true;\r\n\t\treturn this._isExpired(item);\r\n\t},\r\n\t_isExpired(item) {\r\n\t\treturn item.expireAt < Date.now();\r\n\t},\r\n};\r\n\r\nexport default store;\r\n","import _ from 'underscore';\r\nimport { Model } from 'bbmn-core';\r\n\r\nconst NotifyModel = Model.extend({\r\n\tconstructor(){\r\n\t\tModel.apply(this, arguments);\r\n\t\tif(!_.isDate(this.get('date')))\r\n\t\t\tthis.set('date', new Date(), { silent: true });\t\r\n\r\n\t\tthis._setupDelays();\t\t\r\n\t},\r\n\t_setupDelays(){\r\n\t\tthis.on('change:viewedDelay', () => this._setDelay('viewed'));\r\n\t\tthis.on('change:removedDelay', () => this._setDelay('removed'));\r\n\t\tthis._setDelay('viewed');\r\n\t\tthis._setDelay('removed');\r\n\t\tthis.on('destroy', () => {\r\n\t\t\tthis._clearTimeout('viewed');\r\n\t\t\tthis._clearTimeout('removed');\r\n\t\t});\r\n\t},\r\n\t_clearTimeout(name){\r\n\t\tlet timeoutKey = name + 'Timeout';\r\n\t\tclearTimeout(this[timeoutKey]);\r\n\t},\r\n\t_setTimeout(name){\r\n\t\tlet delay = this.get(name + 'Delay');\r\n\t\tif (!_.isNumber(delay) || delay === 0) { return; }\r\n\t\tlet timeoutKey = name + 'Timeout';\r\n\t\tthis[timeoutKey] = setTimeout(() => {\r\n\t\t\tthis[name]();\r\n\t\t}, delay * 1000);\r\n\t},\r\n\t_setDelay(name){\r\n\t\tthis._clearTimeout(name);\r\n\t\tthis._setTimeout(name);\r\n\t},\r\n\r\n\r\n\t//we need to use id but there is no any endpoint behind\r\n\tisNew(){\r\n\t\treturn true;\r\n\t},\r\n\tisViewed(){\r\n\t\treturn this.get('viewed') === true;\r\n\t},\r\n\tsetViewed(){\r\n\t\tthis.set({\r\n\t\t\tviewed:true,\r\n\t\t\tviewedDelay: undefined\r\n\t\t});\r\n\t\tif (this.get('store') === false) {\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t},\t\r\n\tgetDate(){\r\n\t\treturn this.get('date');\r\n\t},\r\n\tremoved(){\r\n\t\tthis.trigger('removed');\r\n\t},\r\n\tviewed(){\r\n\t\tthis.trigger('viewed');\r\n\t},\r\n\tgetType(){\r\n\t\treturn this.get('type');\r\n\t},\r\n\tgetName(){\r\n\t\treturn this.get('name');\r\n\t}\r\n});\r\n\r\nexport default NotifyModel;\r\n","\r\nimport { Collection } from 'bbmn-core';\r\nimport Model from './model';\r\n\r\nconst Notifies = Collection.extend({\r\n\tmodel: Model,\r\n\thasNotViewed(){\r\n\t\tlet counts = this.getCount();\r\n\t\treturn !!counts.notViewed;\r\n\t},\r\n\tgetCount(){\r\n\t\treturn this.reduce((memo, model) => {\r\n\t\t\tmemo.total++;\r\n\t\t\tif(model.isViewed())\r\n\t\t\t\tmemo.viewed++;\r\n\t\t\telse\r\n\t\t\t\tmemo.notViewed++;\r\n\r\n\t\t\treturn memo;\r\n\t\t}, { total: 0, viewed: 0, notViewed: 0});\r\n\t},\r\n\tgetCountAsText(){\r\n\t\tlet counts = this.getCount();\r\n\t\tif(!counts.total) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn counts.notViewed + '/' + counts.total;\r\n\t},\r\n\ttoggle(){\r\n\t\tthis.mode = this.mode != 'all' ? 'all' : 'notViewed';\r\n\t\tthis.trigger('toggle', this.mode);\r\n\t}\r\n\r\n});\r\n\r\nexport default new Notifies([]);\r\n","import _ from 'underscore';\r\nimport notifies from './notifies';\r\n\r\n\r\nexport default function notify(hash){\r\n\tlet model = notifies.get(hash);\r\n\tif(model) {\r\n\t\tmodel.wasShown = false;\r\n\t\thash.viewed = false;\r\n\t}\r\n\treturn notifies.add(hash, { merge: true, update: true});\r\n}\r\n\r\n\r\nfunction normalizeOptions(arg1){\r\n\tif(_.isString(arg1)) {\r\n\t\treturn { text: arg1 };\r\n\t} else if(_.isObject(arg1)) {\r\n\t\treturn arg1;\r\n\t}\r\n}\r\n\r\nnotify.wait = function(arg){\r\n\tlet options = _.extend({ \r\n\t\ttype: 'wait', id: _.uniqueId('waitNotify') \r\n\t}, \r\n\tnormalizeOptions(arg));\r\n\treturn notify(options);\r\n};\r\n\r\nnotify.error = function(arg){\r\n\tlet options = _.extend({ \r\n\t\ttype: 'error', id: _.uniqueId('waitNotify') \r\n\t}, \r\n\tnormalizeOptions(arg));\r\n\treturn notify(options);\r\n};\r\nnotify.success = function(arg){\r\n\tlet options = _.extend({ \r\n\t\ttype: 'success', id: _.uniqueId('waitNotify') \r\n\t}, \r\n\tnormalizeOptions(arg));\r\n\treturn notify(options);\r\n};\r\nnotify.message = function(arg){\r\n\tlet options = _.extend({ \r\n\t\ttype: 'message', \t\t\r\n\t\tid: _.uniqueId('waitNotify'),\r\n\t\tviewedDelay: 3,\r\n\t\tremovedDelay: 600\r\n\t}, \r\n\tnormalizeOptions(arg));\r\n\treturn notify(options);\r\n};\r\n","import _ from 'underscore';\r\nimport { CollectionView, View, AtomTextView } from '../views';\r\n\r\n\r\nconst IconView = View.extend({\r\n\tconstructor(){\r\n\t\tView.apply(this, arguments);\r\n\t\tthis.addCssClassModifier('icon');\r\n\t},\r\n\ttemplate: _.template('<i></i>'),\t\r\n});\r\n\r\nconst IconButtonView = View.extend({\r\n\ttagName: 'button',\r\n\tconstructor(){\r\n\t\tView.apply(this, arguments);\r\n\t\tthis.addCssClassModifier('icon-btn');\r\n\t},\r\n\ttemplate: _.template('<i></i>'),\t\r\n});\r\n\r\n\r\nconst NotifyView = CollectionView.extend({\r\n\trenderAllCustoms: true,\r\n\tcssClassModifiers:[\r\n\t\t() => 'notify',\r\n\t\tm => m.getType(),\t\t\r\n\t\tm => m.getName(),\r\n\t\tm => m.isViewed() ? 'viewed' : 'not-viewed',\r\n\t\tm => m.wasShown ? '' : 'accent'\r\n\t],\r\n\tcustoms:[\r\n\t\t(v) => v.getTypeView(),\r\n\t\t(v) => v.getMessageView(),\r\n\t\t(v) => v.getStateView()\r\n\t],\r\n\tevents:{\r\n\t\t'click .state':'changeModelState'\r\n\t},\r\n\tmodelEvents:{\r\n\t\t'viewed': 'markAsViewed',\r\n\t\t'removed': 'destroyModel',\r\n\t\t'change:text': 'render',\r\n\t},\r\n\tchangeModelState(){\r\n\t\tif(this.model.isViewed()) {\r\n\t\t\tthis.destroyModel();\r\n\t\t} else {\r\n\t\t\tthis.markAsViewed();\r\n\t\t}\r\n\t},\r\n\tdestroyModel(){\r\n\t\tthis.disappear().then(() => this.model.destroy());\r\n\t},\r\n\tmarkAsViewed(){\r\n\t\tif (this.getOption('mode') != 'all') {\r\n\t\t\tthis.disappear().then(() => this.model.setViewed());\r\n\t\t} else {\r\n\t\t\tthis.model.setViewed();\r\n\t\t}\r\n\t},\r\n\tdisappear() {\r\n\t\tlet promise = new Promise((resolve) => {\r\n\t\t\tif(this.isAttached()) {\r\n\t\t\t\tthis.$el.animate({\r\n\t\t\t\t\theight: 'toggle',\r\n\t\t\t\t\twidth: 'toggle',\r\n\t\t\t\t}, 500, resolve);\r\n\t\t\t} else {\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn promise;\t\t\r\n\t},\t\r\n\tonBeforeAttach(){\r\n\t\tthis.$el.attr('style','');\r\n\t},\r\n\tonBeforeRender(){\r\n\t\tthis.dismissAccent = false;\r\n\t},\r\n\tonRender(){\r\n\t\tif(!this.model.wasShown) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.model.wasShown = true;\r\n\t\t\t\tthis.refreshCssClass();\r\n\t\t\t}, 2000);\r\n\t\t}\r\n\t},\r\n\r\n\tgetTypeView(){\r\n\t\treturn new IconView({ className: 'type-icon' });\r\n\t},\r\n\tgetMessageView(){\r\n\t\treturn AtomTextView.byModel(this.model, { className: 'message' });\r\n\t},\r\n\tgetStateView(){\r\n\t\treturn new IconButtonView({ className: 'state' });\r\n\t},\r\n\r\n\r\n\r\n});\r\n\r\nexport default NotifyView;\r\n","import { CollectionView } from '../views';\r\nimport { nextCollectionViewMixin } from 'bbmn-mixins';\r\nimport notifies from './notifies';\r\nimport childView from './notify-view';\r\n\r\n\r\n\r\nconst Notifier = nextCollectionViewMixin(CollectionView).extend({\r\n\tinitialize(){\r\n\t\tthis.setFilter(this.unviewedFilter, { preventRender: true });\r\n\t\tthis.listenTo(this.collection, 'change:viewed', this.sort);\r\n\t},\r\n\tchildView,\r\n\tcollection: notifies,\r\n\tcollectionEvents: {\r\n\t\ttoggle() {\r\n\t\t\tlet current = this.getFilter();\r\n\t\t\tif(current == this.allFilter) {\r\n\t\t\t\tthis.setFilter(this.unviewedFilter, { preventRender: true });\r\n\t\t\t} else {\r\n\t\t\t\tthis.setFilter(this.allFilter, { preventRender: true });\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\r\n\tviewComparator(v1,v2){\r\n\t\treturn v2.model.getDate() - v1.model.getDate();\r\n\t},\r\n\tallFilter(){\r\n\t\treturn true;\r\n\t},\r\n\tunviewedFilter(v){\r\n\t\treturn !v.model.isViewed();\r\n\t},\r\n\tchildViewOptions(){\r\n\t\treturn {\r\n\t\t\tmode: this.collection.mode\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\nexport default Notifier;\r\n","import _ from 'underscore';\r\nimport { ModelSchemas } from '../model-schemas';\r\nimport notify from './notify';\r\n\r\nfunction convertOptionsToNotify(opts = {}){\r\n\tlet defs =_.pick(opts, 'notifyId', 'notifyStore');\r\n\tdefs = {\r\n\t\tid: defs.notifyId,\r\n\t\tstore: defs.notifyStore\r\n\t};\r\n\tlet raw = _.pick(opts, 'notifyWait', 'notifyError', 'notifySuccess');\r\n\tlet result = _.reduce(raw, (memo, val, key) => {\r\n\t\tlet parsedKey = key.replace(/^notify(\\w)/, (match, letter) => { return letter.toLowerCase(); });\r\n\t\tif(_.isString(val)){\r\n\t\t\tval = {\r\n\t\t\t\ttext: val\r\n\t\t\t};\r\n\t\t}\r\n\t\tmemo[parsedKey] = val;\r\n\t}, {});\r\n\tif (!_.size(result)) {\r\n\t\treturn;\r\n\t}\r\n\treturn _.extend(defs, result);\r\n}\r\n\r\nexport default Base => Base.extend({\r\n\tgetNotifyOptions(method, opts = {}){\r\n\t\tlet notify = convertOptionsToNotify(opts);\r\n\t\tlet schema = ModelSchemas.get(this);\r\n\t\tif (schema) {\r\n\t\t\tlet notifies = schema.getOption('notifies') || {};\r\n\t\t\tlet byMethod = notifies[method];\r\n\t\t\tnotify = _.extend({}, byMethod, notify);\r\n\t\t}\r\n\r\n\t\tif(!_.size(notify)) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\treturn notify;\r\n\t\t}\r\n\r\n\r\n\t},\r\n\tsync(method, model, options){\r\n\t\tlet notifyOptions = this.getNotifyOptions(method, options);\r\n\t\tlet note;\r\n\t\tif(notifyOptions && notifyOptions.wait){\r\n\t\t\tnote = notify.wait(notifyOptions.wait);\r\n\t\t}\r\n\t\tlet xhr = Base.prototype.sync.apply(this, arguments);\r\n\t\tif (!notifyOptions) {\r\n\t\t\treturn xhr;\r\n\t\t}\r\n\t\txhr.then(\r\n\t\t\t() => {\r\n\t\t\t\tif (!notifyOptions.success) {\r\n\t\t\t\t\tif (note) {\r\n\t\t\t\t\t\tnote.removed();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (note) {\r\n\t\t\t\t\tnotifyOptions.success.id = note.id;\r\n\t\t\t\t}\r\n\t\t\t\tnotify.success(notifyOptions.success);\r\n\t\t\t},\r\n\t\t\txhr => {\r\n\t\t\t\tif (!notify.error) {\r\n\t\t\t\t\tif (note) {\r\n\t\t\t\t\t\tnote.removed();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (note) {\r\n\t\t\t\t\tnotifyOptions.error.id = note.id;\r\n\t\t\t\t\tnotifyOptions.error.xhr = xhr;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tnotify.error(notifyOptions.error);\t\t\t\t\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn xhr;\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\nimport { BaseClass, Model } from 'bbmn-core';\r\nimport { getByPath } from 'bbmn-utils';\r\n\r\nfunction createExec(actionInstance, actionMethod){\r\n\treturn function exec(instance, ...args){\r\n\t\tlet decline = actionInstance.isNotAllowed(instance, args);\r\n\t\tif (decline) {\r\n\t\t\treturn actionInstance.onExecuteNotAllowed(instance, decline, args);\r\n\t\t}\r\n\t\t\r\n\t\tif (_.isFunction(actionMethod)) {\r\n\t\t\treturn instance ? actionMethod.apply(instance, args) : actionMethod(...args);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn actionInstance.onActionMissing(instance);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\nconst ActionModel = Model.extend({\r\n\tconstructor(attrs, options = {}){\r\n\t\t_.extend(this, _.pick(options, 'action','instance', 'order'));\r\n\t\tModel.apply(this, arguments);\r\n\t},\r\n\tdefaults: {\r\n\t\tname: undefined,\r\n\t\tlabel: undefined,\r\n\t\torder: 0,\r\n\t},\r\n\texec(){\r\n\t\tif (!this.action) {\r\n\t\t\tthrow new Error('no action under the hood');\t\t\t\r\n\t\t}\r\n\t\t// if(!this.instance) {\r\n\t\t// \tthrow new Error('no instance defined');\r\n\t\t// }\r\n\t\treturn this.action.exec(this.instance, ...arguments);\r\n\t}\r\n});\r\n\r\n\r\nconst instanceProperties = ['name', 'label', 'order', 'hidden'];\r\n\r\nconst Action = BaseClass.extend({\r\n\tconstructor(options = {}){\r\n\t\tlet { action } = options;\r\n\t\tdelete options.action;\r\n\t\t_.extend(this, _.pick(options, ...instanceProperties));\r\n\t\t\r\n\t\tthis.options = _.omit(options, ...instanceProperties);\r\n\t\t\r\n\t\tBaseClass.apply(this, arguments);\r\n\r\n\t\tthis.exec = createExec(this, action);\r\n\t},\r\n\r\n\tgetOption(key){\r\n\t\treturn getByPath(this.options, key);\r\n\t},\r\n\r\n\tgetLabel(){ return this.label || this.name; },\r\n\r\n\tis (arg) { return this == arg || this.name == arg; },\r\n\tisVisible () { return this.hidden !== true; },\r\n\tisHidden () { return this.hidden == true; },\r\n\t\r\n\tisNotAllowed () { },\r\n\tonExecuteNotAllowed () { },\r\n\tonActionMissing () { },\r\n\r\n\ttoModel(instance, attrs) {\r\n\t\t// if (instance == null)  {\r\n\t\t// \tthrow new Error('instance undefined and action model must have one');\r\n\t\t// }\r\n\t\tlet hash = _.extend({\r\n\t\t\tid: this.name, \r\n\t\t\tlabel: this.getLabel(), \r\n\t\t\torder: this.order \r\n\t\t}, attrs);\r\n\r\n\t\tlet options =  { \r\n\t\t\taction: this, \r\n\t\t\torder: this.order,\r\n\t\t\tinstance\r\n\t\t};\r\n\r\n\t\treturn new ActionModel(hash, options);\r\n\t}\r\n});\r\n\r\nexport default Action;\r\n","import _ from 'underscore';\r\nimport { BaseClass } from 'bbmn-core';\r\nimport BaseAction from './action.js';\r\nimport ClassStore from '../class-store';\r\n\r\nconst BaseActionStore = BaseClass.extend({\r\n\tconstructor(options = {}){\r\n\t\tBaseClass.apply(this, arguments)\r\n\t\t_.extend(this, options);\r\n\t\tif(!_.isFunction(this.buildAction)){\r\n\t\t\tthis.buildAction = i => i;\r\n\t\t}\r\n\t\tthis.actions = [];\r\n\t\tthis.actionsByNames = [];\r\n\t},\r\n\tbuildAction: raw => raw,\r\n\tregisterActions(raw){\r\n\t\t_.each(raw, item => this.registerAction(item));\r\n\t},\r\n\tregisterAction(raw){\r\n\t\tlet { actionsByNames, buildAction, Action } = this;\r\n\t\tlet options = _.pick(this, 'name', 'ctor', 'Action');\r\n\r\n\t\tlet action = this.buildAction(raw, options);\r\n\t\tif(_.isFunction(buildAction)){\r\n\t\t\taction = buildAction(action, options);\r\n\t\t}\r\n\t\tif (!action.name) return;\r\n\t\tif(!(action instanceof Action)){\r\n\t\t\taction = new Action(action);\r\n\t\t}\r\n\r\n\t\tif (!(action.name in actionsByNames)) {\r\n\t\t\tactionsByNames[action.name] = action;\r\n\t\t\tthis.actions.push(action);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nconst store = new ClassStore({\r\n\tAction: BaseAction,\r\n\tctorNameKey: '__actionsStoreName',\r\n\tinstanceNameKey: '__actionsStoreName',\r\n\tonExists: () => false,\r\n\tbuildStore(context, actions = [], { Action, buildAction } = {}) {\r\n\t\tAction || (Action = this.Action);\r\n\t\tlet { ctor, name } = context;\r\n\t\tlet store = new BaseActionStore({ name, ctor, buildAction, Action });\r\n\t\tstore.registerActions(actions);\t\t\r\n\t\treturn store;\r\n\t},\r\n\r\n\tinitialize(){\r\n\t\tlet store = this.createStore(...arguments);\r\n\t\treturn store.schema;\r\n\t},\r\n\t_preInit(arg, args){\r\n\t\tlet store = this.getStore(arg);\r\n\t\tif(!store) {\r\n\t\t\tstore = this.createStore(arg, [], ...args);\r\n\t\t}\r\n\t\treturn store;\r\n\t},\r\n\tregisterActions(arg, actions, ...createArguments){\r\n\t\tlet store = this._preInit(arg, createArguments);\r\n\t\tstore.registerActions(actions);\r\n\t},\r\n\tregisterAction(arg, action, ...createArguments){\r\n\t\tlet store = this._preInit(arg, createArguments);\r\n\t\tstore.registerAction(action);\r\n\t},\t\r\n\r\n\tgetActions(arg, options = {}){\r\n\t\tlet cache = this.getStore(arg);\r\n\t\tif(!cache) return [];\r\n\t\tvar actions = _.filter(cache.actions, (action, index) => this.filter(action, index, options));\r\n\t\tlet { asModels, instance } = options;\r\n\t\tif (asModels) {\r\n\t\t\treturn _.map(actions, action => action.toModel(instance));\r\n\t\t}\r\n\t\treturn actions;\r\n\t},\r\n\tgetAction(store, action){\r\n\t\tlet cache = this.getStore(store);\r\n\t\tif (!cache) return;\r\n\t\tlet name = _.isString(action) ? action : action.name;\r\n\t\treturn cache.actionsByNames[name];\r\n\t},\r\n\texec(store, action, instance, ...args) {\r\n\t\tlet found = this.getAction(store, action);\r\n\t\tif (!found) {\r\n\t\t\tthrow new Error('action not found:' + action);\r\n\t\t} else {\r\n\t\t\treturn found.exec(instance, ...args);\r\n\t\t}\r\n\t},\r\n\tfilter: () => true,\t\r\n});\r\n\r\n\r\nexport default store;\r\n","import _ from 'underscore';\r\n\r\nimport { betterResult } from 'bbmn-utils';\r\n\r\nimport ActionStore from './store.js';\r\n\r\n\r\nfunction getFromPrototypes(instance, property, { exclude, process } = {}) {\r\n\tif(exclude && !_.isArray(exclude)) {\r\n\t\texclude = [exclude];\r\n\t}\r\n\tif(!_.isFunction(process)) {\r\n\t\tprocess = value => value;\r\n\t}\r\n\tlet prototype = instance.__proto__;\r\n\tlet result = [];\r\n\twhile(prototype){\r\n\t\tlet value = prototype[property];\r\n\t\tprototype = prototype.__proto__;\r\n\r\n\t\tif (value == null) { continue; }\r\n\r\n\t\tif(exclude && exclude.indexOf(value) > -1) { continue; }\r\n\t\t\r\n\t\tvalue = process(value);\r\n\t\tif(value != null) {\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n\r\nfunction isProtoActionsRegistered(instance){\r\n\treturn instance.constructor.__protoActionsTaked == true;\r\n}\r\nfunction setProtoActionsAsRegistered(instance) {\r\n\tinstance.constructor.__protoActionsTaked = true;\r\n}\r\n\r\n\r\nexport default Base => Base.extend({\r\n\t_actionableMixin: true,\r\n\tinheritActions: false,\r\n\tActionClass: undefined,\r\n\r\n\t_initializeActionableActions(){\r\n\t\tlet protoActionsTaked = isProtoActionsRegistered(this);\r\n\t\tif (protoActionsTaked) return;\r\n\r\n\t\tlet instance = betterResult(this, 'actions', { args: [this], default: [] });\r\n\t\tlet inherited = [];\r\n\t\tif (this.inheritActions) {\r\n\t\t\tlet protoActions = getFromPrototypes(this, 'actions', {\r\n\t\t\t\texclude: this.actions,\r\n\t\t\t\tprocess: actions => betterResult({ actions }, 'actions', { args: [this], default: [] })\r\n\t\t\t});\r\n\t\t\tinherited.push(..._.flatten(protoActions));\r\n\t\t\tinherited = _.filter(inherited, f => f != null);\r\n\t\t}\r\n\t\tlet rawactions = [...inherited, ...instance];\r\n\r\n\t\tthis.registerActions(rawactions);\r\n\t\tsetProtoActionsAsRegistered(this);\r\n\r\n\t},\r\n\r\n\tbuildStoreAction: action => action,\r\n\tgetActions(options = {}){\r\n\t\tthis._initializeActionableActions();\r\n\t\tlet actions = ActionStore.getActions(this, _.extend({ instance: this }, options));\r\n\t\treturn actions;\r\n\t},\r\n\r\n\tregisterActions(actions){\r\n\t\tActionStore.registerActions(this, actions, {\r\n\t\t\tAction: this.ActionClass,\r\n\t\t\tbuildAction: raw => this.buildStoreAction(raw),\t\t\t\t\r\n\t\t});\r\n\t\t// if(this._actionableActionsInitialized || this._isActionsRegistered()) {\r\n\t\t// \tActionStore.registerActions(this, actions);\r\n\t\t// } else {\r\n\t\t// \tthis._actionsWaitingForRegister || (this._actionsWaitingForRegister = []);\r\n\t\t// \tthis._actionsWaitingForRegister.push(...actions);\r\n\t\t// }\r\n\t},\r\n\tregisterAction(...action){\r\n\t\tif(!action) return;\r\n\t\treturn this.registerActions(action);\r\n\t},\r\n\thasAction(arg, options){\r\n\t\tlet action = this.getAction(arg, options);\r\n\t\treturn !!action;\r\n\t},\r\n\tgetAction(arg, options){\r\n\t\tlet actions = this.getActions(options);\r\n\t\tlet iteratee = _.isString(arg) ? { name: arg } : { name: arg.name };\r\n\t\treturn _.findWhere(actions, iteratee);\r\n\t},\r\n\texecuteAction(action, ...rest){\r\n\t\tthis._initializeActionableActions();\r\n\t\treturn ActionStore.exec(this.actionsStoreName || this, action, this,  ...rest);\r\n\t},\r\n}, { ActionableMixin: true });\r\n","import _ from 'underscore';\r\n\r\nexport { default as Action } from './action.js';\r\nexport { default as ActionStore } from './store.js';\r\nexport { default as actionableMixin } from './actionable-mixin.js';\r\n\r\nexport function action(name, label, action, options = {}){\r\n\t// args: {}\r\n\tif (!_.isFunction(name) && _.isObject(name)) {\r\n\t\treturn name;\r\n\t} \r\n\t// args: \"\", ()\r\n\telse if (_.isFunction(label)) {\r\n\t\tlet o = { name, action: label };\r\n\t\treturn _.extend(o, action);\r\n\t} \r\n\t// args: (), {}\r\n\telse if (_.isFunction(name) && _.isObject(label)) {\r\n\r\n\t\treturn _.extend({ action: name }, label);\r\n\r\n\t}\r\n\t// args: \"\", \"\", (), {}\r\n\treturn _.extend({}, options, { name, label, action });\r\n}\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nimport { View, CollectionView } from '../views';\r\nimport { isViewClass, buildViewByKey, mix } from 'bbmn-utils';\r\nimport { destroyViewMixin } from 'bbmn-mixins';\r\n\r\nexport const CloseButtonView = View.extend({\r\n\ttagName: 'button',\r\n\ttemplate: () => '<i></i>',\r\n});\r\n\r\nconst ButtonView = View.extend({\r\n\ttagName:'button',\r\n\ttemplate: _.template('<i></i><span><%= text %></span><i></i>'),\r\n\ttriggers:{\r\n\t\t'click':'click'\r\n\t},\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\ttext: this.getOption('text')\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\nexport const TextView = View.extend({\r\n\ttemplate: _.template('<%= text %>'),\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\ttext: this.getOption('text', { args: [ this ]})\r\n\t\t};\r\n\t}\r\n});\r\n\r\nconst BaseModalView = mix(CollectionView).with(destroyViewMixin);\r\n\r\nexport const ModalView = BaseModalView.extend({\r\n\tconstructor({ promise } = {}){\r\n\t\tBaseModalView.apply(this, arguments);\r\n\t\tif (promise) {\r\n\t\t\tthis._isPromise = true;\r\n\t\t\tthis.promise = new Promise((resolve, reject) => {\r\n\t\t\t\tthis._resolve = resolve;\r\n\t\t\t\tthis._reject = reject;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twrapContent: true,\r\n\t\r\n\tchildViewContainer: '[data-modal-content]',\r\n\trenderAllCustoms: true,\r\n\t\r\n\trenderCollection: false,\r\n\tviewComparator: false,\r\n\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\tshouldWrapContent: this.getOption('wrapContent') === true,\r\n\t\t};\r\n\t},\r\n\r\n\tevents:{\r\n\t\t'click'(event){\r\n\t\t\tif(this.getOption('preventRemove')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet $el = $(event.target);\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif ($el.closest('[data-modal-content]').length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.destroy();\r\n\t\t},\r\n\t\t'click [data-modal-close]'(event){\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t},\r\n\tcustoms:[\r\n\t\t(v) => v.createCloseButton(),\r\n\t\t(v) => v.takeOptionsView('header'),\r\n\t\t(v) => v.takeOptionsView('content'),\r\n\t\t(v) => v.takeOptionsView('footer'),\r\n\t],\r\n\tcreateCloseButton(){\r\n\t\tif (this.getOption('closeButton') === false || this.getOption('preventRemove')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet Button = this.getOption('CloseButtonView');\r\n\r\n\t\tif (!isViewClass(Button)) {\r\n\t\t\tthrow new Error('closeButtonView not defined, use `closeButton: false` or pass button view in options');\r\n\t\t}\r\n\r\n\t\treturn new Button({ attributes: { 'data-modal-close':'' } });\r\n\t},\r\n\tdefsOptionsForView(name, opts){\r\n\t\tlet defs = {};\r\n\t\tif (name == 'footer' && this._isPromise) {\r\n\t\t\tdefs = {\r\n\t\t\t\tresolve: this.getOption('confirmLabel'),\r\n\t\t\t\trejectSoft: this.getOption('cancelLabel'),\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn _.extend({}, opts, defs);\r\n\t},\r\n\ttakeOptionsView(key){\r\n\t\tlet tagName = ['header','footer'].indexOf(key) > -1 ? key : 'div';\r\n\t\tlet TextView = this.getOption('TextView');\r\n\t\tlet options = this.defsOptionsForView(key,{ tagName });\r\n\t\tlet view = buildViewByKey(this, key, { TextView, options });\r\n\r\n\t\tif(key === 'footer' && !view){\r\n\t\t\tif (this.getOption('promiseBar')) {\r\n\t\t\t\tview = new FooterView(options);\r\n\t\t\t\tthis.listenTo(view, {\r\n\t\t\t\t\t'resolve': () => {\r\n\t\t\t\t\t\tthis.triggerMethod('resolve', this.modalChildren.content);\r\n\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'reject': () => {\r\n\t\t\t\t\t\tthis.triggerMethod('reject', this.modalChildren.content);\r\n\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t!this.modalChildren && (this.modalChildren = {});\r\n\t\tthis.modalChildren[key] = view;\r\n\t\tif (key === 'content') {\r\n\t\t\tthis._initContentListeners(view);\r\n\t\t}\r\n\t\tif (this._isPromise && (key === 'footer' || key == 'content')) {\r\n\t\t\tthis._initPromiseListeners(view);\r\n\t\t}\r\n\t\treturn view;\r\n\t},\r\n\t_initPromiseListeners(view){\r\n\t\tthis.listenTo(view, {\r\n\t\t\t'resolve': arg => this.resolve(arg),\r\n\t\t\t'reject': arg => this.reject(arg),\t\t\t\r\n\t\t});\r\n\t},\r\n\t_initContentListeners(content){\r\n\t\tthis.listenTo(content, {\r\n\t\t\t'destroy': () => this.destroy(),\r\n\t\t\t'done': () => this.destroy(),\r\n\t\t});\r\n\t},\r\n\tresolve(arg){\r\n\t\tthis._resolve(arg);\r\n\t\tthis.promiseState = 'fulfilled';\r\n\t\tif (!this._isDestroying && !this._isDestroyed){\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t},\r\n\treject(arg){\r\n\t\tthis._reject(arg);\r\n\t\tthis.promiseState = 'rejected';\r\n\t\tif (!this._isDestroying && !this._isDestroyed){\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t},\r\n\tonDestroy(){\r\n\t\tif(this._isPromise && !this.promiseState) {\r\n\t\t\tthis.reject();\r\n\t\t}\r\n\t},\r\n\tattributes:{\r\n\t\t'data-modal': ''\r\n\t},\r\n});\r\n\r\n\r\nexport const FooterView = CollectionView.extend({\r\n\trenderAllCustoms: true,\r\n\ttagName:'footer',\r\n\tattributes:{\r\n\t\t'data-modal-content-footer':'confirm'\r\n\t},\r\n\tcustoms:[\r\n\t\tv => v.getResolveView(),\r\n\t\tv => v.getRejectView(),\r\n\t],\r\n\tgetResolveView(){\r\n\t\tlet text = this.getOption('resolveText');\r\n\t\tlet view = new ButtonView({\r\n\t\t\ttext,\r\n\t\t\tonClick: () => this.triggerClick(true)\r\n\t\t});\r\n\t\treturn view;\r\n\t},\r\n\tgetRejectView(){\r\n\t\tlet text = this.getOption('rejectText');\r\n\t\tlet view = new ButtonView({\r\n\t\t\ttext,\r\n\t\t\tonClick: () => this.triggerClick(false)\r\n\t\t});\r\n\t\treturn view;\r\n\t},\r\n\ttriggerClick(resolve){\r\n\t\tlet event = resolve ? 'resolve' : 'reject';\r\n\t\tlet arg = this.getOption(event + 'With');\r\n\t\tthis.trigger(event, arg);\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\nimport { renderInNode, takeFirst } from 'bbmn-utils';\r\nimport ViewStack from '../view-stack';\r\nimport { CloseButtonView, ModalView, TextView } from './views';\r\n\r\n\r\nexport default {\r\n\t\r\n\ttemplate: _.template(`\r\n<div data-modal-bg></div>\r\n<% if(shouldWrapContent) {%><div data-modal-content-wrapper><%} %>\r\n<section data-modal-content></section>\r\n<% if(shouldWrapContent) {%></div><%} %>\r\n`),\r\n\r\n\tconfirmResolveText: 'confirm',\r\n\tconfirmRejectText: 'cancel',\r\n\tTextView,\r\n\tModalView,\r\n\tCloseButtonView,\r\n\r\n\tbuildView(options, showOptions = {}){\r\n\r\n\t\tlet ModalView = takeFirst('ModalView', options, showOptions, this);\r\n\t\tlet TextView = takeFirst('TextView', options, showOptions, this);\r\n\t\tlet CloseButtonView = takeFirst('CloseButtonView', options, showOptions, this);\t\t\r\n\t\t\r\n\t\toptions = _.extend({ \r\n\t\t\tTextView, \r\n\t\t\tCloseButtonView,\r\n\t\t\ttemplate: this.template,\r\n\t\t}, options);\r\n\r\n\t\treturn new ModalView(options);\r\n\t},\r\n\r\n\trender(view, stack, options = {}){\r\n\r\n\t\tlet el = _.result(this, 'container');\r\n\t\tif(el && el.jquery){\r\n\t\t\tel = el.get(0);\r\n\t\t}\r\n\t\toptions = _.extend({ \r\n\t\t\tel, replaceElement: true, destroyOnEmpty: true,\t\t\t\r\n\t\t}, options);\r\n\r\n\t\trenderInNode(view, options);\r\n\r\n\t\tif (stack) {\r\n\t\t\tlet { preventRemove } = options;\r\n\t\t\t_.defer(() => stack.add(view, { preventRemove }));\r\n\t\t}\r\n\t},\r\n\tcontainer: () => document.querySelector('body'),\r\n\tstackOptions: {\r\n\t\tremoveOnEsc: true,\r\n\t\tremoveOnOutsideClick: true,\r\n\t},\r\n\tgetStack(options){\r\n\t\tif (!this.stack) {\r\n\t\t\tlet stackOptions = this.stackOptions || options;\r\n\t\t\tthis.stack = new ViewStack(stackOptions);\r\n\t\t}\r\n\t\treturn this.stack;\r\n\t}\r\n};\r\n\r\n","import config from './config.js';\r\nimport _ from 'underscore';\r\nimport { FooterView } from './views';\r\nimport { takeFirst, isView } from 'bbmn-utils';\r\n\r\nfunction show(opts = {}, showOptions = {}){\r\n\tif(isView(opts)){\r\n\t\topts = {\r\n\t\t\tcontent: opts\r\n\t\t};\r\n\t}\r\n\tif(!opts.attributes){\r\n\t\topts.attributes = {\r\n\t\t\t'data-modal': opts.modalType || ''\r\n\t\t};\r\n\t}\r\n\r\n\tlet modal = config.buildView(opts, showOptions);\r\n\r\n\r\n\tconfig.render(modal, config.getStack(), showOptions);\r\n\r\n\tif (showOptions.returnAsPromise && opts.promise) {\r\n\t\treturn modal.promise;\r\n\t} else {\r\n\t\treturn modal;\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nfunction normalizeConfirmFooter(opts = {}){\r\n\tif (!opts.footer) {\r\n\t\topts.footer = FooterView;\r\n\t}\r\n\r\n\tif(!opts.footerOptions) {\r\n\t\topts.footerOptions = {};\r\n\t}\r\n\r\n\tlet fopts = opts.footerOptions;\r\n\tfopts.resolveWith = takeFirst('resolveWith', fopts, opts);\r\n\tfopts.rejectWith = takeFirst('rejectWith', fopts, opts);\r\n\tfopts.resolveText = takeFirst('resolveText', fopts, opts) || config.confirmResolveText;\r\n\tfopts.rejectText = takeFirst('rejectText', fopts, opts) || config.confirmRejectText;\t\r\n\treturn opts;\r\n}\r\n\r\nfunction confirm(arg, showOptions = {}) {\r\n\tif (_.isString(arg)) {\r\n\t\targ = {\r\n\t\t\tcontent: arg\r\n\t\t};\r\n\t} else if (!_.isObject(arg)) {\r\n\t\targ = {};\r\n\t}\r\n\tif(arg.text && !arg.content) {\r\n\t\targ.content = arg.text;\r\n\t}\r\n\targ.promise = true;\r\n\tif(showOptions.returnAsPromise == null) {\r\n\t\tshowOptions.returnAsPromise = true;\r\n\t}\r\n\targ.modalType = 'confirm';\r\n\targ = normalizeConfirmFooter(arg);\r\n\r\n\treturn show(arg, showOptions);\r\n}\r\n\r\n\r\nexport default {\r\n\tconfig,\r\n\tshow,\r\n\tconfirm\r\n};\r\n","\r\nimport _ from 'underscore';\r\nimport { isView } from 'bbmn-utils';\r\n\r\nexport const initSelectorMixin = Base => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeSelector();\r\n\t},\r\n\tgetSelector(){\r\n\t\treturn this.getOption('selector');\r\n\t},\t\r\n\tbuildChildView(child, ChildViewClass, childViewOptions = {}){\r\n\t\tlet selector = this.getSelector();\r\n\t\tif(selector) {\r\n\t\t\t_.extend(childViewOptions, {\r\n\t\t\t\tselectable: true,\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet view = Base.prototype.buildChildView(child, ChildViewClass, childViewOptions);\r\n\t\tif(selector) {\r\n\t\t\tif (view.addCssClassModifier) {\r\n\t\t\t\tview.addCssClassModifier(m => selector.isSelected(m) ? 'selected' : '');\r\n\t\t\t}\r\n\t\t\tthis.listenTo(view, 'toggle:select', this._handleChildviewToggleSelect);\r\n\t\t}\r\n\t\treturn view;\r\n\t},\r\n\t_initializeSelector(){\r\n\t\tif (this._selectorMixinInitialized) return;\r\n\t\tlet selector = this.getSelector();\r\n\t\tif(selector){\r\n\t\t\tthis.listenTo(selector, 'change', changes => {\r\n\t\t\t\t_.invoke(changes.selected, 'trigger', 'change');\r\n\t\t\t\t_.invoke(changes.unselected, 'trigger', 'change');\r\n\t\t\t\tthis.triggerMethod('selector:change');\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis._selectorMixinInitialized = true;\r\n\t},\r\n\t_handleChildviewToggleSelect(arg1, arg2) {\r\n\t\tlet view = isView(arg1) ? arg1 : arg2;\r\n\t\tlet event = isView(arg1) ? arg2 : arg1;\r\n\t\t\r\n\t\tevent && event.stopPropagation && event.stopPropagation();\r\n\r\n\t\tlet selector = this.getSelector();\r\n\t\tif (!selector.isMultiple() || !this.lastClickedModel || !event.shiftKey) {\r\n\t\t\tthis.lastClickedModel = view.model;\r\n\t\t\tselector.toggle(view.model);\r\n\t\t} else {\r\n\t\t\tlet lastclicked = this.lastClickedModel;\r\n\t\t\tdelete this.lastClickedModel;\r\n\t\t\tselector.toggleRange(view.model, lastclicked);\r\n\t\t}\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\n\r\nimport { BaseClass, Events, isCollection } from 'bbmn-core';\r\nimport { Collection, Model } from 'backbone';\r\nimport { mix, mergeOptions } from 'bbmn-utils';\r\n\r\nconst trueFilter = () => true;\r\n\r\nconst BaseSelector = mix(BaseClass).with(Events);\r\n\r\nconst Selector = BaseSelector.extend({\r\n\tconstructor(options = {}){\r\n\t\tthis.options = _.clone(options);\r\n\t\tmergeOptions.call(this, options, 'source', 'extractValue', 'sourceFilter');\r\n\t\tthis._isMultiple = options.multiple === true;\r\n\t\tBaseSelector.apply(this, arguments);\r\n\t\tthis._initializeSource();\r\n\t\tthis._createCollections();\r\n\t\tthis._setupModel();\r\n\t},\r\n\tsourceFilter: trueFilter,\r\n\tsetSourceFilter(filter){\r\n\t\tif (!_.isFunction(filter)) {\r\n\t\t\tfilter = trueFilter;\r\n\t\t}\r\n\t\tif(filter != this.sourceFilter){\r\n\t\t\tthis.sourceFilter = filter;\r\n\t\t\tthis._updateAll();\r\n\t\t}\r\n\t},\r\n\tsetSourceModels(models){\r\n\t\tthis._updateAll(models);\r\n\t},\r\n\tgetSourceModels(){\r\n\t\treturn this.source.filter(this.sourceFilter);\r\n\t},\r\n\t_initializeSource(){\r\n\t\tif (!_.isObject(this.source)) {\r\n\t\t\tthis.source = new Collection();\r\n\t\t\treturn;\r\n\t\t} else if(isCollection(this.source)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet models = _.map(this.source, (value, ind) => {\r\n\t\t\tif(_.isObject(value)) {\r\n\t\t\t\treturn value;\r\n\t\t\t} else {\r\n\t\t\t\treturn {id : ind, value };\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.source = new Collection(models);\r\n\t\tif(this.options.extractValue == null) {\r\n\t\t\tthis.extractValue = model => model.id;\r\n\t\t}\r\n\t},\r\n\t_createCollections(){\r\n\t\tlet initialSelected = this.options.value == null ? [] : this.options.value;\r\n\t\tif(!_.isArray(initialSelected)) {\r\n\t\t\tinitialSelected = [initialSelected];\r\n\t\t}\r\n\t\tlet models = this.getSourceModels();\r\n\t\tthis.all = new Collection(models);\r\n\t\tthis.listenTo(this.source, 'update reset', this._updateAll);\r\n\r\n\t\tlet selected = _.reduce(initialSelected, (memo, initial) => {\r\n\t\t\tlet found = this.all.get(initial);\r\n\t\t\tif(found) {\r\n\t\t\t\tmemo.push(found);\r\n\t\t\t}\r\n\t\t\treturn memo;\r\n\t\t}, []);\r\n\t\tthis.selected = new Collection(selected);\r\n\t},\r\n\t_updateAll(col){\r\n\t\tlet models = col && col.models;\r\n\t\tif(!models) {\r\n\t\t\tmodels = this.getSourceModels();\r\n\t\t}\r\n\t\tthis.all.set(models, { remove: true, add: true, merge: true});\r\n\t},\r\n\t_setupModel(){\r\n\t\tthis.model = new Model();\r\n\t\tthis.model.clear = () => this.clear();\r\n\t\tthis.on('change', () => {\r\n\t\t\tthis.model.set('count', this.getCount());\r\n\t\t});\r\n\t},\r\n\r\n\tisSelected(arg){\r\n\t\treturn this.selected.has(arg);\r\n\t},\t\r\n\tisMultiple(){\r\n\t\treturn this._isMultiple;\r\n\t},\r\n\tgetCount(){\r\n\t\treturn this.selected.length;\r\n\t},\r\n\tgetCollection(){\r\n\t\treturn this.all;\r\n\t},\r\n\tgetCollections(){\r\n\t\treturn {\r\n\t\t\tcollection: this.all,\r\n\t\t\tselected: this.selected\r\n\t\t};\r\n\t},\r\n\r\n\t_trigger(event, model, { silent, silentChange, changes } = {}){\r\n\t\tif (silent) { return; }\r\n\t\tlet value = this.extractValue(model);\r\n\t\tthis.trigger(event, value);\r\n\t\tif (!silentChange) {\r\n\t\t\tlet mass = {\r\n\t\t\t\t[event]: [model]\r\n\t\t\t};\r\n\t\t\tif (changes && changes.unselected) {\r\n\t\t\t\tmass.unselected || (mass.unselected = []);\r\n\t\t\t\tmass.unselected.push(...changes.unselected);\r\n\t\t\t}\r\n\t\t\tif (changes && changes.selected) {\r\n\t\t\t\tmass.selected || (mass.selected = []);\r\n\t\t\t\tmass.selected.push(...changes.selected);\r\n\t\t\t}\r\n\t\t\tthis._triggerChange(mass);\r\n\t\t}\r\n\t},\r\n\t_triggerChange({ selected = [], unselected = [] } = {}){\r\n\t\tif (selected.length + unselected.length) {\r\n\t\t\tthis.trigger('change', { selected, unselected }, this.getCount());\r\n\t\t}\r\n\t},\r\n\tunselect(arg){\t\t\r\n\t\tlet model = this.all.get(arg);\r\n\t\tif(!model) return;\r\n\t\treturn this._unselect(model);\r\n\t},\r\n\t_unselect(model, options){\r\n\t\tlet exist = this.selected.has(model);\r\n\t\tif (!exist) return;\r\n\t\tlet affected = this.selected.remove(model);\r\n\t\tthis._trigger('unselected', model, options);\r\n\t\treturn affected;\r\n\t},\r\n\r\n\tselect(arg){\r\n\t\tlet model = this.all.get(arg);\r\n\t\tif(!model) return;\r\n\t\treturn this._select(model);\r\n\t},\r\n\t_select(model, options = {}){\r\n\t\tlet exist = this.selected.has(model);\r\n\t\tif (exist) return;\r\n\t\t\r\n\t\tlet affected;\r\n\r\n\t\tif (this.isMultiple()) {\r\n\t\t\taffected = this.selected.add(model);\r\n\t\t} else {\r\n\t\t\tlet current = this.selected.first();\r\n\t\t\tlet unselected = [];\r\n\t\t\tif (current == exist) { return; }\r\n\r\n\t\t\tif (current) {\r\n\t\t\t\tlet uns = this._unselect(current, _.extend({}, options, { silentChange: false }));\r\n\t\t\t\tunselected.push(uns);\r\n\t\t\t}\r\n\r\n\t\t\taffected = this.selected.set(model, { remove: true, merge:true, add:true });\r\n\t\t\toptions.changes || (options.changes = {});\r\n\t\t\toptions.changes.unselected || (options.changes.unselected = []);\r\n\t\t\toptions.changes.unselected.push(...unselected);\r\n\t\t}\r\n\t\tthis._trigger('selected', model, options);\r\n\t\treturn affected;\r\n\t},\r\n\r\n\ttoggle(arg){\r\n\t\tlet model = this.all.get(arg);\r\n\t\tif(!model) return;\r\n\t\treturn this._toggle(model);\r\n\t},\r\n\t_toggle(model, options){\r\n\t\tlet affected;\r\n\t\tlet key;\r\n\t\tlet result = { selected: [], unselected: [] };\r\n\t\tif(this.selected.has(model)){\r\n\t\t\taffected = this._unselect(model, options);\r\n\t\t\tkey = 'unselected';\r\n\t\t} \r\n\t\telse {\r\n\t\t\taffected = this._select(model, options);\r\n\t\t\tkey = 'selected';\r\n\t\t}\r\n\t\tresult[key].push(affected);\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_processRange(from, to, takeAction){\r\n\t\tfrom = this.all.get(from);\r\n\t\tto = this.all.get(to);\r\n\t\tif(!from || !to) return;\r\n\t\tlet _toIndex = this.all.indexOf(to);\r\n\t\tlet indexes = [this.all.indexOf(from), _toIndex];\r\n\t\tlet fromIndex = _.min(indexes);\t\t\r\n\t\tlet toIndex = _.max(indexes);\r\n\t\tlet processed = [];\r\n\t\tfor(let x = fromIndex; x <= toIndex; x++){\r\n\t\t\tif(x === _toIndex) continue;\r\n\r\n\t\t\tlet model = this.all.models[x];\r\n\t\t\tif(!model) continue;\r\n\t\t\tlet affected = takeAction(model);\r\n\t\t\tprocessed.push(affected);\r\n\t\t}\r\n\t\treturn processed;\r\n\t},\r\n\r\n\tselectRange(from, to) {\r\n\t\tlet result = { selected: [], unselected: [] };\r\n\t\tlet actionOptions = { silent: true };\r\n\t\tlet action = model => {\r\n\t\t\tlet affected = this._select(model, actionOptions);\r\n\t\t\tif (affected) {\r\n\t\t\t\tresult.selected.push(affected);\r\n\t\t\t}\r\n\t\t\treturn affected;\r\n\t\t};\r\n\t\tthis._processRange(from, to, action);\r\n\t\tthis._triggerChange(result);\r\n\t\treturn result;\r\n\t},\r\n\tunselectRange(from, to) {\r\n\t\tlet result = { selected: [], unselected: [] };\r\n\t\tlet actionOptions = { silent: true };\r\n\t\tlet action = model => {\r\n\t\t\tlet affected = this._unselect(model, actionOptions);\r\n\t\t\tif (affected) {\r\n\t\t\t\tresult.unselected.push(affected);\r\n\t\t\t}\r\n\t\t\treturn affected;\r\n\t\t};\r\n\t\tthis._processRange(from, to, action);\r\n\t\tthis._triggerChange(result);\r\n\t\treturn result;\r\n\t},\r\n\ttoggleRange(from, to) {\r\n\t\tlet result = { selected: [], unselected: [] };\r\n\t\tlet actionOptions = { silent: true };\r\n\t\tlet action = model => {\r\n\t\t\tlet toggled = this._toggle(model, actionOptions);\r\n\t\t\tresult.selected.push(...toggled.selected);\r\n\t\t\tresult.unselected.push(...toggled.unselected);\r\n\t\t\treturn toggled;\r\n\t\t};\r\n\t\tthis._processRange(from, to, action);\r\n\t\tthis._triggerChange(result);\r\n\t\treturn result;\r\n\t},\r\n\tclear(){\r\n\t\tlet result = {\r\n\t\t\tunselected: _.clone(this.selected.models),\r\n\t\t};\r\n\t\tthis.selected.reset();\r\n\t\tthis._triggerChange(result);\r\n\t},\r\n\r\n\tgetValue(){\r\n\t\tlet results = this.selected.map(model => this.extractValue(model));\r\n\t\tif (this.isMultiple()){\r\n\t\t\treturn results;\r\n\t\t} \r\n\t\telse {\r\n\t\t\treturn results[0];\r\n\t\t}\r\n\t},\r\n\r\n\textractValue(model) {\r\n\t\treturn model;\r\n\t}\r\n\r\n});\r\n\r\n\r\n\r\nexport * from './init-selector-mixin';\r\n\r\nexport default Selector;\r\n","import _ from 'underscore';\r\nimport { betterResult, buildByKey, buildViewByKey, comparator, getOption, mix, paramsToObject, triggerMethod } from 'bbmn-utils';\r\nimport { BaseClass, Events, MnObject, Router, history, isClass } from 'bbmn-core';\r\nimport $ from 'jquery';\r\nimport { App, Process, startableMixin } from 'bbmn-components';\r\nimport { childrenableMixin } from 'bbmn-mixins';\r\n\r\nfunction get(router) {\r\n\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\tvar key = arguments[2];\r\n\tvar update = arguments[3];\r\n\r\n\r\n\tvar value = betterResult(opts, key, { context: router, args: [router] });\r\n\tif (value == null) {\r\n\t\tvalue = router.getOption(key, { args: [router] });\r\n\t\tif (update) opts[key] = value;\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n// converts route method arguments to plain object;\r\n// _normalizeRegisterRouteArguments\r\n// { route, rawRoute, callback, name }\r\nfunction routeArgumentsToObject(router, route, name, callback) {\r\n\tvar opts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\r\n\r\n\r\n\tvar context = {};\r\n\r\n\tif (_.isObject(route)) {\r\n\t\tcontext = route;\r\n\r\n\t\t//then second argument is probably options;\r\n\t\t_.extend(opts, name);\r\n\t} else if (_.isFunction(name)) {\r\n\t\t_.extend(context, { route: route, callback: name, name: _.uniqueId('routerAction') });\r\n\t} else {\r\n\t\t_.extend(context, { route: route, name: name, callback: callback });\r\n\t}\r\n\r\n\tvar isRouterHoldsActions = get(router, opts, 'isRouterHoldsActions', true);\r\n\r\n\t// last chance to get callback from router instance by name\r\n\t// this behavior can be disabled through `isRouterHoldsActions` options\r\n\tif (!_.isFunction(context.callback) && isRouterHoldsActions && _.isFunction(router[context.name])) {\r\n\r\n\t\tcontext.callback = router[context.name];\r\n\t}\r\n\r\n\t//store original route\r\n\tcontext.rawRoute = context.route;\r\n\r\n\t!context.name && (context.name = _.uniqueId('routerAction'));\r\n\r\n\t//converts route to RegExp pattern\r\n\tif (!_.isRegExp(context.route)) context.route = router._routeToRegExp(context.route);\r\n\r\n\t// by default backbone router wraps every callback with own wrapper\r\n\t// which in turn call actual callback with correct arguments on route\r\n\t// this callback was inlined and can not be overrided, so now its possible\t\r\n\tcontext.callbackWrapper = _.bind(router._processCallback, router, context);\r\n\r\n\treturn context;\r\n}\r\n\r\nfunction createActionContext(router, routeContext, fragment) {\r\n\tvar options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\r\n\r\n\r\n\tvar rawArgs = router._extractParameters(routeContext.route, fragment);\r\n\r\n\tvar result = _.extend({}, routeContext, { fragment: fragment, rawArgs: rawArgs }, options, { options: options });\r\n\r\n\tvar args = rawArgs.slice(0);\r\n\tvar queryString = args.pop();\r\n\r\n\t_.extend(result, { qs: prepareActionQueryString(router, queryString) });\r\n\t_.extend(result, { args: prepareActionArguments(routeContext.rawRoute, args) });\r\n\r\n\tif (result.routeType == null) {\r\n\t\tresult.routeType = 'route';\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction prepareActionQueryString(router, queryString) {\r\n\tif (_.isString(queryString)) return router.queryStringParser(queryString);else return {};\r\n}\r\n\r\nfunction prepareActionArguments(rawRoute, args) {\r\n\r\n\tvar params = rawRoute.match(/:([^/|)]+)/g) || [];\r\n\r\n\tvar res = {};\r\n\t_(params).each(function (name, index) {\r\n\t\tname = name.substring(1);\r\n\r\n\t\tif (args == null) return;\r\n\r\n\t\tif (name in res && _.isArray(res[name])) res[name].push(args[index]);else if (name in res && !_.isArray(res[name])) res[name] = [res[name]].concat(args[index]);else res[name] = args[index];\r\n\t});\r\n\treturn res;\r\n}\r\n\r\nfunction toPromise(arg) {\r\n\tvar resolve = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n\r\n\tif (arg instanceof Promise || arg && _.isFunction(arg.then)) return arg;else if (arg instanceof Error) return Promise.reject(arg);else return resolve ? Promise.resolve(arg) : Promise.reject(arg);\r\n}\r\n\r\nfunction getCallbackFunction(callback, executeResult) {\r\n\treturn function () {\r\n\t\ttry {\r\n\t\t\texecuteResult.value = callback && callback.apply(undefined, arguments);\r\n\t\t} catch (exception) {\r\n\t\t\texecuteResult.value = exception;\r\n\t\t}\r\n\t\texecuteResult.promise = toPromise(executeResult.value);\r\n\t\treturn executeResult.value;\r\n\t};\r\n}\r\n\r\nfunction processCallback(router, actionContext, routeType) {\r\n\r\n\tvar args = router.getOption('classicMode') ? actionContext.rawArgs || [] : [actionContext];\r\n\r\n\tvar asPromise = router.getOption('callbackAsPromises');\r\n\tvar executeResult = {};\r\n\tvar callback = getCallbackFunction(actionContext.callback, executeResult, asPromise);\r\n\r\n\trouter.triggerEvent('before:' + routeType, actionContext);\r\n\r\n\tvar shouldTriggerEvent = router.execute(callback, args);\r\n\tif (shouldTriggerEvent !== false) {\r\n\t\trouter.triggerEvent(routeType, actionContext);\r\n\t\tif (routeType == 'route' || routeType == 'backroute') router.lastAttempt = actionContext;\r\n\t\thistory.actionContext = actionContext;\r\n\t}\r\n\r\n\texecuteResult.promise.then(function (arg) {\r\n\t\trouter.triggerEvent('after:' + routeType, actionContext);\r\n\t\treturn arg;\r\n\t}, function (error) {\r\n\t\trouter.triggerEvent('error:' + routeType, error, actionContext);\r\n\t\trouter.handleError(error, actionContext);\r\n\t});\r\n\r\n\treturn executeResult.value;\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\n//import $ from 'jquery';\r\n\r\nvar routeErrorHandler = {\r\n\thandlers: {\r\n\t\t'js:error': function jsError(error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t},\r\n\thandle: function handle(error, context, args) {\r\n\t\tvar _this = this;\r\n\r\n\t\tvar handlers = this._getHandleContext(error, context, args) || {};\r\n\t\treturn _(handlers).some(function (options, key) {\r\n\t\t\treturn _this.applyHandler(key, options);\r\n\t\t});\r\n\t},\r\n\tapplyHandler: function applyHandler(key) {\r\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n\r\n\t\tvar handler = this.getHandler(key, options);\r\n\t\tif (!handler) return;\r\n\t\tvar context = options.context,\r\n\t\t    args = options.args;\r\n\r\n\t\treturn handler.apply(context, args);\r\n\t},\r\n\tgetHandler: function getHandler(key) {\r\n\t\tif (_.isFunction(this.handlers[key])) return this.handlers[key];\r\n\t},\r\n\tsetHandler: function setHandler(key, handler, bindTo) {\r\n\t\tif (!_.isString(key) || key === '') throw new Error('setHandler first argument must be a non empty string');\r\n\r\n\t\tif (!_.isFunction(handler)) {\r\n\t\t\tdelete this.handlers[key];\r\n\t\t} else {\r\n\t\t\tif (bindTo) {\r\n\t\t\t\thandler = handler.bind(bindTo);\r\n\t\t\t}\r\n\t\t\tthis.handlers[key] = handler;\r\n\t\t}\r\n\t},\r\n\tsetHandlers: function setHandlers(hash, bindTo) {\r\n\t\tvar _this2 = this;\r\n\r\n\t\tvar nullable = hash === null;\r\n\t\tvar items = nullable && this.handlers || hash;\r\n\t\tif (!_.isObject(items)) return;\r\n\t\t_(items).each(function (handler, key) {\r\n\t\t\treturn _this2.setHandler(key, nullable || handler, bindTo);\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\t_getHandleContext: function _getHandleContext(error, context) {\r\n\t\tvar _this3 = this;\r\n\r\n\t\tvar args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n\r\n\r\n\t\tif (_.isArray(error)) {\r\n\t\t\treturn _(error).reduce(function (memo, item) {\r\n\t\t\t\treturn _.extend(memo, _this3._getHandleContext(item, context, args));\r\n\t\t\t}, {});\r\n\t\t}\r\n\r\n\t\tif (_.isFunction(this.getHandleContext)) {\r\n\t\t\tvar custom = this.getHandleContext(error, context, args);\r\n\t\t\tif (custom != null) return custom;\r\n\t\t}\r\n\r\n\t\tif (error instanceof Error) {\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'js:error': { context: context, args: args } };\r\n\t\t} else if (_.isString(error)) {\r\n\t\t\treturn _defineProperty({}, error, { context: context, args: args });\r\n\t\t} else if (error instanceof $.Deferred().constructor) {\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'jq:xhr': { context: context, args: args } };\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// provide your own arguments processor\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\tgetHandleContext: undefined\r\n\r\n};\r\n\r\n//import paramStringToObject from '../../../utils/params-to-object/index.js';\r\n//import { Backbone, Router as BbRouter } from '../../../vendors/backbone.js';\r\n\r\nvar Router$1 = Router.extend({\r\n\r\n\t// for migrating from Mn.AppRoute\r\n\t// set to true. it will populate routes from { controller, appRoutes } structure.\r\n\tisMarionetteStyle: false,\r\n\r\n\t// by default Backbone.Router tries to lookup callback in router instance by name `callback = this[name]` if there is no callback provided\r\n\t// its recomend to turn this feature to false\r\n\t// default value is true for Backbone.Router compatability\r\n\tisRouterHoldsActions: true,\r\n\r\n\t// by default Backbone.Router `route` method returns router itself instead of just created routeContext for chaining purposes.\r\n\t// you can change this behavior turning this feature to false\r\n\tisRouteChaining: true,\r\n\r\n\t//in classic mode actions receive argument array\r\n\t//if you need actionContext instead turn this option to false\r\n\tclassicMode: true,\r\n\r\n\tconstructor: function constructor() {\r\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\r\n\t\tthis.options = _.extend({}, _.result(this, 'options'), options);\r\n\r\n\t\tRouter.apply(this, arguments);\r\n\t},\r\n\tgetOption: function getOption$$1() {\r\n\t\treturn getOption.apply(undefined, [this].concat(Array.prototype.slice.call(arguments)));\r\n\t},\r\n\r\n\ttriggerMethod: triggerMethod,\r\n\t/*\r\n \r\n \tinitialize methods\r\n \t\"when a router initialized\"\r\n \r\n */\r\n\r\n\t//by default router expects that routes will result in { route, callback } hash\r\n\t//we are extending this to provide more flexibility\r\n\t// - overrided\r\n\t_bindRoutes: function _bindRoutes() {\r\n\r\n\t\tvar routes = this.getInitRoutes();\r\n\t\tif (!_.size(routes)) return;\r\n\t\tthis.addRoutes(routes);\r\n\t},\r\n\tgetInitRoutes: function getInitRoutes() {\r\n\t\tvar routes = void 0;\r\n\t\tif (this.getOption('isMarionetteStyle')) {\r\n\t\t\tvar controller = this.getOption('controller') || {};\r\n\t\t\tvar approutes = this.getOption('appRoutes') || {};\r\n\t\t\troutes = _(approutes).map(function (name, route) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\troute: route, name: name,\r\n\t\t\t\t\tcallback: controller[name]\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\troutes = this.getOption('routes');\r\n\t\t}\r\n\t\treturn routes;\r\n\t},\r\n\r\n\r\n\t/*\r\n \tmanipulating routes\r\n \tadding\r\n */\r\n\r\n\t// refactored original route method\r\n\t// chain:true by default is for supporting default behavior\r\n\t// routerHoldsActions: true - backbone router tries to get callback from router itself if there is no callback provided. \r\n\t// this options allow to support this behavior, but its recomended not to hold action inside router instance\r\n\t// - overrided\r\n\troute: function route(_route, name, callback) {\r\n\t\tvar opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\r\n\r\n\r\n\t\t//normalizing passed arguments and putting them into a context object\r\n\t\t//refactored from original route\r\n\t\t// let context = this._normalizeRegisterRouteArguments(route, name, callback, opts);\r\n\r\n\t\t// //extends context with result of `mergeWithRegisterRouteContext`\r\n\t\t// this._normalizeRegisterRouteContext(context);\r\n\r\n\t\t// //wrapping provided callback \r\n\t\t// this._normalizeRegisterRouteCallback(context);\r\n\r\n\t\tvar context = this._buildRouteContext(_route, name, callback, opts);\r\n\r\n\t\t//refactored for providing possibility to override\r\n\t\t//at this point context should be almost ready\r\n\t\tthis.registerRouteContext(context);\r\n\r\n\t\tthis._storeCreatedContext(context, opts);\r\n\r\n\t\treturn opts.isRouteChaining === true ? this : context;\r\n\t},\r\n\r\n\r\n\t// provide more semantic alias for route\r\n\taddRoute: function addRoute(route, name, callback) {\r\n\t\tvar opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\r\n\r\n\t\tif (opts.isRouteChaining == null) opts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tvar context = this.route(route, name, callback, opts);\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\t//process many routes at once\r\n\t//accepts object { name, routeContext | handler }\r\n\t// or array of routeContexts\r\n\taddRoutes: function addRoutes(routes) {\r\n\t\tvar _this = this;\r\n\r\n\t\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n\r\n\t\tif (opts.isRouteChaining == null) opts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tvar normalized = _(routes).chain().map(function (value, key) {\r\n\t\t\treturn _this._normalizeRoutes(value, key);\r\n\t\t}).filter(function (f) {\r\n\t\t\treturn _.isObject(f);\r\n\t\t}).value();\r\n\r\n\t\tif (opts.doNotReverse != true) normalized.reverse();\r\n\r\n\t\tvar registered = _(normalized).map(function (route) {\r\n\t\t\treturn route && _this.addRoute(route, _.extend({ massAdd: true }, opts));\r\n\t\t});\r\n\r\n\t\tif (opts.doNotReverse != true) registered.reverse();\r\n\r\n\t\t_(registered).each(function (c) {\r\n\t\t\treturn _this._storeCreatedContext(c);\r\n\t\t});\r\n\r\n\t\treturn registered;\r\n\t},\r\n\r\n\r\n\t// internal method called by `addRoutes` to normalize provided data\r\n\t_normalizeRoutes: function _normalizeRoutes(value, key) {\r\n\t\t//let route, name, callback;\r\n\t\tvar context = void 0;\r\n\t\tif (_.isString(value)) {\r\n\t\t\tcontext = {\r\n\t\t\t\troute: key,\r\n\t\t\t\tname: value\r\n\t\t\t};\r\n\t\t} else if (_.isFunction(value)) {\r\n\t\t\tcontext = { route: key, callback: value };\r\n\t\t} else if (_.isObject(value)) {\r\n\t\t\tcontext = _.clone(value);\r\n\t\t\tif (!_.has(context, 'route')) context.route = key;else if (_.has(context, 'route') && !_.has(context, 'name')) context.name = key;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn context;\r\n\t},\r\n\t_buildRouteContext: function _buildRouteContext(route, name, callback, opts) {\r\n\r\n\t\tvar context = routeArgumentsToObject(this, route, name, callback, opts);\r\n\r\n\t\treturn this.buildRouteContext(context);\r\n\t},\r\n\r\n\r\n\t//override this method if you need more information in route context\r\n\t// should return object wich will be merged with default context\r\n\t// be aware of providing reserved properties: route, name, callback\r\n\t// this will override context defaults\r\n\tbuildRouteContext: function buildRouteContext(context) {\r\n\t\treturn context;\r\n\t},\r\n\r\n\t//finally, putting handler to the backbone.history.handlers\r\n\tregisterRouteContext: function registerRouteContext(context) {\r\n\t\thistory.route(context.route, context.callbackWrapper, context);\r\n\t},\r\n\r\n\r\n\t//store registered context for further use\r\n\t_storeCreatedContext: function _storeCreatedContext(context) {\r\n\t\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n\t\tthis.routeContexts || (this.routeContexts = {});\r\n\t\tif (!opts.massAdd) this.routeContexts[context.name] = context;\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\t/*\r\n \r\n \tprocess route methods\t\t\r\n \t\"when route happens\"\r\n \r\n */\r\n\r\n\t//inner route handler\r\n\t//preparing actionContext and calls public processCallback\r\n\t_processCallback: function _processCallback(routeContext, fragment) {\r\n\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n\t\tvar actionContext = createActionContext(this, routeContext, fragment, options);\r\n\t\tactionContext.restart = function () {\r\n\t\t\treturn actionContext.callbackWrapper(fragment, options);\r\n\t\t};\r\n\t\tvar result = this.processCallback(actionContext, actionContext.routeType, options);\r\n\t\treturn result;\r\n\t},\r\n\r\n\r\n\t//by default behave as original router\r\n\t//override this method to process action by your own\r\n\tprocessCallback: function processCallback$$1(actionContext, routeType) {\r\n\r\n\t\treturn processCallback(this, actionContext, routeType);\r\n\t},\r\n\thandleError: function handleError(error, action) {\r\n\t\trouteErrorHandler.handle(error, this, [action]);\r\n\t},\r\n\r\n\r\n\t//just triggers appropriate events\r\n\t// triggerRouteEvents(context, event, name, ...args) {\r\n\t// \tif (event == 'route') {\r\n\t// \t\tthis.lastActionContext = context;\r\n\t// \t}\r\n\t// \tthis.trigger(`${event}:${name}`, ...args);\r\n\t// \tthis.trigger(event, name, ...args);\r\n\t// \tBackbone.history.trigger(event, this, name, ...args);\r\n\t// },\r\n\r\n\ttriggerEvent: function triggerEvent(event, context) {\r\n\t\tthis.trigger(event, context);\r\n\t\thistory.trigger(event, context);\r\n\t},\r\n\r\n\r\n\t//converts string to object\r\n\t//default implementation, can be overriden by user\r\n\tqueryStringParserOptions: { complex: true },\r\n\tqueryStringParser: function queryStringParser(string, opts) {\r\n\t\tvar options = _.extend({}, this.getOption('queryStringParserOptions'), opts);\r\n\t\treturn paramsToObject(string, options);\r\n\t},\r\n\r\n\r\n\t// navigate(...args){\r\n\t// \thistoryNavigate(...args);\r\n\t// \treturn this;\r\n\t// },\r\n\r\n\t_routeToRegExp: function _routeToRegExp(route) {\r\n\r\n\t\tvar optionalParam = /\\((.*?)\\)/g;\r\n\t\tvar namedParam = /(\\(\\?)?:\\w+/g;\r\n\t\tvar splatParam = /\\*\\w+/g;\r\n\t\tvar escapeRegExp = /[-{}[]+?.,\\\\\\^$|#\\s]/g;\r\n\r\n\t\troute = route.replace(escapeRegExp, '\\\\$&').replace(optionalParam, '(?:$1)?').replace(namedParam, function (match, optional) {\r\n\t\t\treturn optional ? match : '([^/?]+)';\r\n\t\t}).replace(splatParam, '([^?]*?)');\r\n\t\tvar flags = this.getOption('routeCaseInsensitive') ? 'i' : '';\r\n\t\treturn new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$', flags);\r\n\t},\r\n\r\n\r\n\t/*\r\n \tSome API methods\r\n */\r\n\r\n\tgetContextByFragment: function getContextByFragment(fragment) {\r\n\t\tif (!_.isString(fragment)) return;\r\n\t\t//let contexts = this.routeContexts;\r\n\t\t//console.log('Router contexts', contexts);\r\n\t\tvar result = _(this.routeContexts).find(function (cntx) {\r\n\t\t\treturn cntx.route.test(fragment);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n});\r\n\r\nvar pathStripper = /#.*$/;\r\n\r\nvar historyApi = {\r\n\tdecodeFragment: function decodeFragment(fragment) {\r\n\t\tfragment = history.getFragment(fragment || '');\r\n\t\tfragment = fragment.replace(pathStripper, '');\r\n\t\treturn history.decodeFragment(fragment);\r\n\t},\r\n\r\n\t// supports passing options to the callback\r\n\t// by using new version of loadUrl\t\r\n\tnavigate: function navigate(fragment, opts) {\r\n\r\n\t\tvar options = opts === true ? { trigger: true } : _.isObject(opts) ? _.clone(opts) : {};\r\n\r\n\t\tvar trigger = options.trigger;\r\n\r\n\t\toptions.trigger = false;\r\n\r\n\t\tvar decodedFragment = this.decodeFragment(fragment);\r\n\t\tif (history.fragment == decodedFragment) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thistory.navigate(fragment, options);\r\n\r\n\t\tif (trigger) {\r\n\t\t\treturn historyApi.loadUrl(fragment, opts);\r\n\t\t}\r\n\t},\r\n\texecute: function execute(fragment, opts) {\r\n\t\tfragment = history.fragment = history.getFragment(fragment);\r\n\r\n\t\tvar executed = historyApi.executeHandler(fragment, opts);\r\n\t\tif (!executed) {\r\n\t\t\trouteErrorHandler.handle('not:found', opts.context, [fragment]);\r\n\t\t}\r\n\t\treturn executed;\r\n\t},\r\n\r\n\r\n\t// original loadUrl does not pass options to the callback\r\n\t// and this one does\r\n\tloadUrl: function loadUrl(fragment) {\r\n\t\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n\r\n\t\t// If the root doesn't match, no routes can match either.\r\n\t\tif (!history.matchRoot()) return false;\r\n\t\treturn historyApi.execute(fragment, opts);\r\n\r\n\t\t// fragment = history.fragment = history.getFragment(fragment);\r\n\r\n\t\t// let executed = historyApi.executeHandler(fragment, opts);\r\n\t\t// if (!executed) {\r\n\t\t// \terrorHandler.handle('not:found', opts.context, [fragment]);\r\n\t\t// }\r\n\t\t// return executed;\r\n\t},\r\n\r\n\r\n\t// default test handler\r\n\t//TODO: think about constraints check\r\n\ttestHandler: function testHandler(handler, fragment) {\r\n\t\treturn handler.route.test(fragment);\r\n\t},\r\n\r\n\r\n\t//also accepts test function, if you wish test handlers by your own\r\n\tfindHandler: function findHandler(fragment, customTest) {\r\n\t\tvar test = _.isFunction(customTest) ? customTest : historyApi.testHandler;\r\n\t\tfragment = history.getFragment(fragment);\r\n\t\treturn _.filter(history.handlers || [], function (handler) {\r\n\t\t\treturn test(handler, fragment);\r\n\t\t})[0];\r\n\t},\r\n\texecuteHandler: function executeHandler(fragment) {\r\n\t\tvar opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\t\tvar resultContext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n\r\n\t\tvar handler = historyApi.findHandler(fragment, opts.testHandler);\r\n\r\n\t\thandler && (resultContext.value = handler.callback(fragment, opts));\r\n\r\n\t\treturn !!handler;\r\n\t},\r\n\r\n\t// this start replaces native history loadUrl and test handler\r\n\tstart: function start(options) {\r\n\r\n\t\tif (history.loadUrl !== historyApi.loadUrl) history.loadUrl = historyApi.loadUrl;\r\n\r\n\t\tvar result = history.start(options);\r\n\r\n\t\treturn result;\r\n\t},\r\n\tisStarted: function isStarted() {\r\n\t\treturn !!history.started;\r\n\t},\r\n\tgetUrlPath: function getUrlPath() {\r\n\t\treturn history.fragment.split('?')[0];\r\n\t},\r\n\tchangeUrlQueryString: function changeUrlQueryString(qs) {\r\n\t\tvar url = this.getUrlPath();\r\n\t\tif (qs) {\r\n\t\t\turl = [url, qs].join('?');\r\n\t\t}\r\n\t\treturn this.navigate(url, { trigger: false });\r\n\t}\r\n};\r\n\r\nvar Watcher = mix(BaseClass).with(Events).extend({\r\n\tconstructor: function constructor() {\r\n\t\tBaseClass.apply(this, arguments);\r\n\t\tthis.isWatching = false;\r\n\t\tthis.entries = [];\r\n\t},\r\n\tstart: function start() {\r\n\t\tif (this.isWatching) return;\r\n\t\tthis.isWatching = true;\r\n\t\tthis.listenTo(history, 'route', this.onRoute);\r\n\t\tthis.listenTo(history, 'backroute', this.onBackRoute);\r\n\t},\r\n\tstop: function stop() {\r\n\t\tthis.stopListening(history);\r\n\t\tthis.entries.length = 0;\r\n\t\tthis.isWatching = false;\r\n\t},\r\n\r\n\tisActionContext: function isActionContext(cntx) {\r\n\t\treturn _.isObject(cntx) && _.isString(cntx.fragment);\r\n\t},\r\n\thasElements: function hasElements() {\r\n\t\treturn this.entries.length > 0;\r\n\t},\r\n\tcanGoBack: function canGoBack() {\r\n\t\treturn this.hasElements();\r\n\t},\r\n\tonRoute: function onRoute(actionContext) {\r\n\r\n\t\tif (!this.isActionContext(actionContext)) return;\r\n\r\n\t\tif (this.isActionContext(this.lastElement)) {\r\n\t\t\tthis.entries.push(this.lastElement);\r\n\t\t}\r\n\t\tthis.lastElement = actionContext;\r\n\t},\r\n\tonBackRoute: function onBackRoute(actionContext) {\r\n\t\tif (!this.isActionContext(actionContext) || !this.isActionContext(actionContext.gobackContext)) return;\r\n\r\n\t\tvar lookFor = actionContext.gobackContext;\r\n\t\tvar index = this.entries.indexOf(lookFor);\r\n\t\tif (index >= 0) {\r\n\t\t\tthis.entries = this.entries.slice(0, index);\r\n\t\t\tthis.lastElement = lookFor;\r\n\t\t}\r\n\t},\r\n\tgoBack: function goBack() {\r\n\t\tif (!this.canGoBack()) return;\r\n\t\tvar last = _.last(this.entries);\r\n\t\thistoryApi.navigate(last.fragment, { trigger: true, routeType: 'backroute', gobackContext: last });\r\n\t}\r\n});\r\n\r\nvar historyWatcher = new Watcher();\r\n\r\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\r\nvar PageRouter = Router$1.extend({\r\n\r\n\tclassicMode: false,\r\n\tisRouterHoldsActions: false,\r\n\tisRouteChaining: false,\r\n\tcallbackAsPromises: true,\r\n\trouteCaseInsensitive: true,\r\n\r\n\tsetTitleOnPageStart: true,\r\n\r\n\tregisterPageRoutes: function registerPageRoutes(page) {\r\n\t\tvar _this = this;\r\n\r\n\t\tvar contexts = page.getRoutesContexts({ reverse: true });\r\n\t\t_.each(contexts, function (context) {\r\n\t\t\tvar callback = function callback() {\r\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n\t\t\t\t\targs[_key] = arguments[_key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _this.startPage.apply(_this, [page].concat(args));\r\n\t\t\t};\r\n\t\t\t_this.addRoute(context.route, context.name, callback);\r\n\t\t});\r\n\t},\r\n\thandleError: function handleError(process, action) {\r\n\t\tvar args = void 0,\r\n\t\t    error = void 0;\r\n\r\n\t\tif (process instanceof Process) {\r\n\t\t\targs = [].slice.call(process.errors);\r\n\t\t\terror = args.shift();\r\n\t\t\targs.push(action);\r\n\t\t} else {\r\n\t\t\terror = process;\r\n\t\t\targs = [action];\r\n\t\t}\r\n\r\n\t\trouteErrorHandler.handle(error, this, args);\r\n\t},\r\n\tstartPage: function startPage(page) {\r\n\t\tvar _this2 = this;\r\n\r\n\t\tfor (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\r\n\t\t\targs[_key2 - 1] = arguments[_key2];\r\n\t\t}\r\n\r\n\t\treturn this._beforePageStart(page).then(function () {\r\n\t\t\treturn page.start.apply(page, _toConsumableArray(args));\r\n\t\t}).then(function () {\r\n\t\t\treturn _this2._afterPageStart.apply(_this2, [page].concat(_toConsumableArray(args)));\r\n\t\t});\r\n\t},\r\n\t_beforePageStart: function _beforePageStart() {\r\n\t\tthis.beforePageStart();\r\n\t\tif (this.previousPage && this.previousPage.isStarted()) return this.previousPage.stop();else return Promise.resolve();\r\n\t},\r\n\tbeforePageStart: function beforePageStart() {},\r\n\t_afterPageStart: function _afterPageStart(page) {\r\n\t\tthis.previousPage = page;\r\n\t\tthis.afterPageStart(page);\r\n\t\tthis._setPageTitle(page);\r\n\t},\r\n\tafterPageStart: function afterPageStart() {},\r\n\t_setPageTitle: function _setPageTitle(page) {\r\n\t\tif (!this.getOption('setTitleOnPageStart')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar title = page.getTitle();\r\n\t\tthis.setPageTitle(title, page);\r\n\t},\r\n\r\n\r\n\t//implement your set title logic here\r\n\t//accepts: title, page\r\n\tsetPageTitle: function setPageTitle(title) {\r\n\t\tdocument.title = title;\r\n\t},\r\n\trestartLastAttempt: function restartLastAttempt() {\r\n\t\tif (this.lastAttempt) return this.lastAttempt.restart();\r\n\t}\r\n});\r\n\r\nvar RoutesMixin = {\r\n\tinitializeRoutes: function initializeRoutes() {\r\n\t\tif (this.initializeRouter()) {\r\n\t\t\tthis._buildRoutesContexts();\r\n\t\t}\r\n\t},\r\n\tinitializeRouter: function initializeRouter() {\r\n\t\tif (this.getOption('shouldCreateRouter') && !this.router) {\r\n\t\t\tthis.router = this._createRouter();\r\n\t\t\tthis._shouldRegisterAllRoutes = true;\r\n\t\t}\r\n\r\n\t\tif (this.getOption('shouldRegisterAllRoutes')) {\r\n\t\t\tthis._shouldRegisterAllRoutes = true;\r\n\t\t}\r\n\r\n\t\treturn !!this.router;\r\n\t},\r\n\t_createRouter: function _createRouter() {\r\n\t\tvar Router$$1 = this.getOption('Router') || PageRouter;\r\n\t\tvar options = _.extend({}, this.getOption('routerOptions'));\r\n\t\treturn new Router$$1(options);\r\n\t},\r\n\tregisterAllRoutes: function registerAllRoutes() {\r\n\t\tif (!this._shouldRegisterAllRoutes) return;\r\n\r\n\t\tvar pages = this.getAllChildren({ reverse: true, includeSelf: true, force: true });\r\n\r\n\t\tvar router = this.router;\r\n\t\t_(pages).each(function (page) {\r\n\t\t\treturn router.registerPageRoutes(page);\r\n\t\t});\r\n\t},\r\n\t_buildRoutesContexts: function _buildRoutesContexts() {\r\n\t\tvar _this = this;\r\n\r\n\t\tvar routes = this.getOption('routes', { args: [this] });\r\n\t\tif (routes == null) return;\r\n\t\tif (_.isString(routes)) routes = [routes];\r\n\r\n\t\tvar result = [];\r\n\t\tvar config = this.getRoutesConfig();\r\n\t\t_(routes).each(function (route, index) {\r\n\t\t\tvar context = _this._normalizeRoutesContextRoute(route, index, config);\r\n\t\t\t_.isObject(context) && result.push(context);\r\n\t\t});\r\n\t\tthis.routesContext = result;\r\n\t\treturn this.routesContext;\r\n\t},\r\n\t_normalizeRoutesContextRoute: function _normalizeRoutesContextRoute(arg, index) {\r\n\t\tvar config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n\t\tif (arguments.length < 2) {\r\n\t\t\tconfig = this.getRoutesConfig();\r\n\t\t}\r\n\t\tvar context = { page: this };\r\n\t\tif (arg == null) return;\r\n\t\tif (_.isString(arg)) {\r\n\t\t\t_.extend(context, { route: arg, rawRoute: arg });\r\n\t\t} else if (_.isFunction(arg)) {\r\n\t\t\targ = arg.call(this, this, index);\r\n\t\t\treturn this._normalizeRoutesContextRoute(arg, index);\r\n\t\t} else {\r\n\t\t\t_.extend(context, arg);\r\n\t\t}\r\n\t\tvar name = _.isString(index) && index || context.name || context.route || _.uniqueId('route');\r\n\t\tcontext.name = name;\r\n\r\n\t\tif (_.isNumber(index) && context.order == null) context.order = index;\r\n\r\n\t\tif (!context.rawRoute) context.rawRoute = context.route;\r\n\r\n\t\tif (config.relative && config.parentContext && config.parentContext.route) context.route = config.parentContext.route + '/' + context.route;\r\n\r\n\t\tcontext.getUrl = function () {\r\n\t\t\tvar data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\t\t\treturn this.route.replace(/:([^/?]+)/, function (found, group) {\r\n\t\t\t\treturn data[group];\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn context;\r\n\t},\r\n\tgetRoutesConfig: function getRoutesConfig() {\r\n\t\tvar config = _.extend({\r\n\t\t\trelative: this.getOption('relativeRoutes', { args: [this] }),\r\n\t\t\tparent: this.parent,\r\n\t\t\tparentContext: this.parent && _.isFunction(this.parent.getMainRouteContext) && this.parent.getMainRouteContext()\r\n\t\t}, this.getOption('routesConfig', { args: [this] }));\r\n\r\n\t\treturn config;\r\n\t},\r\n\tgetRoutesContexts: function getRoutesContexts() {\r\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\t\tvar clone = opts.clone,\r\n\t\t    reverse = opts.reverse;\r\n\r\n\t\tvar result = this.routesContext || [];\r\n\t\tif (clone || reverse) result = [].slice.call(result);\r\n\t\tif (reverse) result.reverse();\r\n\t\treturn result;\r\n\t},\r\n\tgetMainRouteContext: function getMainRouteContext() {\r\n\r\n\t\tif (this.mainRouteContext) return this.mainRouteContext;\r\n\t\tthis.mainRouteContext = _(this.getRoutesContexts()).chain().sortBy(function (a, b) {\r\n\t\t\treturn comparator([[b, a, function (c) {\r\n\t\t\t\treturn c.main;\r\n\t\t\t}], [a, b, function (c) {\r\n\t\t\t\treturn c.order;\r\n\t\t\t}]]);\r\n\t\t}).take(1).value()[0];\r\n\r\n\t\treturn this.mainRouteContext;\r\n\t}\r\n};\r\n\r\nfunction _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\r\nvar BasePage = mix(MnObject).with(childrenableMixin, startableMixin, RoutesMixin);\r\n\r\nvar Page = BasePage.extend({\r\n\tconstructor: function constructor() {\r\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\t\tBasePage.apply(this, arguments);\r\n\r\n\t\t//root and parent is childrenable options\r\n\t\tthis.mergeOptions(opts, ['app', 'router', 'canNotStart', 'onStart', 'onBeginStart', 'onBeforeStart', 'onEndStart', 'onStop', 'onBeginStop', 'onBeforeStop', 'onEndStop']);\r\n\r\n\t\t// resides in routes-mixin\r\n\t\tthis.initializeRoutes();\r\n\r\n\t\t// resides in ChildrenableMixin\r\n\t\tthis.initializeChildren();\r\n\r\n\t\t// resides in routes-mixin\r\n\t\tthis.registerAllRoutes();\r\n\r\n\t\tthis.initializeEvents();\r\n\t},\r\n\tgetOption: function getOption$$1() {\r\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n\t\t\targs[_key] = arguments[_key];\r\n\t\t}\r\n\r\n\t\treturn getOption.apply(undefined, [this].concat(_toConsumableArray$1(args)));\r\n\t},\r\n\tgetLabel: function getLabel(data) {\r\n\t\tvar result = this.getOption('label', { args: [this, data] });\r\n\t\treturn result;\r\n\t},\r\n\tgetTitle: function getTitle(data) {\r\n\t\tvar result = this.getOption('title', { args: [this, data] });\r\n\t\treturn result || this.getLabel(data);\r\n\t},\r\n\tgetMenuLabel: function getMenuLabel(data) {\r\n\t\tvar result = this.getOption('menuLabel', { args: [this, data], default: this.getLabel(data) });\r\n\t\treturn result;\r\n\t},\r\n\tbuildChildOptions: function buildChildOptions(options) {\r\n\t\tvar root = this.getRoot();\r\n\t\tvar defs = {\r\n\t\t\troot: root,\r\n\t\t\tparent: this.parent,\r\n\t\t\trouter: this.router,\r\n\t\t\tapp: this.app\r\n\t\t};\r\n\t\tvar result = _.extend(defs, options);\r\n\t\treturn result;\r\n\t},\r\n\tgetSiblings: function getSiblings() {\r\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\r\n\t\tvar parent = this.getParent();\r\n\t\tvar options = _.extend({ exclude: [this] }, opts);\r\n\t\treturn parent && parent.getChildren(options) || [];\r\n\t},\r\n\tgetHashes: function getHashes(data) {\r\n\t\tvar page = this;\r\n\t\tvar parentHash = false;\r\n\t\tif (this.isEntityPage) {\r\n\t\t\tpage = page.getParent();\r\n\t\t\tparentHash = true;\r\n\t\t}\r\n\t\treturn this._getPageHashes(page, data, parentHash);\r\n\t},\r\n\t_getPageHashes: function _getPageHashes(page, data, isParentHash) {\r\n\t\tvar parent = page.getParent();\r\n\t\tvar root = page.getRoot();\r\n\r\n\t\treturn {\r\n\t\t\tisParentHash: isParentHash,\r\n\t\t\tpath: page.getPathHash(data),\r\n\t\t\tthis: page.getHash(data),\r\n\t\t\troot: root && root.getHash && root.getHash(data) || undefined,\r\n\t\t\tparent: parent && parent.getHash && parent.getHash(data) || undefined,\r\n\t\t\tchildren: page.getChildrenHashes(data),\r\n\t\t\tsiblings: page.getSiblingsHashes(data)\r\n\t\t};\r\n\t},\r\n\tgetPathHash: function getPathHash(data) {\r\n\t\tvar self = this.getHash(data);\r\n\t\tvar path = [self];\r\n\t\tvar parent = this.getParent();\r\n\t\tif (parent && _.isFunction(parent.getPathHash)) {\r\n\t\t\tpath.unshift.apply(path, _toConsumableArray$1(parent.getPathHash(data)));\r\n\t\t}\r\n\t\treturn path;\r\n\t},\r\n\tgetChildrenHashes: function getChildrenHashes(data) {\r\n\t\treturn this.getChildren({ map: function map(i) {\r\n\t\t\t\treturn i.getHash(data);\r\n\t\t\t}, visible: true });\r\n\t},\r\n\tgetSiblingsHashes: function getSiblingsHashes(data) {\r\n\t\treturn this.getSiblings({ map: function map(i) {\r\n\t\t\t\treturn i.getHash(data);\r\n\t\t\t}, visible: true });\r\n\t},\r\n\tgetRoot: function getRoot() {\r\n\t\tif (this.root === true) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.root;\r\n\t\t}\r\n\t},\r\n\tgetAllPages: function getAllPages() {\r\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\r\n\t\tvar options = _.extend({}, opts, { includeSelf: true });\r\n\t\tdelete options.map;\r\n\t\tvar pages = this.getRoot().getAllChildren(options);\r\n\r\n\t\tif (_.isFunction(opts.map)) {\r\n\t\t\treturn _(pages).chain().map(opts.map).filter(function (f) {\r\n\t\t\t\treturn !!f;\r\n\t\t\t}).value();\r\n\t\t} else {\r\n\t\t\treturn pages;\r\n\t\t}\r\n\t},\r\n\tgetAllHashes: function getAllHashes() {\r\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n\t\tvar options = _.extend({ map: function map(i) {\r\n\t\t\t\treturn i.getHash();\r\n\t\t\t}, visible: true }, opts);\r\n\t\treturn this.getAllPages(options);\r\n\t},\r\n\tgetHash: function getHash(data) {\r\n\t\tvar context = this.getMainRouteContext();\r\n\r\n\t\tif (!_.isObject(context)) return;\r\n\r\n\t\tvar parent = this.getParent();\r\n\t\tvar parentCid = parent && parent.cid || undefined;\r\n\t\treturn {\r\n\t\t\tcid: this.cid,\r\n\t\t\tparentCid: parentCid,\r\n\t\t\tlabel: this.getMenuLabel(data),\r\n\t\t\torder: this.order,\r\n\t\t\troute: context.route,\r\n\t\t\turl: data ? context.getUrl(data) : context.route\r\n\t\t};\r\n\t},\r\n\t_childFilter: function _childFilter(item, index) {\r\n\t\tvar opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n\t\tvar base = BasePage.prototype._childFilter;\r\n\t\tif (base && !base.apply(this, arguments)) return;\r\n\r\n\t\tvar visible = opts.visible;\r\n\r\n\r\n\t\tif (item.isEntityPage) return;\r\n\r\n\t\tif (visible && (item.visible === false || item.hidden === true)) return;\r\n\r\n\t\treturn item;\r\n\t},\r\n\tinitializeEvents: function initializeEvents() {\r\n\t\tvar _this = this;\r\n\r\n\t\tif (this._triggerOnParentInitiallized) return;\r\n\r\n\t\tvar triggersOn = [];\r\n\t\tif (this.app) {\r\n\t\t\ttriggersOn.push(this.app);\r\n\t\t}\r\n\t\tif (this.router) {\r\n\t\t\ttriggersOn.push(this.router);\r\n\t\t}\r\n\t\tvar events = ['start', 'stop'];\r\n\t\t_.each(events, function (event) {\r\n\t\t\t_this.on(event, function () {\r\n\t\t\t\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n\t\t\t\t\targs[_key2] = arguments[_key2];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(triggersOn, function (parent) {\r\n\t\t\t\t\tparent.triggerMethod.apply(parent, ['page:' + event, _this].concat(args));\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis._triggerOnParentInitiallized = true;\r\n\t},\r\n\tgetView: function getView(opts) {\r\n\t\tvar options = _.extend({ model: this.model, collection: this.collection, page: this }, opts);\r\n\t\treturn this.buildView(options);\r\n\t},\r\n\r\n\t//good place to override build options, or build itself\r\n\tbuildView: function buildView(options) {\r\n\t\treturn this._buildViewByKey(options);\r\n\t},\r\n\t_buildViewByKey: function _buildViewByKey(options) {\r\n\t\tvar view = buildViewByKey(this, 'Layout', { options: options });\r\n\t\tif (!view) {\r\n\t\t\tview = buildViewByKey(this, 'layout', { defaultOptions: options });\r\n\t\t}\r\n\t\treturn view;\r\n\t},\r\n\tgetStartPromises: function getStartPromises() {\r\n\t\tvar _this2 = this;\r\n\r\n\t\tvar promises = this.getOption('startPromises', { args: [this] });\r\n\t\tif (!promises) return;\r\n\r\n\t\treturn _.map(promises, function (item) {\r\n\t\t\tif (_.isFunction(item)) {\r\n\t\t\t\treturn item.call(_this2, _this2);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tgetStopPromises: function getStopPromises() {\r\n\t\tvar _this3 = this;\r\n\r\n\t\tvar promises = this.getOption('stopPromises', { args: [this] });\r\n\t\tif (!promises) return;\r\n\r\n\t\treturn _.map(promises, function (item) {\r\n\t\t\tif (_.isFunction(item)) {\r\n\t\t\t\treturn item.call(_this3, _this3);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\nvar PagedApp = App.extend({\r\n\thistoryWatcher: false,\r\n\tRouter: PageRouter,\r\n\r\n\tconstructor: function constructor() {\r\n\r\n\t\tthis._pages = [];\r\n\t\tApp.apply(this, arguments);\r\n\t\tthis._initRouteErrors();\r\n\t\tthis._initPageListeners();\r\n\t},\r\n\t_initRouteErrors: function _initRouteErrors() {\r\n\t\tvar handlers = this.getOption('routeErrors', { args: [this] });\r\n\t\tif (!_.isObject(handlers)) return;\r\n\t\trouteErrorHandler.setHandlers(handlers, this);\r\n\t},\r\n\t_initPageListeners: function _initPageListeners() {\r\n\t\tthis.on('start', this._buildPages);\r\n\t\tthis.on('pages:ready', this._startHistory);\r\n\t\tthis.on('page:start', this._onPageStart);\r\n\t\tthis.on('page:stop', this._onPageStop);\r\n\t},\r\n\t_startHistoryWatcher: function _startHistoryWatcher() {\r\n\t\tif (!this.getOption('historyWatcher')) return;\r\n\t\thistoryWatcher.start();\r\n\t},\r\n\t_startHistory: function _startHistory() {\r\n\t\tif (historyApi.isStarted()) return;\r\n\r\n\t\tthis._startHistoryWatcher();\r\n\r\n\t\tvar options = this.getOption('startHistory');\r\n\t\tif (!options) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (options === true) {\r\n\t\t\toptions = { pushState: false };\r\n\t\t} else if (!_.isObject(options)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.triggerMethod('before:history:start', result);\r\n\r\n\t\tvar result = historyApi.start(options);\r\n\r\n\t\tthis.triggerMethod('history:start', result);\r\n\t},\r\n\t_buildPages: function _buildPages() {\r\n\t\tthis.triggerMethod('before:pages:ready');\r\n\t\tthis.buildPages();\r\n\t\tthis.triggerMethod('pages:ready');\r\n\t},\r\n\tbuildPages: function buildPages() {\r\n\r\n\t\tif (this.rootPage instanceof Page) return;\r\n\r\n\t\tthis.triggerMethod('before:router:create');\r\n\t\tthis.router = this.buildRouter();\r\n\t\tthis.triggerMethod('router:create', this.router);\r\n\r\n\t\tvar RootPage = this.getOption('RootPage');\r\n\t\tif (isClass(RootPage, Page)) {\r\n\t\t\tthis.rootPage = new RootPage({ router: this.router, shouldRegisterAllRoutes: true, app: this });\r\n\t\t}\r\n\t},\r\n\tbuildRouter: function buildRouter() {\r\n\t\tif (this.router instanceof PageRouter) return this.router;\r\n\t\treturn buildByKey(this, 'Router', { ctor: PageRouter });\r\n\t},\r\n\t_onPageStart: function _onPageStart() {\r\n\t\tthis.showPage.apply(this, arguments);\r\n\t},\r\n\r\n\tshowPage: _.noop,\r\n\t_onPageStop: function _onPageStop() {\r\n\t\tthis.hidePage.apply(this, arguments);\r\n\t},\r\n\r\n\thidePage: _.noop\r\n});\r\n\r\nvar index = {\r\n\tRouter: Router$1,\r\n\trouteErrorHandler: routeErrorHandler,\r\n\tPagedApp: PagedApp, PageRouter: PageRouter, Page: Page,\r\n\thistory: history, historyApi: historyApi, historyWatcher: historyWatcher\r\n};\r\n\r\nexport { Router$1 as Router, routeErrorHandler, PagedApp, PageRouter, Page, history, historyApi, historyWatcher };\r\nexport default index;\r\n\r\n//# sourceMappingURL=index.js.map\r\n","import _ from 'underscore';\r\nimport { View } from 'backbone.marionette';\r\n\r\nexport default Base => {\r\n\tif (Base == null) {\r\n\t\tBase = View;\r\n\t}\r\n\treturn Base.extend({\r\n\r\n\t\ttriggerNameEvent: true,\r\n\t\tstopEvent: true,\r\n\t\tleftIcon: true,\r\n\t\trightIcon: true,\r\n\t\tforceText: true,\r\n\t\tbeforeClickIsAlwaysPromise: true,\r\n\t\tconstructor(options){\r\n\t\t\tBase.apply(this, arguments);\r\n\t\t\tthis.mergeOptions(options, ['name']);\r\n\t\t},\r\n\r\n\t\ttagName:'button',\r\n\t\tgetTemplate(){\r\n\t\t\tlet html = [];\r\n\t\t\tlet icon = '<i></i>';\r\n\t\t\t\r\n\t\t\tif (this.getOption('leftIcon')) {\r\n\t\t\t\thtml.push(icon);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet forceText = this.getOption('forceText');\r\n\t\t\tif (this.getText() || forceText) {\r\n\t\t\t\thtml.push('<span><%= text %></span>');\r\n\t\t\t}\r\n\r\n\t\t\tif (this.getOption('rightIcon')) {\r\n\t\t\t\thtml.push(icon);\r\n\t\t\t}\r\n\t\t\treturn _.template(html.join(''));\r\n\t\t},\r\n\t\tevents(){\r\n\t\t\tif(this.getOption('noevent')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet events = {\r\n\t\t\t\tclick(e) {\r\n\t\t\t\t\tlet stop = this.getOption('stopEvent');\r\n\t\t\t\t\tif (stop) {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet before = this.beforeClick();\r\n\t\t\t\t\tif (before && before.then) {\r\n\t\t\t\t\t\tbefore.then(\r\n\t\t\t\t\t\t\tdata => this.triggerClick(data, e),\r\n\t\t\t\t\t\t\terror => this.triggerError(error, e)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.triggerClick(before, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn events;\r\n\t\t},\r\n\t\tbeforeClick(){\r\n\t\t\tlet result = this.triggerMethod('before:click');\r\n\t\t\tif(result && _.isFunction(result.then) ) {\r\n\t\t\t\treturn result;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.getOption('beforeClickIsAlwaysPromise')) {\r\n\t\t\t\t\treturn Promise.resolve(result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttriggerClick(data, event){\r\n\t\t\tlet options = {\r\n\t\t\t\tevent,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tbuttonView: this,\r\n\t\t\t};\r\n\t\t\tthis.triggerMethod('click', data, options);\r\n\t\t\tif (this.name) {\r\n\t\t\t\tthis.triggerMethod('click:' + this.name, data, options);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttriggerError(error, event){\r\n\t\t\tlet options = {\r\n\t\t\t\tevent,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tbuttonView: this,\r\n\t\t\t};\t\t\t\r\n\t\t\tthis.triggerMethod('click:fail', error, options);\r\n\t\t\tif (this.name) {\r\n\t\t\t\tthis.triggerMethod('click:'+this.name+':fail', error, options);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetText(){\r\n\t\t\treturn this.getOption('text');\r\n\t\t},\r\n\t\ttemplateContext(){\r\n\t\t\treturn {\r\n\t\t\t\ttext: this.getText()\r\n\t\t\t};\r\n\t\t},\r\n\t\tdisable(){\r\n\t\t\tthis.$el.prop('disabled', true);\r\n\t\t},\r\n\t\tenable(){\r\n\t\t\tthis.$el.prop('disabled', false);\r\n\t\t},\r\n\t});\r\n};\r\n","import { View } from '../config';\r\nimport buttonMixin from './mixin';\r\nexport {\r\n\tbuttonMixin\r\n};\r\nexport default buttonMixin(View);\r\n","\r\nimport _ from 'underscore';\r\nimport { clone, setByPath, getByPath, compareObjects, betterResult, takeFirst } from 'bbmn-utils';\r\n\r\nfunction getTriggerMethod(context){\r\n\tif(!context) { return () => {}; }\r\n\treturn _.isFunction(context.triggerMethod) ? context.triggerMethod\r\n\t\t: _.isFunction(context.trigger) ? context.trigger\r\n\t\t\t: () => {};\r\n}\r\n\r\nfunction ensureError(error, value){\r\n\tif(error instanceof Error){\r\n\t\tthrow error;\r\n\t}\r\n\treturn arguments.length > 1 ? value : error;\r\n}\r\n\r\n\r\nexport default Base => Base.extend({\r\n\r\n\tisControl: true,\r\n\tvalidateOnReady: false,\r\n\r\n\tconstructor(options){\t\t\r\n\t\tthis._initControl(options);\r\n\t\tBase.apply(this, arguments);\r\n\t\tif (this.getOption('validateOnReady')) {\r\n\t\t\tthis.once('control:ready', () => {\r\n\t\t\t\tthis.validate().catch(() => {});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.valueOptions = this.getOption('valueOptions') || {};\r\n\t},\r\n\r\n\r\n\r\n\t_onControlDestroy(){\r\n\t\tif (!this._isDestroing) {\r\n\t\t\tthis._isDestroing = true;\r\n\t\t}\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (parent && _.isFunction(parent._removeChildControl)) {\r\n\t\t\tparent._removeChildControl(this);\r\n\t\t}\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tif (children) {\r\n\t\t\t_.each(children, child => child._removeParentControl());\r\n\t\t\tchildren.length = 0;\r\n\t\t}\r\n\t\tdelete this._cntrl;\r\n\t},\r\n\t_removeChildControl(control){\r\n\t\tthis.off(control);\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tif (!children.length) { return; }\r\n\t\tlet index = children.indexOf(control);\r\n\t\tif (index === -1) return;\r\n\t\tchildren.splice(index, 1);\r\n\t},\r\n\t_addChildControl(control){\r\n\t\tlet controlName = control.getControlName();\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tlet found = _.find(children, child => child.getControlName() === controlName);\r\n\t\t!found && children.push(control);\r\n\t},\r\n\t_removeParentControl(){\r\n\t\tif(_.isObject(this._cntrl))\r\n\t\t\tdelete this._cntrl.parent;\r\n\t},\r\n\r\n\r\n\r\n\t_initControl(options = {}){\r\n\t\tif (this._controlInitialized) { return; }\r\n\r\n\t\tthis._cntrl = {};\r\n\t\tlet name = takeFirst('controlName', options, this) || 'control';\r\n\t\tthis._cntrl.name = name;\r\n\r\n\t\tlet value = takeFirst('value', options, this);\r\n\t\tvalue = this._clone(value);\r\n\t\tthis.initControlValue(value);\r\n\t\tthis.initParentControl(options);\r\n\r\n\t\tthis.once('destroy', this._onControlDestroy);\r\n\r\n\t\tthis._controlInitialized = true;\r\n\t},\r\n\tinitParentControl(options){\r\n\t\tlet parent = takeFirst('proxyTo', options, this) || takeFirst('parentControl', options, this);\r\n\t\tthis.setParentControl(parent);\r\n\t},\r\n\tsetParentControl(parent){\r\n\r\n\t\tthis._cntrl.parent = parent;\r\n\t\tif (parent && _.isFunction(parent._addChildControl)) {\r\n\t\t\tparent._addChildControl(this);\r\n\t\t}\r\n\t},\r\n\tinitControlValue(value){\r\n\t\tthis._cntrl.initial = value;\r\n\t\tthis._cntrl.value = value;\r\n\t\tthis._cntrl.notValidated = value;\r\n\t},\r\n\tgetControlName(){\r\n\t\treturn this._cntrl.name;\r\n\t},\r\n\r\n\tisSameControlValue(value){\r\n\t\tlet current = this.getControlValue();\r\n\t\treturn this.isValid() && compareObjects(current, value);\r\n\t},\r\n\r\n\tgetControlValue(key, options = {}){\r\n\t\t\r\n\t\tif(_.isObject(key)) {\r\n\t\t\toptions = key;\r\n\t\t\tkey = undefined;\r\n\t\t}\r\n\t\tlet { notValidated, clone } = options;\r\n\t\tlet valueKey = notValidated ? 'notValidated' : 'value';\r\n\t\tlet value = this._cntrl[valueKey];\r\n\t\tif (key != null) {\r\n\t\t\tvalue = getByPath(value, key);\r\n\t\t} else {\r\n\t\t\tvalue = clone ? this._clone(value) : value;\r\n\t\t}\r\n\t\tif (_.isFunction(options.transform)){\r\n\t\t\tvalue = options.transform.call(this, value);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\tsetControlValue(value, options = {}){\r\n\t\tlet  { key, notValidated } = options;\r\n\t\tvalue = this._prepareValueBeforeSet(value, { key });\r\n\t\tconst resolve = Promise.resolve(value);\r\n\t\tif (this.isSameControlValue(value)) { return resolve; }\r\n\r\n\t\tthis._cntrl.notValidated = value;\r\n\r\n\t\tif (notValidated) { return resolve; }\r\n\t\treturn this._setControlValue(value, options);\r\n\t},\r\n\r\n\t_prepareValueBeforeSet(value, { key } = {}){\r\n\t\tvalue = this.prepareValueBeforeSet(value);\r\n\t\tif (key == null) { return value; }\r\n\r\n\t\tlet current = this.getControlValue({ notValidated: true, clone: true }) || {};\r\n\t\tsetByPath(current, key, value);\r\n\t\treturn current;\r\n\t},\r\n\r\n\t//override this if you need to modify value before set\r\n\tprepareValueBeforeSet: value => value,\r\n\r\n\t_setControlValue(value, options = {}) {\r\n\t\tlet { skipValidation } = options;\r\n\t\tif (skipValidation) {\r\n\t\t\treturn this._onSetControlValueValidateSuccess(value, options);\r\n\t\t}\r\n\t\treturn this._validate(value, options)\r\n\t\t\t.then(\r\n\t\t\t\t() => this._onSetControlValueValidateSuccess(value, options), \r\n\t\t\t\terror => this._onSetControlValueValidateFail(error, value, options)\r\n\t\t\t);\r\n\t},\r\n\t_onSetControlValueValidateSuccess(value, options){\r\n\t\tthis._cntrl.previous = this._cntrl.value;\r\n\t\tthis._cntrl.value = value;\r\n\t\tthis._cntrl.isDone = false;\r\n\t\tthis._tryTriggerEvent('change', [value], options);\r\n\t\treturn Promise.resolve(value);\r\n\t},\r\n\r\n\t_onSetControlValueValidateFail(error, value, options){\r\n\t\tthis._tryTriggerEvent('change:fail', [value, error], options);\r\n\t\treturn ensureError(error, value);\r\n\t},\r\n\r\n\tisValid(){\r\n\t\treturn this._cntrl.isValid !== false;\r\n\t},\r\n\r\n\tvalidate(options = {}){\r\n\r\n\t\tlet notValidated = !this.isValid();\r\n\t\tlet value = this.getControlValue({ notValidated });\r\n\t\tlet promise = this._validate(value, options);\r\n\t\tlet _catch = options.catch;\r\n\r\n\t\tif (_catch === false) {\r\n\t\t\treturn promise;\r\n\t\t} else if(_.isFunction(_catch)) {\r\n\t\t\treturn promise.catch(_catch);\r\n\t\t} else {\r\n\t\t\treturn promise.catch(ensureError);\r\n\t\t}\r\n\t},\r\n\t_validate(value, options){\r\n\r\n\t\tlet validate = this._validatePromise(value, options);\r\n\r\n\t\treturn validate.then(\r\n\t\t\t() => this._onControlValidateSuccess(value, options),\r\n\t\t\terror => this._onControlValidateFail(error, value, options)\r\n\t\t);\r\n\t},\r\n\t_validatePromise(value, options){\r\n\t\t\r\n\t\tconst { skipChildValidate } = options;\r\n\t\tconst isControlWrapper = this._isControlWrapper();\r\n\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet childrenErrors = {\r\n\t\t\t\tchildren: {}\r\n\t\t\t};\r\n\t\t\tlet childrenPromise = this._validateChildrenControlsPromise({ skipChildValidate, isControlWrapper }, childrenErrors);\r\n\r\n\t\t\tchildrenPromise.then(() => {\r\n\r\n\t\t\t\tif (_.size(childrenErrors.children)) {\r\n\t\t\t\t\treject(childrenErrors.children);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (childrenErrors.wrapped) {\r\n\t\t\t\t\treject(childrenErrors.wrapped);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tlet promise = this._validateControlPromise(value, options);\r\n\r\n\t\t\t\tpromise.then(\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tresolve(value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t},\r\n\t_validateControlPromise(value, options){\r\n\t\tlet validate = this.getOption('controlValidate', { force: false });\r\n\t\t\t\t\r\n\t\t//if there is no validation defined, resolve\r\n\t\tif (!_.isFunction(validate)) {\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(value);\r\n\t\t}\r\n\r\n\t\tlet values = this.getParentControlValue({ notValidated: true });\r\n\t\tlet validateResult = validate.call(this, value, values, options);\r\n\r\n\t\tlet promise = Promise.resolve(value);\r\n\t\tif (validateResult && validateResult.then) {\r\n\t\t\tpromise = validateResult;\r\n\t\t} else if (validateResult) {\r\n\t\t\tpromise = Promise.reject(validateResult);\r\n\t\t}\r\n\t\treturn promise;\r\n\t},\r\n\t_validateChildrenControlsPromise({ isControlWrapper, skipChildValidate} = {}, errors = {}){\r\n\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tlet childrenPromise = Promise.resolve();\r\n\t\tif (!children.length) return childrenPromise;\r\n\r\n\t\treturn _.reduce(children, (finaly, child) => {\r\n\t\t\tlet control = child.getControlName();\r\n\r\n\t\t\tfinaly = finaly.then(() => {\r\n\r\n\t\t\t\tif (!child.validate || (skipChildValidate && control == skipChildValidate)) {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t\tlet validateResult = child.validate({ stopPropagation: true, catch: false });\r\n\r\n\t\t\t\treturn validateResult;\r\n\t\t\t}).catch(error => {\r\n\r\n\t\t\t\tif(isControlWrapper){\r\n\t\t\t\t\terrors.wrapped = error;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrors.children[control] = error;\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t});\r\n\t\t\treturn finaly;\r\n\t\t}, childrenPromise);\t\t\r\n\r\n\t},\r\n\r\n\t_onControlValidateSuccess(value, options){\r\n\t\tthis.makeValid(value, _.extend(options, { noSet: true }));\r\n\t\treturn Promise.resolve(value);\r\n\t},\r\n\tmakeValid(value, options = {}){\r\n\t\tthis._cntrl.isValid = true;\r\n\t\tif(!options.noSet && !this.isSameControlValue(value)){\r\n\t\t\tthis._setControlValue(value, { silent: true, skipValidation: true });\r\n\t\t}\r\n\t\tthis._tryTriggerEvent('valid', [value], options);\r\n\t},\r\n\t_onControlValidateFail(error, value, options){\r\n\t\tthis.makeInvalid(error, value, options);\r\n\t\treturn Promise.reject(error);\r\n\t},\r\n\tmakeInvalid(error, value, options){\r\n\t\tthis._cntrl.isValid = false;\r\n\t\tthis._tryTriggerEvent('invalid', [value, error], options);\r\n\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t_isControlWrapper()\r\n\t{\r\n\t\treturn betterResult(this.options, 'isControlWrapper', { context: this, checkAlso: this, args: [this]});\r\n\t},\r\n\tgetParentControl() {\r\n\t\tif (!this.hasParentControl()) return;\r\n\t\treturn this._cntrl.parent;\r\n\t},\r\n\thasParentControl(){\r\n\t\treturn this._cntrl && !!this._cntrl.parent;\r\n\t},\r\n\tgetParentControlValue(options) {\r\n\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (!parent || !_.isFunction(parent.getControlValue)) {\r\n\t\t\treturn this.getOption('allValues');\r\n\t\t}\r\n\t\tif (this._isControlWrapper()) {\r\n\t\t\treturn parent.getParentControlValue(options);\r\n\t\t} else {\r\n\t\t\treturn parent.getControlValue(options);\r\n\t\t}\r\n\t},\r\n\r\n\tgetChildrenControls(){\r\n\t\tif(!this._cntrl.children) {\r\n\t\t\tthis._cntrl.children = [];\r\n\t\t}\r\n\t\treturn this._cntrl.children;\r\n\t},\r\n\thandleChildControlEvent(event, controlName, ...args) {\r\n\t\tlet childEvent = controlName + ':' + event;\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\r\n\t\tlet cce = this.getOption('childControlEvents', { args: [this] }) || {};\r\n\t\tlet def = this.defaultChildControlEvents || {};\r\n\t\tif(!this._debouncedChildControlEvents) {\r\n\t\t\tthis._debouncedChildControlEvents = {};\r\n\t\t}\r\n\t\tlet dcce = this._debouncedChildControlEvents;\r\n\r\n\t\tlet defHandler = def[event];\r\n\t\tlet handler = cce[childEvent];\r\n\t\tlet handlerArguments = [];\r\n\t\tlet handlerName;\r\n\t\tif (_.isFunction(handler)) {\r\n\t\t\thandlerArguments = args;\r\n\t\t\thandlerName = childEvent;\r\n\t\t} else if(_.isFunction(defHandler)){\r\n\t\t\thandlerName = '_default:' + event;\r\n\t\t\thandler = defHandler;\r\n\t\t\thandlerArguments = [controlName, ...args];\r\n\t\t} else {\r\n\t\t\tif (controlName != 'control') {\r\n\t\t\t\ttrigger.call(this, childEvent, ...args);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet delay = this.getOption('debounceChildControlEvents');\r\n\t\tif(_.isNumber(delay) && delay > 0){\r\n\t\t\tif(!dcce[handlerName]){\r\n\t\t\t\tdcce[handlerName] = _.debounce(handler, delay);\r\n\t\t\t}\r\n\t\t\thandler = dcce[handlerName];\r\n\t\t}\r\n\r\n\t\tlet handlerResult = handler.apply(this, handlerArguments);\r\n\t\tif(handlerResult && handlerResult.then) {\r\n\t\t\thandlerResult.then(() => {\r\n\t\t\t\tcontrolName != 'control' && trigger.call(this, childEvent, ...args);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t_getEventContext(controlName){\r\n\t\tlet isControlWraper = this._isControlWrapper();\r\n\t\tlet parent = this.getParentControl();\r\n\t\tlet control = this;\r\n\t\tlet propagateParanet = this.getOption('propagateParanet') === true;\r\n\t\tif (isControlWraper && !propagateParanet) {\r\n\t\t\tcontrolName = undefined;\r\n\t\t} else if (isControlWraper && propagateParanet && parent) {\r\n\t\t\tcontrol = parent;\r\n\t\t}\r\n\t\treturn { control, controlName, isControlWraper, parent };\r\n\t},\r\n\tdefaultChildControlEvents:{\r\n\t\t'change'(controlName, value){\r\n\t\t\t//isControlWraper && (controlName = undefined);\r\n\t\t\tlet cnt = this._getEventContext(controlName);\r\n\t\t\tcnt.control.setControlValue(value, { key: cnt.controlName, skipChildValidate: cnt.controlName });\r\n\t\t},\r\n\t\t'done'(controlName, value){\r\n\t\t\tlet cnt = this._getEventContext(controlName);\r\n\t\t\tif(cnt.control != this) return;\r\n\t\t\t// let isControlWraper = this.getOption('isControlWrapper');\r\n\t\t\t// isControlWraper && (controlName = undefined);\r\n\t\t\tlet setPromise = cnt.control.setControlValue(value, { key: cnt.controlName, skipChildValidate: cnt.controlName });\r\n\t\t\tif (cnt.isControlWraper) {\r\n\t\t\t\tsetPromise = setPromise.then(() => {\r\n\t\t\t\t\tcnt.control.controlDone();\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn setPromise;\r\n\t\t},\r\n\t\t'invalid'(controlName, value, error){\r\n\t\t\tlet cnt = this._getEventContext(controlName);\r\n\r\n\t\t\t// if(this.getOption('isControlWrapper')){\r\n\t\t\t// \tcontrolName = undefined;\r\n\t\t\t// }\r\n\t\t\tcnt.control.setControlValue(value, { key: cnt.controlName, silent: true, notValidated: true });\r\n\t\t\tcnt.control.makeInvalid(error, cnt.control.getControlValue({ notValidated: true }));\r\n\t\t},\r\n\t},\r\n\r\n\tcontrolDone(){\r\n\t\tif (!this._cntrl.isValid || this._cntrl.isDone) { return; }\r\n\t\tlet value = this.getControlValue();\r\n\t\tthis._cntrl.isDone = true;\r\n\t\tthis._tryTriggerEvent('done', [value]);\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\thelpers\r\n\t*/\r\n\t_clone(value){\r\n\t\tif(_.isArray(value))\r\n\t\t\treturn value.slice(0);\r\n\t\telse if(_.isObject(value)) {\r\n\t\t\treturn clone(value);\r\n\t\t} else\r\n\t\t\treturn value;\r\n\t},\r\n\t_tryTriggerEvent(name, args = [], { silent, stopPropagation } = {}){\r\n\t\tif (silent) { return; }\r\n\t\tlet controlName = this.getControlName();\r\n\t\tlet event = 'control:' + name;\r\n\t\tlet namedEvent = controlName + ':' + name;\r\n\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\r\n\t\tlet parent = this.getParentControl();\r\n\t\t\r\n\t\tif (stopPropagation || !parent) { \r\n\t\t\ttrigger.call(this, event, ...args);\r\n\t\t\treturn; \r\n\t\t}\r\n\r\n\t\tif (_.isFunction(parent.handleChildControlEvent)) {\r\n\t\t\tparent.handleChildControlEvent(name, controlName, ...args);\r\n\t\t} else {\r\n\t\t\tlet parentTrigger = getTriggerMethod(parent);\r\n\t\t\tparentTrigger.call(parent, namedEvent, ...args);\r\n\t\t}\r\n\r\n\t\ttrigger.call(this, event, ...args);\r\n\t},\r\n\tmakeControlReady(){\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\t\ttrigger.call(this, 'control:ready');\r\n\t},\r\n\r\n}, { ControlMixin: true });\r\n","\r\n//import { isView, isViewClass } from '../../../vendors/helpers.js';\r\nimport _ from 'underscore';\r\nimport { cssClassModifiersMixin, customsMixin } from 'bbmn-mixins';\r\nimport { buildViewByKey } from 'bbmn-utils';\r\nimport ControlMixin from '../control-mixin/index.js';\r\nimport { CollectionView, View } from 'backbone.marionette';\r\nimport { isClass } from 'bbmn-core';\r\n\r\n\r\n\r\nexport default Base => {\r\n\tif (Base == null) {\r\n\t\tBase = CollectionView;\r\n\t}\r\n\r\n\tif (!isClass(Base, CollectionView)) {\r\n\t\tthrow new Error('controlView mixin can be applied only on marionette CollectionView');\r\n\t}\r\n\r\n\tlet Mixed = Base;\r\n\r\n\tif (Mixed.ControlViewMixin) {\r\n\t\treturn Mixed;\r\n\t}\r\n\r\n\tif (!Mixed.ControlMixin) {\r\n\t\tMixed = ControlMixin(Mixed);\r\n\t}\r\n\r\n\tif (!Mixed.CssClassModifiersMixin) {\r\n\t\tMixed = cssClassModifiersMixin(Mixed);\r\n\t}\r\n\r\n\tif (!Mixed.CustomsMixin) {\r\n\t\tMixed = customsMixin(Mixed);\r\n\t}\r\n\r\n\r\n\treturn Mixed.extend({\r\n\r\n\t\trenderAllCustoms: true,\r\n\t\tisControlWrapper: true,\r\n\t\tskipFirstValidationError: true,\r\n\t\tshouldShowError: false,\r\n\t\tvalidateOnReady: false,\r\n\t\t\r\n\t\tconstructor(){\r\n\t\t\tMixed.apply(this, arguments);\r\n\t\t\tthis._setControlValidInvalidListeners();\r\n\t\t\tthis.addCssClassModifier('control-wrapper');\r\n\t\t},\r\n\r\n\t\t_setControlValidInvalidListeners(){\r\n\t\t\tif(this._controlValidInvalidListeners) { return true; }\r\n\r\n\t\t\tthis.on({\r\n\t\t\t\t'control:valid': this._onControlValid,\r\n\t\t\t\t'control:invalid': this._onControlInvalid\r\n\t\t\t});\r\n\t\t\tif(this.getOption('validateOnReady')){\r\n\t\t\t\tthis.once('customs:render', () => this.makeControlReady());\r\n\t\t\t}\t\t\t\r\n\r\n\t\t\tthis._controlValidInvalidListeners = true;\r\n\t\t},\r\n\r\n\t\tgetCustoms(){\r\n\t\t\tlet customs = [];\r\n\t\t\tif (this._isControlWrapper()) {\r\n\t\t\t\tcustoms.push(this.getControlView());\r\n\t\t\t} else {\r\n\t\t\t\tcustoms.push(...this._customs);\r\n\t\t\t}\r\n\t\t\tcustoms = this.injectSystemViews(customs);\r\n\t\t\treturn customs; \r\n\t\t\t//this._prepareCustoms(customs);\r\n\t\t},\r\n\r\n\t\t_setupCustom(view){\r\n\t\t\tthis._setupChildControl(view);\r\n\t\t\tthis.setupCustom(view);\r\n\t\t},\r\n\t\t_setupChildControl(view){\r\n\t\t\tif(_.isFunction(view.setParentControl)) {\r\n\t\t\t\tview.setParentControl(this);\r\n\t\t\t}\r\n\t\t\tthis.setupChildControl(view);\r\n\t\t},\r\n\t\tsetupChildControl: _.noop,\r\n\t\tinjectSystemViews(customs = []){\r\n\t\t\tcustoms.unshift(this.getHeaderView());\r\n\t\t\tcustoms.push(\r\n\t\t\t\tthis.getErrorView(),\r\n\t\t\t\tthis.getFooterView()\t\r\n\t\t\t);\r\n\t\t\treturn customs;\r\n\t\t},\r\n\r\n\r\n\r\n\r\n\t\tgetErrorView(){\r\n\t\t\tif (!this.getOption('shouldShowError')) { return; }\r\n\t\t\tif (this.getOption('showValidateError', {force:false})) { return; }\r\n\t\t\tthis._errorView = this.buildErrorView();\r\n\t\t\treturn this._errorView;\r\n\t\t},\r\n\t\tbuildErrorView(){\r\n\t\t\treturn buildViewByKey(this, 'errorView');\r\n\t\t},\r\n\r\n\r\n\r\n\t\tgetHeaderView(){\t\t\t\r\n\t\t\treturn this.buildHeaderView({ tagName: 'header' });\r\n\t\t},\r\n\t\tbuildHeaderView(options){\r\n\t\t\treturn this._buildNestedTextView('header', options);\r\n\t\t},\r\n\t\t_buildNestedTextView(key, options){\r\n\t\t\tlet TextView = this.getOption('TextView');\r\n\t\t\tlet buildText;\r\n\t\t\tif (!TextView) {\r\n\t\t\t\tbuildText = (text, opts) => new View(_.extend({}, opts, { template: () => text }));\r\n\t\t\t}\r\n\t\t\treturn buildViewByKey(this, key, { TextView, buildText, options });\r\n\t\t},\r\n\r\n\r\n\t\tgetFooterView(){\r\n\t\t\tif (this.getOption('buttonsInFooter')) {\r\n\t\t\t\treturn this.buildButtonsView();\r\n\t\t\t} else {\r\n\t\t\t\treturn this.buildFooterView();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbuildFooterView(){\r\n\t\t\treturn this._buildNestedTextView('footer', { tagName: 'footer' });\r\n\t\t},\r\n\r\n\t\tbuildButtonsView(){\r\n\t\t\tif (this._buttonsView) {\r\n\t\t\t\tthis.stopListening(this._buttonsView);\r\n\t\t\t}\r\n\r\n\t\t\tlet options = this.buildButtonsOptions();\r\n\t\t\tlet view = buildViewByKey(this, 'buttonsView', { options });\r\n\t\t\tif (!view) { return; }\r\n\r\n\t\t\tthis._buttonsView = view;\r\n\t\t\tthis.settleButtonsListeners(view);\r\n\r\n\t\t\treturn [view, Infinity];\r\n\t\t},\r\n\t\tbuildButtonsOptions(){\r\n\t\t\tlet btns = this.getOption('buttons');\r\n\t\t\tif(btns) {\r\n\t\t\t\treturn _.reduce(btns, (hash, b) => {\r\n\t\t\t\t\tlet item = this.buildButton(b, this);\r\n\t\t\t\t\thash[item.name] = item;\r\n\t\t\t\t\treturn hash;\r\n\t\t\t\t}, {});\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\tbuildButton(value){\r\n\t\t\tif (_.isString(value)) {\r\n\t\t\t\treturn this.buildButton({ text: value, className: value, name: value });\r\n\t\t\t} else if(_.isFunction(value)) {\r\n\t\t\t\treturn this.buildButton(value.call(this));\r\n\t\t\t} else if(_.isObject(value)) {\r\n\t\t\t\treturn this.fixButton(value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfixButton(button){\r\n\t\t\treturn button;\r\n\t\t},\r\n\t\tsettleButtonsListeners(buttonsView){\r\n\t\t\tthis.on({\r\n\t\t\t\t// 'control:valid': () => {\r\n\t\t\t\t// \tbuttonsView.enableButton('resolve');\r\n\t\t\t\t// },\r\n\t\t\t\t// 'control:invalid': () => {\r\n\t\t\t\t// \tbuttonsView.disableButton('resolve');\r\n\t\t\t\t// },\r\n\t\t\t\t'control:done': (value) => {\r\n\t\t\t\t\tthis._fulfill('resolve', value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.listenTo(buttonsView, {\r\n\t\t\t\t'resolve'(){\r\n\t\t\t\t\tlet value = this.getControlValue();\r\n\t\t\t\t\tthis._fulfill('resolve', value);\r\n\t\t\t\t\t//this.triggerMethod('resolve', this.getControlValue());\r\n\t\t\t\t},\r\n\t\t\t\t'reject'(){\r\n\t\t\t\t\tthis._fulfill('reject');\r\n\t\t\t\t\t//this.triggerMethod('reject');\r\n\t\t\t\t},\r\n\t\t\t\t'reject:soft'(){\r\n\t\t\t\t\tthis._fulfill('reject:soft');\r\n\t\t\t\t\t//this.triggerMethod('reject:soft');\r\n\t\t\t\t},\r\n\t\t\t\t'reject:hard'(){\r\n\t\t\t\t\tthis._fulfill('reject:hard');\r\n\t\t\t\t\t//this.triggerMethod('reject:hard');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\t_fulfill(type, ...rest){\r\n\t\t\tthis.triggerMethod(type, ...rest);\r\n\t\t},\r\n\r\n\t\tgetControlView(){\r\n\t\t\tthis.control = buildViewByKey(this, 'controlView', { options: { parentControl: this, value: this.getControlValue() } });\r\n\t\t\treturn this.control;\r\n\t\t},\r\n\r\n\r\n\t\t_onControlInvalid(value, error){\r\n\t\t\tthis.disableButtons();\r\n\t\t\tthis._showValidateError(error);\r\n\t\t},\r\n\t\t_onControlValid(){\r\n\t\t\tthis.enableButtons();\r\n\t\t\tthis._hideValidateError();\r\n\t\t},\r\n\t\t\r\n\t\tdisableButtons(){\r\n\t\t\tif(this._buttonsView && _.isFunction(this._buttonsView.disableButton)) {\r\n\t\t\t\tthis._buttonsView.disableButton('resolve');\r\n\t\t\t}\r\n\t\t},\r\n\t\tenableButtons(){\r\n\t\t\tif(this._buttonsView && _.isFunction(this._buttonsView.enableButton)) {\r\n\t\t\t\tthis._buttonsView.enableButton('resolve');\r\n\t\t\t}\r\n\t\t},\r\n\t\t_showValidateError(error){\r\n\t\t\t\r\n\t\t\tlet shouldShow = this.getOption('shouldShowError');\r\n\t\t\tlet skipFirstValidationError = this.getOption('skipFirstValidationError');\r\n\r\n\t\t\tif (skipFirstValidationError && !this._firstValidationErrorSkipped) {\r\n\t\t\t\tthis._firstValidationErrorSkipped = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!shouldShow) return;\r\n\r\n\t\t\tlet show = this.getOption('showValidateError', { force: false });\r\n\t\t\tif (_.isFunction(show)) {\r\n\t\t\t\tshow.call(this, error);\r\n\t\t\t} else {\r\n\t\t\t\tif (!this._errorView) return;\r\n\t\t\t\tthis._errorView.showError(error);\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\t_hideValidateError(){\r\n\t\t\tlet hide = this.getOption('hideValidateError', { force: false });\r\n\t\t\tif (_.isFunction(hide)) {\r\n\t\t\t\thide.call(this);\r\n\t\t\t} else {\r\n\t\t\t\tif (!this._errorView) return;\r\n\t\t\t\tthis._errorView.hideError();\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t}, { ControlViewMixin: true });\r\n\r\n\r\n};\r\n","import _ from 'underscore';\r\n\r\nimport { CollectionView, View } from 'backbone.marionette';\r\nimport { isClass } from 'bbmn-core';\r\nimport { cssClassModifiersMixin } from 'bbmn-mixins';\r\nimport buttonMixin from '../button/index.js';\r\n\r\nexport default Base => {\r\n\tif (Base == null) {\r\n\t\tBase = CollectionView;\r\n\t}\r\n\r\n\tif(!isClass(Base, CollectionView)){\r\n\t\tthrow new Error('promiseBar mixin can be applied only on CollectionView');\r\n\t}\r\n\r\n\tlet Mixed = Base;\r\n\r\n\tif (!Mixed.CssClassModifiersMixin) {\r\n\t\tMixed = cssClassModifiersMixin(Mixed);\r\n\t}\r\n\r\n\treturn Mixed.extend({\r\n\t\tconstructor(options){\r\n\t\t\tthis._buttons = {};\r\n\t\t\tBase.apply(this, arguments);\r\n\t\t\tthis.addPromiseBarCssClass();\r\n\t\t\tthis.mergeOptions(options, ['promise', 'reject', 'resolve', 'beforeRejectSoft', 'beforeRejectHard', 'beforeResolve']);\r\n\t\t},\r\n\t\ttagName: 'footer',\r\n\t\tresolve:'ok',\r\n\t\ttriggerNameEvent: true,\r\n\t\taddPromiseBarCssClass(){\r\n\t\t\tthis.addCssClassModifier('promise-bar');\r\n\t\t},\r\n\t\tonRender(){\r\n\t\t\tthis.addButtons();\r\n\t\t},\r\n\t\taddButtons(){\r\n\t\t\tlet buttons = this.buildButtons() || [];\r\n\t\t\twhile (buttons.length){\r\n\t\t\t\tlet button = buttons.pop();\r\n\t\t\t\tlet preventRender = !!buttons.length;\r\n\t\t\t\tthis.addChildView(button, { preventRender });\r\n\t\t\t}\r\n\t\t},\r\n\t\tbuildButtons(){\r\n\t\t\tlet names = ['resolve','rejectSoft','rejectHard'];\r\n\t\t\treturn _.reduce(names, (buttons, name) => {\r\n\t\t\t\tlet button = this.buildButton(name);\r\n\t\t\t\tbutton && buttons.push(button);\r\n\t\t\t\treturn buttons;\r\n\t\t\t}, []);\r\n\t\t},\r\n\t\tbuildButton(name){\r\n\t\t\tlet options = this.getButtonOptions(name);\r\n\t\t\tif (!options) return;\r\n\t\t\tlet Button = this.getOption('buttonView');\r\n\t\t\tif (!Button) {\r\n\t\t\t\tButton = this.buttonView = buttonMixin(View);\r\n\t\t\t}\r\n\t\t\tlet btn = new Button(options);\r\n\t\t\tthis._buttons[name] = btn;\r\n\t\t\treturn btn;\r\n\t\t},\r\n\t\tgetButtonOptions(name){\r\n\t\t\tlet options = this.getOption(name);\r\n\t\t\tif ( !options ) return;\r\n\t\t\tif( _.isString(options) ) {\r\n\t\t\t\toptions = { text: options };\r\n\t\t\t} else if(!_.isObject(options)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet defs = { \r\n\t\t\t\tclassName: name, \r\n\t\t\t\tname, \r\n\t\t\t\ttriggerNameEvent: this.getOption('triggerNameEvent'), \r\n\t\t\t\tstopEvent: true,\r\n\t\t\t\ttext: options.text || name,\r\n\t\t\t};\r\n\t\t\toptions = _.extend(defs, options);\r\n\t\t\treturn options;\r\n\t\t},\r\n\t\tchildViewEvents:{\r\n\t\t\t'click:resolve'(data){\r\n\t\t\t\tthis.triggerMethod('resolve', data);\r\n\t\t\t},\r\n\t\t\t'click:rejectSoft'(value){ \r\n\t\t\t\tthis.triggerMethod('reject', { type: 'soft', value });\r\n\t\t\t\tthis.triggerMethod('reject:soft', value);\r\n\t\t\t},\r\n\t\t\t'click:rejectHard'(value){ \r\n\t\t\t\tthis.triggerMethod('reject', { type: 'hard', value });\r\n\t\t\t\tthis.triggerMethod('reject:hard', value);\r\n\t\t\t},\r\n\t\t\t'click:fail'(error, name, event, view) {\r\n\t\t\t\tthis.triggerMethod('click:fail', error, name, event, view);\r\n\t\t\t\tif (name) {\r\n\t\t\t\t\tthis.triggerMethod(`click:${name}:fail`, error, event, view);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdisableButton(name){\r\n\t\t\tlet btn = this._buttons[name];\r\n\t\t\tbtn && btn.disable();\r\n\t\t},\r\n\t\tenableButton(name){\r\n\t\t\tlet btn = this._buttons[name];\r\n\t\t\tbtn && btn.enable();\r\n\t\t},\r\n\r\n\t});\r\n\r\n};\r\n","import promiseBarMixin from './mixin';\r\nimport { CollectionView } from '../config';\r\nimport Button from '../button';\r\n\r\nexport default promiseBarMixin(CollectionView).extend({\r\n\tbuttonView: Button\r\n});\r\n\r\nexport {\r\n\tpromiseBarMixin\r\n};\r\n","import _ from 'underscore';\r\nimport { View, CollectionView } from '../config';\r\nimport controlViewMixin from './mixin';\r\nimport PromiseBar from '../promise-bar';\r\n\r\nconst textView = View.extend({\r\n\ttemplate: _.template('<%= text %>'),\r\n\ttemplateContext(){\t\t\r\n\t\treturn {\r\n\t\t\ttext: this.getOption('text')\r\n\t\t};\r\n\t}\r\n});\r\n\r\nconst ControlView = controlViewMixin(CollectionView).extend({\r\n\trenderAllCustoms: true,\r\n\tbuttonsView: PromiseBar,\r\n\ttextView,\r\n\tfixButton(btn){\r\n\t\tif (btn.name != btn.text) { return btn; }\r\n\r\n\t\tif (btn.text === 'rejectSoft') {\r\n\t\t\tbtn.text = 'cancel';\r\n\t\t}\r\n\r\n\t\treturn btn;\r\n\t}\r\n});\r\nexport default ControlView;\r\nexport {\r\n\tcontrolViewMixin,\r\n\tControlView\r\n};\r\n","import _ from 'underscore';\r\n\r\nexport default {\r\n\t_createSchema(){\r\n\t\tlet schema = this.getOption('schema', { args: [ this.model, this ] });\r\n\t\tlet Schema = this.getSchemaClass();\r\n\r\n\t\tif(schema instanceof Schema){\r\n\t\t\treturn schema;\r\n\t\t}\r\n\r\n\t\t\r\n\t\tif(schema == null || _.isObject(schema)) {\r\n\t\t\treturn this.createSchema(Schema, schema);\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tgetSchema(){\r\n\t\tif(this._schema) { return this._schema; }\r\n\t\t\r\n\t\tthis._schema = this._createSchema();\r\n\t\treturn this._schema;\r\n\t},\r\n\tcreateSchema(Schema, options = {}){\r\n\t\treturn new Schema(options);\r\n\t},\r\n\tgetSchemaClass(){\r\n\t\treturn this.getOption('schemaClass');\r\n\t},\r\n};\r\n","import _ from 'underscore';\r\nimport { View } from 'bbmn-components';\r\n\r\nexport default View.extend({\r\n\tclassName:'control-validate-wrapper',\r\n\tcssClassModifiers:[\r\n\t\t(m,v) => v.errorMessage ? 'error' : ''\r\n\t],\r\n\tgetTemplate(){\t\t\r\n\t\treturn () => this.errorMessage;\r\n\t},\r\n\tshowError(error){\r\n\t\tif(_.isArray(error)){\r\n\t\t\terror = error.join(', ').trim();\r\n\t\t}\r\n\t\tthis.errorMessage = error;\r\n\t\tthis.render();\r\n\t},\r\n\thideError(){\r\n\t\tthis.errorMessage = '';\r\n\t\tthis.render();\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\n\r\nimport { validator, PropertySchema } from 'bbmn-components';\r\n\r\nimport { mix, buildViewByKey } from 'bbmn-utils';\r\n\r\nimport { controlViewMixin } from '../control-view/index.js';\r\nimport common from './common.js';\r\nimport { View } from 'backbone.marionette';\r\nimport errorView from './error-view';\r\n\r\nexport default Base => {\r\n\tconst Mixed = mix(Base).with(controlViewMixin, common);\r\n\r\n\treturn Mixed.extend({\r\n\t\t\r\n\t\tshouldShowError: false,\r\n\t\terrorView,\r\n\t\tclassName:'edit-model-property',\r\n\t\tschemaClass: PropertySchema,\r\n\t\tdebounceChildControlEvents: 0,\r\n\r\n\r\n\t\tgetDefaultValidateRule(options){\r\n\t\t\tlet schema = this.getSchema();\r\n\t\t\tlet rule = _.extend({}, schema.getType(options), schema.getValidation(options));\r\n\t\t\treturn rule;\r\n\t\t},\r\n\t\tgetValidateRule(options = {}){\r\n\t\t\tlet rule = this.getDefaultValidateRule(options);\r\n\t\t\treturn rule;\r\n\t\t},\r\n\t\t\r\n\t\tgetHeaderView(){\r\n\t\t\treturn this._getHeaderView();\r\n\t\t},\r\n\t\t_getHeaderView(){\r\n\t\t\tlet TextView = this.getOption('textView');\r\n\t\t\tlet buildText;\r\n\t\t\tif (!TextView) {\r\n\t\t\t\tbuildText = (text, opts) => new View(_.extend({}, opts, { template: () => text }));\r\n\t\t\t}\r\n\t\t\tlet view = buildViewByKey(this, 'header', { TextView, buildText, options: { tagName: 'header' } });\r\n\t\t\tif(view) { return view; }\r\n\r\n\t\t\tif(this.getOption('propertyLabelAsHeader')) {\r\n\t\t\t\tlet label = this.getSchema().getLabel();\r\n\t\t\t\tif(TextView) {\r\n\t\t\t\t\treturn new TextView({ text: label, tagName: 'header'});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn new View({ template: () => label, tagName: 'header'});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetSchemaOptions(opts){\r\n\t\t\tlet options = {\r\n\t\t\t\tvalue: this.getControlValue(),\r\n\t\t\t\tallValues: this.getParentControlValue(),\r\n\t\t\t\tmodel: this.model\t\t\t\r\n\t\t\t};\r\n\t\t\treturn _.extend(options, opts);\r\n\t\t},\r\n\t\tgetControlView(){\r\n\t\t\tlet options = this.getSchemaOptions();\r\n\t\t\tlet editOptions = this.getSchema().getEdit(options);\r\n\t\t\treturn this.buildPropertyView(editOptions);\r\n\t\t},\r\n\t\tcontrolValidate(value, allValues){\r\n\t\t\tlet rule = this.getValidateRule({ value, allValues });\r\n\t\t\tif(!rule || !_.size(rule)) return;\r\n\t\t\treturn validator.validate(value, rule, { allValues });\r\n\t\t},\r\n\t\t\r\n\t\t// must be overrided\r\n\t\t// accepts:\toptions arguments.\r\n\t\t// returns:\tshould return Control instance\r\n\t\tbuildPropertyView(){\r\n\t\t\tthrow new Error('buildPropertyView not implemented. You should build view by your own');\r\n\t\t},\r\n\r\n\t});\r\n};\r\n","import _ from 'underscore';\r\nimport { controlViewMixin } from '../control-view/index.js';\r\nimport common from './common.js';\r\nimport { mix } from 'bbmn-utils';\r\nimport EditProperty from './property.js';\r\n\r\nimport { ModelSchema } from 'bbmn-components';\r\n\r\nimport propertyErrorView from './error-view';\r\n\r\nexport default Base => {\r\n\tlet Mixed = mix(Base).with(controlViewMixin, common);\r\n\r\n\treturn Mixed.extend({\r\n\r\n\t\tshouldShowError: false,\r\n\t\tshouldShowPropertyError: true,\r\n\t\tpropertyErrorView,\r\n\t\tvalidateOnReady: true,\r\n\t\tbuttonsInFooter: true,\r\n\t\tisControlWrapper: false,\r\n\t\tschemaClass: ModelSchema,\r\n\t\teditPropertyClass: EditProperty,\r\n\r\n\t\tpropertyLabelAsHeader: true,\r\n\r\n\t\tclassName:'edit-model-control',\r\n\r\n\t\tgetCustoms(){\r\n\t\t\tlet customs = [];\r\n\t\t\tcustoms.push(...this.getPropertiesViews());\r\n\t\t\tcustoms.push(...this._customs);\r\n\t\t\tcustoms = this.injectSystemViews(customs);\r\n\t\t\treturn customs;\r\n\t\t},\r\n\t\tgetPropertiesViews(){\r\n\t\t\tlet modelSchema = this.getSchema();\r\n\t\t\tlet propertiesToShow = this.getOption('propertiesToShow', { args: [ this.model, this ]}) || [];\r\n\t\t\tif(!propertiesToShow.length) {\r\n\t\t\t\tpropertiesToShow = modelSchema.getPropertiesNames();\r\n\t\t\t}\r\n\t\t\treturn _.map(propertiesToShow, name => this._createEditProperty(name, modelSchema));\r\n\t\t},\r\n\t\t_createEditProperty(name, modelSchema){\r\n\t\t\tlet schema = modelSchema.getProperty(name, { create: true });\r\n\t\t\tlet EditProperty = this.getEditPropertyClass();\r\n\t\t\tconst def = {\r\n\t\t\t\tcontrolName: name,\r\n\t\t\t\tschema,\r\n\t\t\t\tvalue: this.getPropertyValue(name),\r\n\t\t\t\tallValues: this.getControlValue({ notValidated: true }),\r\n\t\t\t\tpropertyLabelAsHeader: this.getOption('propertyLabelAsHeader')\r\n\t\t\t};\r\n\t\t\tif(this.getOption('shouldShowPropertyError')) {\r\n\t\t\t\tdef.shouldShowError = true;\r\n\t\t\t\tdef.errorView = this.getOption('propertyErrorView');\r\n\t\t\t}\r\n\t\t\tlet options = this.getEditPropertyOptions(def);\r\n\t\t\treturn this.createEditProperty(EditProperty, options);\r\n\t\t},\r\n\t\tgetPropertyValue(property){\r\n\t\t\treturn this.getControlValue(property);\r\n\t\t},\r\n\t\tgetEditPropertyClass(){\r\n\t\t\treturn this.getOption('editPropertyClass');\r\n\t\t},\r\n\t\tgetEditPropertyOptions(defaultOptions){\r\n\t\t\treturn _.extend({}, defaultOptions, this.getOption('editPropertyOptions'));\r\n\t\t},\r\n\t\tcreateEditProperty(EditProperty, options){\r\n\t\t\treturn new EditProperty(options);\r\n\t\t},\r\n\r\n\t});\r\n};\r\n","import _ from 'underscore';\r\n//import { isClass } from 'bbmn-core';\r\nimport { PropertySchema } from 'bbmn-components';\r\n\r\nconst controls = {\r\n\r\n};\r\n\r\nfunction guesControl(arg) {\r\n\tif(!_.isObject(arg)) {\r\n\t\treturn;\r\n\t}\r\n\tlet control = getControlByName(arg.control);\r\n\r\n\tif(!control){\r\n\t\tcontrol = getControlByName(arg.type);\r\n\t}\r\n\r\n\tif (!control && !!arg.sourceValues) {\r\n\t\tcontrol = getControlByName('select');\r\n\t}\r\n\r\n\treturn control;\r\n}\r\n\r\nfunction getControlByName(name){\r\n\treturn controls[name];\r\n}\r\n\r\nfunction getControlBySchema(schema, opts){\r\n\tlet value = schema.getType(opts);\r\n\tlet control = getControlByName(value.control);\r\n\tif (!control && !!value.sourceValues) {\r\n\t\tcontrol = getControlByName('select');\r\n\t}\r\n\tif (!control && value.modelType == 'range') {\r\n\t\tcontrol = getControlByName('range:' + value.type);\r\n\t\tif(!control){\r\n\t\t\tcontrol = getControlByName('range');\r\n\t\t}\r\n\t}\r\n\treturn control;\r\n}\r\n\r\nfunction getControl(arg, opts){\r\n\tlet control;\r\n\tif(_.isString(arg)){\r\n\t\tcontrol = getControlByName(arg, opts);\r\n\t} else if(arg instanceof PropertySchema) {\r\n\t\tcontrol = getControlBySchema(arg, opts);\r\n\t} else {\r\n\t\tcontrol = guesControl(arg, opts);\r\n\t}\r\n\treturn control || controls.default;\r\n}\r\n\r\nfunction defineControl(name, Control){\r\n\tif(!_.isString(name)) {\r\n\t\tthrow new Error('name must be a string');\r\n\t}\r\n\tcontrols[name] = Control;\r\n}\r\n\r\n\r\n\r\nexport {\r\n\tdefineControl,\r\n\tgetControl,\r\n\tcontrols,\r\n};\r\n","import editPropertyMixin from './property.js';\r\nimport editModelMixin from './model.js';\r\nimport { mix } from 'bbmn-utils';\r\nimport ControlView from '../control-view';\r\nimport { getControl } from '../controls';\r\nimport SchemaErrorView from './error-view';\r\n\r\nconst BaseEditProperty = mix(ControlView).with(editPropertyMixin);\r\n\r\nconst EditProperty = BaseEditProperty.extend({\r\n\tgetEditControl(){\r\n\t\treturn getControl(this.getSchema(), this.getSchemaOptions());\r\n\t},\r\n\tgetEditControlOptions(editOptions){\r\n\t\treturn editOptions;\r\n\t},\r\n\tbuildPropertyView(editOptions){\r\n\t\tlet Control = this.getEditControl();\r\n\t\tlet options = this.getEditControlOptions(editOptions);\r\n\t\treturn new Control(options);\r\n\t},\r\n});\r\n\r\nconst EditModel = mix(ControlView).with(editModelMixin).extend({\r\n\teditPropertyClass: EditProperty\r\n});\r\n\r\nexport {\r\n\teditPropertyMixin,\r\n\teditModelMixin,\r\n\tEditProperty,\r\n\tEditModel,\r\n\tSchemaErrorView\r\n};\r\n","import _ from 'underscore';\r\nimport { getOption } from 'bbmn-utils';\r\nconst _getOption = (context, key, checkAlso) => getOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function getInputType(inputView, opts = {}){\r\n\t\r\n\tlet valueType = _getOption(inputView, 'valueType', opts);\r\n\t\r\n\tif(opts.valueOptions && opts.valueOptions.type) {\r\n\t\tvalueType = opts.valueOptions.type;\r\n\t}\r\n\r\n\tif (valueType == null) {\r\n\t\tlet value = inputView.getControlValue();\r\n\t\tif ( value == null) {\r\n\t\t\tvalueType = 'string';\r\n\t\t} else {\r\n\t\t\tif(_.isNumber(value))\r\n\t\t\t\tvalueType = 'number';\r\n\t\t\telse if(_.isDate(value))\r\n\t\t\t\tvalueType = 'datetime';\r\n\t\t\telse\r\n\t\t\t\tvalueType = 'string';\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tif (valueType == 'number') {\r\n\t\tinputView._valueIsNumber = true;\r\n\t}\r\n\r\n\tlet type = _getOption(inputView, 'inputType', opts);\r\n\tif(type == null){\r\n\t\ttype = _getOption(inputView.valueOptions, 'inputType', opts.valueOptions);\r\n\t}\r\n\tif (!type) {\r\n\t\tif (inputView._valueIsNumber) {\r\n\t\t\ttype = _getOption(inputView, 'inputNumberType', opts) || 'number';\r\n\t\t} else if (valueType == 'string') {\r\n\t\t\ttype = 'text';\r\n\t\t} else if (valueType == 'datetime') {\r\n\t\t\ttype = 'datetime';\r\n\t\t} else {\r\n\t\t\ttype = 'text';\r\n\t\t}\r\n\t}\r\n\tinputView.inputType = type;\r\n\tinputView.valueType = valueType;\r\n\treturn type;\r\n}\r\n","import _ from 'underscore';\r\nimport getInputType from './get-input-type.js';\r\n\r\nimport { getOption } from 'bbmn-utils';\r\n\r\nfunction fixAttributes(attrs, view, opts)\r\n{\r\n\tlet tagName = getOption(view, opts, 'tagName');\r\n\tif(['select', 'textarea'].indexOf(tagName) > -1) {\r\n\t\tdelete attrs.value;\r\n\t\tdelete attrs.type;\r\n\t}\r\n\treturn attrs;\r\n}\r\n\r\nexport default function setInputAttributes(inputView, opts = {}) {\r\n\r\n\tlet attributes = getOption(inputView, opts, 'attributes');\r\n\r\n\tlet check = _.extend({}, inputView, opts, inputView.valueOptions, opts.valueOptions);\r\n\r\n\tlet restrictionKeys = {\r\n\t\t'maxLength':'maxlength', \r\n\t\t'minLength':'minlength',\r\n\t\t'minValue':'min', \r\n\t\t'maxValue':'max', \r\n\t\t'valuePattern':'pattern',\r\n\t\t'required':'required',\r\n\t\t'value':'value'\r\n\t};\r\n\r\n\tlet restrictions = {};\r\n\t_(restrictionKeys).each((key2, key) => {\r\n\t\tlet value = check[key];\r\n\t\tif (value != null)\r\n\t\t\trestrictions[key2] = value;\r\n\t});\r\n\r\n\tlet newattributes = _.extend({\r\n\t\tvalue: inputView.value,\r\n\t\ttype: getInputType(inputView, opts),\r\n\t}, restrictions, attributes);\r\n\t\r\n\tinputView.attributes = fixAttributes(newattributes, inputView, opts);\r\n\r\n\tif(opts.attributes)\r\n\t\tdelete opts.attributes;\r\n}\r\n","import { getOption } from 'bbmn-utils';\r\nexport default (context, key, ifNull) => getOption(context, key, { args:[context], default: ifNull });\r\n\r\n","export default function isChar(event){\r\n\treturn event.key && event.key.length == 1 && !event.ctrlKey;\r\n}","import getOption from './_get-option.js';\r\nimport isChar from './_is-char.js';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('keydown', event) === false) { return; }\r\n\r\n\r\n\tlet prevent = false;\r\n\tlet stop = false;\r\n\r\n\tif (isChar(event)) {\r\n\t\tif (!context.isEnteredCharValid(event.key)) {\r\n\t\t\tprevent = true;\r\n\t\t}\r\n\t}\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tprevent = true;\r\n\t\tstop = true;\r\n\t}\r\n\r\n\tstop && event.stopPropagation();\r\n\tprevent && event.preventDefault();\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('keyup', event) === false) { return; }\r\n\r\n\tif (event.keyCode == 13) {\r\n\t\t\r\n\t\tlet shouldDone = getOption(context, 'doneOnEnter', true);\r\n\t\tif (shouldDone) {\r\n\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t\tcontext.controlDone();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n}\r\n","export default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\t\r\n\tif (context.triggerMethod('paste', event) === false) { return; }\r\n\r\n\r\n\tlet text = event.originalEvent.clipboardData.getData('text/plain');\r\n\tif (!text) return;\r\n\tif (!context.isValueValid(text)) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t}\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('blur', event) === false) { return; }\r\n\r\n\r\n\tif (getOption(context, 'doneOnBlur', true)) {\r\n\t\tcontext.controlDone();\r\n\t}\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context, input, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('focus', event) === false) { return; }\r\n\r\n\tif (getOption(context, 'selectOnFocus', true)) {\r\n\t\tinput.select();\r\n\t}\r\n}\r\n","export default function(eventContext) {\r\n\r\n\tlet { context, input, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('input', event) === false) { return; }\r\n\r\n\r\n\tcontext.setControlValue(event.target.value).then(newvalue => {\r\n\t\tif (event.target.value != (newvalue || '').toString()) {\r\n\t\t\tinput.value = newvalue;\r\n\t\t}\r\n\t});\r\n\r\n}\r\n","import keydown from './keydown.js';\r\nimport keyup from './keyup.js';\r\nimport paste from './paste.js';\r\nimport blur from './blur.js';\r\nimport focus from './focus.js';\r\nimport input from './input.js';\r\n\r\nexport default {\r\n\tkeydown, \r\n\t//keypress,\r\n\tkeyup,\r\n\tpaste,\r\n\tblur,\r\n\tfocus,\r\n\tinput,\r\n\t//'js:change': jsChange\r\n};\r\n","import _ from 'underscore';\r\nimport { camelCase } from 'bbmn-utils';\r\nimport events from './events/index.js';\r\nexport default function handleInputEvent(control, eventName, event) {\r\n\tlet options = _.extend({\r\n\t\tcontext: control,\r\n\t\tinput: control.el,\r\n\t\trestrictions: control.restrictions,\r\n\t\teventName,\r\n\t\tevent\r\n\t});\r\n\r\n\r\n\tlet method = camelCase(`on:dom:${eventName}`);\r\n\r\n\tif (_.isFunction(events[eventName])) {\r\n\t\tevents[eventName].call(control, options);\r\n\t} \r\n\t\r\n\tif (_.isFunction(control[method])) {\r\n\t\tcontrol[method](event, options);\r\n\t} \r\n}\r\n","import _ from 'underscore';\r\nimport handleEvent from './handle-event.js';\r\nimport eventHandlers from './events/index.js';\r\nimport { getOption } from 'bbmn-utils';\r\n\r\n\r\nconst _getOption = (context, key, checkAlso) => \r\n\tgetOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function setInputEvents(inputView, opts = {}) {\r\n\r\n\tlet passedEvents = _getOption(inputView, 'events', opts);\t\r\n\r\n\tlet eventsArray = _(eventHandlers).keys();\t\r\n\tlet events = _.reduce(eventsArray, (Memo, eventName) => {\r\n\t\tMemo[eventName] = function(event){ \r\n\t\t\thandleEvent(this, eventName, event); \r\n\t\t};\r\n\t\treturn Memo;\r\n\t}, {});\r\n\tinputView.events = _.extend(events, passedEvents);\r\n}\r\n","import _ from 'underscore';\r\nimport { convertString as convert, getOption } from 'bbmn-utils';\r\n\r\nimport ControlMixin from '../control-mixin/index.js';\r\nimport setInputAttributes from './set-attributes.js';\r\nimport setInputEvents from './set-events.js';\r\n\r\n//import { convertString as convert, getOption } from '../../../utils/index.js';\r\nexport default Base => {\r\n\tlet Mixin = Base.ControlMixin ? Base : ControlMixin(Base);\r\n\treturn Mixin.extend({\r\n\t\tconstructor(opts){\r\n\t\t\t\r\n\t\t\tthis._initControl(opts);\r\n\r\n\t\t\tsetInputAttributes(this, opts);\r\n\t\t\tsetInputEvents(this, opts);\r\n\t\t\tMixin.apply(this, arguments);\r\n\r\n\t\t\tif (!_.isFunction(this.getOption)) {\r\n\t\t\t\tthis.getOption = (...args) => getOption(this, ...args);\r\n\t\t\t}\r\n\r\n\t\t\tthis.buildRestrictions();\r\n\t\t\tlet value = this.getOption('value');\r\n\t\t\tvalue == null && (value = '');\r\n\t\t\tthis.el.value = value;\r\n\t\t\t//this.setControlValue(value, { trigger: false, silent: true });\r\n\t\t},\r\n\t\ttagName:'input',\r\n\t\ttemplate: false,\r\n\t\tdoneOnEnter: true,\r\n\t\tdoneOnBlur: true,\r\n\t\tbuildRestrictions(){\r\n\t\t\tlet attrs = _.result(this, 'attributes');\r\n\t\t\tlet pickNumbers = ['maxlength', 'minlength', 'min', 'max'];\r\n\t\t\tlet pickStrings = ['pattern'];\r\n\t\t\tlet pickBools = ['required'];\r\n\t\t\tlet restrictions = {};\r\n\t\t\t_(attrs).each((value, key) => {\r\n\t\t\t\tlet pick = false;\r\n\t\t\t\tkey = key.toLowerCase();\r\n\t\t\t\tif (pickNumbers.indexOf(key) > -1) {\r\n\t\t\t\t\tvalue = convert(value, 'number');\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickStrings.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickBools.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t\tvalue = convert(value, 'boolean', { returnNullAndEmptyAs: true, returnOtherAs: true });\r\n\t\t\t\t}\r\n\t\t\t\tpick && (restrictions[key] = value);\r\n\t\t\t});\r\n\t\t\tthis.restrictions = restrictions;\t\t\r\n\t\t},\r\n\t\tprepareValueBeforeSet(value){\r\n\t\t\tif (value == null || value === '') return value;\r\n\t\t\t\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\tif (len > 0) {\r\n\t\t\t\tvalue = value.toString().substring(0, len);\r\n\t\t\t}\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tlet num = convert(value, 'number');\r\n\t\t\t\tif(isNaN(num))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tlet min = this.restrictions.min;\r\n\t\t\t\tlet max = this.restrictions.max;\r\n\t\t\t\t!isNaN(min) && num < min && (num = min);\r\n\t\t\t\t!isNaN(max) && num > max && (num = max);\r\n\t\t\t\treturn num;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tgetValueType(){\r\n\t\t\treturn this.valueType;\r\n\t\t},\r\n\t\tconvertValue(value){\r\n\t\t\treturn convert(value, this.getValueType());\r\n\t\t},\t\t\r\n\t\tgetMaxLength()\r\n\t\t{\r\n\t\t\treturn this.restrictions.maxlength;\r\n\r\n\t\t},\r\n\t\tisLengthValid(){\r\n\t\t\tlet value = this.getControlValue();\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\treturn len == null || value.length < len;\r\n\t\t},\r\n\t\tisEnteredCharValid(char) {\r\n\t\t\tlet type = this.getValueType();\r\n\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn ['.','-'].indexOf(char) > -1 || !isNaN(parseInt(char, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisValueValid(value){\r\n\t\t\tlet type = this.getValueType();\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn !isNaN(parseFloat(value, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcontrolValidate(value){\r\n\t\t\tif (value == null || value === '') {\r\n\t\t\t\tif(this.restrictions.required)\r\n\t\t\t\t\treturn 'required';\r\n\t\t\t\telse if (this.restrictions.minLength > 0) {\r\n\t\t\t\t\treturn 'length:small';\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet strValue = value.toString();\r\n\t\t\tif (_.isNumber(this.restrictions.maxlength) && strValue.length > this.restrictions.maxlength)\r\n\t\t\t\treturn 'length:big';\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tif (!_.isNumber(value))\r\n\t\t\t\t\treturn 'not:number';\r\n\t\t\t\tif (_.isNumber(this.restrictions.min) && value < this.restrictions.min)\r\n\t\t\t\t\treturn 'less:than:min';\r\n\t\t\t\tif (_.isNumber(this.restrictions.max) && value > this.restrictions.max)\r\n\t\t\t\t\treturn 'greater:than:max';\r\n\t\t\t}\r\n\t\t\tif (this.restrictions.pattern) {\r\n\t\t\t\tlet pattern = RegExp(this.restrictions.pattern);\r\n\t\t\t\tif (pattern.test(strValue)) {\r\n\t\t\t\t\treturn 'pattern:mismatch';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import { View } from '../config';\r\nimport inputMixin from './mixin';\r\n\r\nimport { defineControl } from '../controls';\r\nconst InputControl = inputMixin(View);\r\n\r\ndefineControl('default', InputControl);\r\ndefineControl('text', InputControl);\r\ndefineControl('number', InputControl);\r\n\r\nexport default InputControl;\r\nexport {\r\n\tinputMixin\r\n};\r\n","import _ from 'underscore';\r\n\r\nimport { View } from '../config';\r\nimport Control from '../control-view';\r\nimport { camelCase } from 'bbmn-utils';\r\nimport { inputMixin } from '../input';\r\nimport { defineControl } from '../controls';\r\n\r\nconst TextArea = inputMixin(View).extend({\r\n\tdoneOnEnter: false,\r\n\ttagName:'textarea',\r\n\ttemplate: data => data.value,\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\tvalue: this.getControlValue()\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\nconst inputEvents = ['focus','blur','input','keyup','keydown'];\r\n\r\nconst TextAreaControl = Control.extend({\r\n\t\r\n\tconstructor(){\r\n\t\tControl.apply(this, arguments);\r\n\t\tthis.addCssClassModifier('control-textarea');\r\n\t},\r\n\tcontrolView: TextArea,\r\n\tcontrolViewOptions(){\r\n\t\tlet attributes = this.getOption('inputAttributes');\r\n\r\n\t\tlet options = {\r\n\t\t\tvalueOptions: this.getOption('valueOptions'),\t\t\t\r\n\t\t};\r\n\t\tif (attributes) {\r\n\t\t\toptions.attributes = attributes;\t\t\t\r\n\t\t}\r\n\t\treturn _.extend(options, this._delegateInputEvents());\r\n\t},\r\n\t_delegateInputEvents(){\r\n\t\tlet delegatedHandlers = {};\r\n\t\t_.each(inputEvents, name => {\r\n\t\t\tlet handlerName = camelCase('on', name);\r\n\t\t\tlet handler = this.getOption(handlerName, { force: false });\r\n\t\t\tif(_.isFunction(handler)) {\r\n\t\t\t\tdelegatedHandlers[handlerName] = (...args) => {\r\n\t\t\t\t\treturn this.triggerMethod(name, ...args);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn delegatedHandlers;\r\n\t}\r\n});\r\n\r\ndefineControl('textarea:simple', TextArea);\r\ndefineControl('bigtext', TextAreaControl);\r\ndefineControl('textarea', TextAreaControl);\r\n\r\nexport default TextAreaControl;\r\n\r\n\r\n","import _ from 'underscore';\r\nexport const common = {\r\n\tisSelected(){\r\n\t\tlet selector = this.getOption('selector');\r\n\t\treturn selector && selector.isSelected(this.model);\r\n\t},\r\n\tgetText(){\r\n\t\tlet text = this.getOption('text', { args: [this.model, this] });\r\n\t\tif (!text) {\r\n\t\t\ttext = _.isFunction(this.model.getLabel) && this.model.getLabel() || undefined;\r\n\t\t}\r\n\t\tif (!text) {\r\n\t\t\ttext = this.model.get('value');\r\n\t\t}\r\n\t\tif (!text) {\r\n\t\t\ttext = this.model.id;\r\n\t\t}\r\n\t\treturn text;\r\n\t},\r\n\ttriggerSelect(event){\r\n\t\tthis.triggerMethod('toggle:select', this, event);\r\n\t},\r\n\r\n\t_addSelectCssModifiers(){\r\n\t\tthis.addCssClassModifier('select-item');\r\n\t\tthis.addCssClassModifier((m,v) => v.isSelected() ? 'selected':'');\r\n\t},\r\n};\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tcommon._addSelectCssModifiers.call(this);\r\n\t},\t\r\n\tisSelected: common.isSelected,\r\n\ttriggerSelect: common.triggerSelect,\r\n}, { SelectableViewMixin: true });\r\n","import _ from 'underscore';\r\nimport mixin, { common } from './selectable-view-mixin';\r\nimport { View } from 'bbmn-components';\r\nimport { mix } from 'bbmn-utils';\r\n\r\nexport default mix(View).with(mixin).extend({\r\n\trenderOnModelChange: true,\r\n\ttemplate:_.template('<i></i><span><%= text %></span><i></i>'),\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\ttext: this.getText()\r\n\t\t};\r\n\t},\r\n\ttriggers:{\r\n\t\t'click':'toggle:select'\r\n\t},\r\n\t// events:{\r\n\t// \t'click'(event){\r\n\t// \t\tevent.stopPropagation();\r\n\t// \t\tthis.triggerMethod('toggle:select', this, event);\r\n\t// \t}\r\n\t// },\r\n\t// triggers: {\r\n\t// \t'click':{name:'toggle:select', stopPropagation: true}\r\n\t// },\r\n\tgetText: common.getText\r\n});\r\n","import _ from 'underscore';\r\nimport { ControlView } from '../control-view';\r\nimport { Selector, initSelectorMixin } from 'bbmn-components';\r\nimport { isCollectionClass, convertString, toBool } from 'bbmn-utils';\r\nimport DefaultChildView from './childview';\r\n//import fixChildView from './fix-childview';\r\nimport { defineControl } from '../controls';\r\n//import { Collection } from 'bbmn-core';\r\nconst BaseSelectControl = initSelectorMixin(ControlView);\r\nconst SelectControl = BaseSelectControl.extend({\r\n\tclassName: 'regular-select',\r\n\trenderCollection: true,\r\n\tdoneOnSelect: true,\r\n\tcssClassModifiers:[\r\n\t\t'select-control',\r\n\t\t(m,v) => v.isMultiple() ? 'multiple' : '',\r\n\t],\t\r\n\tconstructor(){\r\n\t\tBaseSelectControl.apply(this, arguments);\r\n\t\tthis.collection = this.selector.getCollection();\r\n\t},\r\n\tchildView: DefaultChildView,\r\n\tgetSelector(){\r\n\t\tif(!this.selector) {\r\n\t\t\tlet selectorOptions = this._getSelectorOptions();\r\n\t\t\tthis.selector = new Selector(selectorOptions);\r\n\t\t}\r\n\t\treturn this.selector;\r\n\t},\r\n\r\n\tonSelectorChange(){\r\n\t\tlet setPromise = this.setControlValue(this.selector.getValue());\r\n\t\tif (!this.isMultiple() && this.getOption('doneOnSelect')) {\r\n\t\t\tsetPromise.then(() => {\r\n\t\t\t\tthis.controlDone();\r\n\t\t\t});\r\n\t\t}\t\r\n\t},\r\n\t_getSelectorOptions(){\r\n\t\tlet source = this.getSource();\r\n\t\t\r\n\t\tlet type = this.valueOptions.type;\r\n\t\tlet extractValue = this.getOption('extractValue', { force: false});\r\n\t\tif (type == 'boolean') {\r\n\t\t\tsource = _.map(source, (value, ind) => ({id: toBool(ind), value }));\r\n\t\t\t!extractValue && (extractValue = model => model.id);\r\n\t\t}\r\n\t\tlet value = this.getControlValue();\r\n\t\tif (this.isMultiple() && type === 'enum' && _.isString(value)) {\r\n\t\t\tvalue = value.split(/\\s*,\\s*/g);\r\n\t\t}\r\n\t\tlet opts = {\r\n\t\t\tvalue,\r\n\t\t\tsource,\r\n\t\t\tmultiple: this.isMultiple(),\r\n\t\t};\r\n\t\tif(extractValue) {\r\n\t\t\topts.extractValue = extractValue;\r\n\t\t}\r\n\r\n\t\treturn opts;\r\n\t},\r\n\r\n\tsetFilter(filter){\r\n\t\tthis.selector.setSourceFilter(filter);\r\n\t},\r\n\tisMultiple(){\r\n\t\treturn this.valueOptions.multiple === true;\r\n\t},\r\n\tprepareValueBeforeSet(value){\r\n\t\tlet type = this.valueOptions.type;\r\n\t\tif (type == 'text') {\r\n\t\t\treturn value != null ? value.toString() : value;\r\n\t\t} else if (type == 'boolean') {\r\n\t\t\treturn toBool(value);\r\n\t\t} else if(_.isString(value)){\r\n\t\t\treturn convertString(value, this.valueOptions.type);\r\n\t\t} else if(_.isArray(value)) {\r\n\t\t\tif(this.valueOptions.type == 'enum') {\r\n\t\t\t\treturn value.join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn _.map(value, val => convertString(val, this.valueOptions.type));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetSource(){\r\n\t\tlet src = this.valueOptions.sourceValues;\r\n\t\tif(_.isFunction(src)){\r\n\t\t\tsrc = src();\r\n\t\t}\r\n\t\treturn src;\r\n\t},\r\n});\r\n\r\ndefineControl('select', SelectControl);\r\n\r\nexport default SelectControl;\r\n","import _ from 'underscore';\r\nimport { ControlView } from '../control-view';\r\nimport { toBool, isEmptyValue } from 'bbmn-utils';\r\nexport default ControlView.extend({\r\n\ttemplate:_.template('<i></i><small></small>'),\r\n\tconstructor(){\r\n\t\tControlView.apply(this, arguments);\r\n\t\tthis.addCssClassModifier((m,v) => v.getState());\r\n\t\tthis.addCssClassModifier('boolean-switch');\r\n\t\tthis._initClickHandler();\r\n\t\tthis.on('control:change', this.refreshStateLabel);\r\n\t\tthis.refreshStateLabel();\r\n\t},\r\n\tui:{\r\n\t\tlabel:'span'\r\n\t},\r\n\tgetState(){\r\n\t\tlet val = this.getControlValue({ transform: toBool });\r\n\t\tif (val == null) {\r\n\t\t\tval = false;\r\n\t\t}\r\n\t\treturn 'is-' + val.toString();\r\n\t},\r\n\tclickSelector: '',\r\n\t_initClickHandler(){\r\n\t\tlet event = ('click ' + this.getOption('clickSelector')).trim();\r\n\t\tthis.delegateEvents({\r\n\t\t\t[event]:'clickHandler'\r\n\t\t});\r\n\t},\r\n\tclickHandler(event){\r\n\t\tevent.stopPropagation();\r\n\t\tlet val = this.getControlValue();\r\n\t\tthis.setControlValue(!val);\r\n\t},\r\n\trefreshStateLabel(){\r\n\t\tif (!this.model) {\r\n\t\t\tthis.refreshCssClass();\r\n\t\t}\r\n\r\n\t\tlet labels = this.getOption('labels');\r\n\t\tif(!_.isObject(labels)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet val = this.getControlValue() === true;\r\n\t\tlet label = labels[val];\r\n\t\tif (isEmptyValue(label)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ui.label.html(label);\r\n\r\n\t},\r\n\tprepareValueBeforeSet(value){\r\n\t\treturn toBool(value);\r\n\t}\r\n});\r\n"],"names":["Object","BackboneView","MnObject","index","CollectionView","clone","buildRegion","View","normalizeRegion","result","register","toBool","Schema","Model","ModelSchemas","_nativeAjax","Fake","store","AtomTextView","childView","notify","Action","BaseAction","ActionStore","TextView","ModalView","CloseButtonView","ViewStack","config","action","paramsToObject","buttonMixin","Button","errorView","EditProperty","editPropertyMixin","getOption","_getOption","eventHandlers","events","handleEvent","convert","Control","common"],"mappings":"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"}